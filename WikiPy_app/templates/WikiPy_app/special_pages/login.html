{% load wpy_tags %}

{% if wpy_context.login_notice %}
  <div class="alert alert-info" role="alert">
    {{ wpy_context.login_notice }}
  </div>
{% endif %}
{% if wpy_context.login_warning %}
  <div class="alert alert-warning" role="alert">
    {{ wpy_context.login_warning }}
  </div>
{% endif %}

<div class="row">
  {% if not wpy_context.user.is_logged_in %}
    <div class="col">
      <form id="wpy-login-form" method="post"
            action="{% url 'wikipy:page' wpy_context.full_page_title_url %}?action=login">
        {% if wpy_context.login_error %}
          <div class="wpy-error alert alert-danger" role="alert">
            {% wpy_translate 'special.login.form.error' %}
          </div>
        {% endif %}

        <div class="form-group">
          <label for="wpy-login-username">{% wpy_translate 'special.login.form.username.label' %}</label>
          <input type="text" name="wpy-login-username" id="wpy-login-username" class="form-control" required
                 placeholder="{% wpy_translate 'special.login.form.username.placeholder' %}"
                 value="{{ wpy_context.login_username|default_if_none:'' }}"/>
        </div>

        <div class="form-group">
          <label for="wpy-login-password">{% wpy_translate 'special.login.form.password.label' %}</label>
          <input type="password" name="wpy-login-password" id="wpy-login-password" class="form-control" required
                 placeholder="{% wpy_translate 'special.login.form.password.placeholder' %}"/>
        </div>

        <input type="submit" class="btn btn-primary btn-block"
               value="{% wpy_translate 'special.login.form.submit.label' %}">

        <input type="hidden" name="wpy-login-returnto"
               value="{{ wpy_context.return_to|default_if_none:'' }}"/>
        <input type="hidden" name="wpy-login-returntopath"
               value="{{ wpy_context.return_to_path|yesno:'1,' }}"/>
        {% csrf_token %}
      </form>
    </div>
  {% endif %}

  <div id="wpy-login-other-links" class="col text-center">
    {#{% wpy_inner_link -1 'password_reset'  %}#}
    {% wpy_inner_link -1 'create_account' %}
  </div>
</div>