{% load wpy_tags %}

{% if wpy_context.create_account_notice %}
  <div class="alert alert-info" role="alert">
    {{ wpy_context.create_account_notice }}
  </div>
{% endif %}

<div class="row">
  <div class="col"></div>
  <div class="col">
    <form id="wpy-createaccount-form" method="post"
          action="{% url 'wikipy:page' wpy_context.full_page_title_url %}?action=create_account">
      <div class="form-group">
        <label for="wpy-createaccount-username">{% wpy_translate 'special.create_account.form.username.label' %}</label>
        <input type="text" name="wpy-createaccount-username" id="wpy-createaccount-username" required
               value="{{ wpy_context.create_account_username|default_if_none:'' }}"
               placeholder="{% wpy_translate 'special.create_account.form.username.placeholder' %}"
               class="form-control {% if wpy_context.create_account_invalid_username %}is-invalid{% endif %}"/>
        <div class="wpy-error invalid-feedback"
             {% if not wpy_context.create_account_invalid_username %}style="display: none;"{% endif %}>
          {% wpy_translate 'special.create_account.form.username.error.invalid' %}
        </div>
        <div class="wpy-error invalid-feedback"
             {% if not wpy_context.create_account_duplicate_username %}style="display: none;"{% endif %}>
          {% wpy_translate 'special.create_account.form.username.error.duplicate' %}
        </div>
      </div>

      {# TODO confirm password #}
      <div class="form-group">
        <label for="wpy-createaccount-password">{% wpy_translate 'special.create_account.form.password.label' %}</label>
        <input type="password" name="wpy-createaccount-password" id="wpy-createaccount-password" required
               placeholder="{% wpy_translate 'special.create_account.form.password.placeholder' %}"
               class="form-control {% if wpy_context.create_account_invalid_password %}is-invalid{% endif %}"/>
        <div class="wpy-error invalid-feedback">
          {% wpy_translate 'special.create_account.form.password.error' %}
        </div>
      </div>

      <div class="form-group">
        <label for="wpy-createaccount-passwordconfirm">
          {% wpy_translate 'special.create_account.form.password_confirm.label' %}
        </label>
        <input type="password" id="wpy-createaccount-passwordconfirm" required
               placeholder="{% wpy_translate 'special.create_account.form.password_confirm.placeholder' %}"
               class="form-control"/>
        <div class="wpy-error invalid-feedback">
          {% wpy_translate 'special.create_account.form.password_confirm.error' %}
        </div>
      </div>

      <div class="form-group">
        <label for="wpy-createaccount-email">{% wpy_translate 'special.create_account.form.email.label' %}</label>
        <input type="text" name="wpy-createaccount-email" id="wpy-createaccount-email" required
               value="{{ wpy_context.create_account_email|default_if_none:'' }}"
               placeholder="{% wpy_translate 'special.create_account.form.email.placeholder' %}"
               class="form-control {% if wpy_context.create_account_invalid_email %}is-invalid{% endif %}"/>
        {% if wpy_context.create_account_invalid_email %}
          <div class="wpy-error invalid-feedback">
            {% wpy_translate 'special.create_account.form.email.error' %}
          </div>
        {% endif %}
      </div>

      <input type="submit" class="btn btn-primary btn-block"
             value="{% wpy_translate 'special.create_account.form.submit.label' %}">
      {% csrf_token %}
    </form>
  </div>
  <div class="col"></div>
</div>
