{% extends 'ottm/base.html' %}
{% load static %}
{% load ottm %}

{% block styles %}
  <link href="{% static 'ottm/style.min.css' %}" rel="stylesheet">
{% endblock %}

{% block page-content %}
  <nav id="navbar" class="navbar navbar-expand-lg navbar-dark bg-dark">
    <a id="nav-main-link" class="navbar-brand" href="{% url 'ottm:map' %}">{{ context.site_name }}</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item"
            {% if not context.user.is_logged_in %}title="{% ottm_translate 'navbar.edit.signup_title' %}"{% endif %}>
          <a id="nav-edit-link" class="nav-link{% if not context.user.is_logged_in %} disabled{% endif %}"
             href="{% url 'ottm:edit' %}" {% if not context.user.is_logged_in %}tabindex="-1"
             aria-disabled="true" {% endif %}><span class="mdi mdi-pencil"></span>
            {% ottm_translate 'navbar.edit.label' %}</a>
        </li>
        <li class="nav-item">
          <a id="nav-history-link" class="nav-link"
             href="{% url 'ottm:history' %}"><span class="mdi mdi-history"></span>
            {% ottm_translate 'navbar.history.label' %}</a>
        </li>
      </ul>
      <ul class="navbar-nav ml-auto">
        <li class="nav-item">
          <a id="nav-help-link" class="nav-link" href="{% url 'ottm:help' %}">
            <span class="mdi mdi-help-circle-outline"></span>
            {% ottm_translate 'navbar.help.label' %}</a>
        </li>
        <li class="nav-item">
          <a id="nav-help-link" class="nav-link" href="{% url 'ottm:wiki_main_page' %}">
            <span class="mdi mdi-help-circle-outline"></span>{# TODO icon #}
            {% ottm_translate 'navbar.wiki.label' %}</a>
        </li>
        <li class="nav-item">
          <a id="nav-about-link" class="nav-link" href="{% url 'ottm:about' %}">
            <span class="mdi mdi-information-outline"></span>
            {% ottm_translate 'navbar.about.label' %}</a>
        </li>
        <li class="nav-item">
          <a id="nav-copyright-link" class="nav-link"
             href="{% url 'ottm:copyright' %}"><span class="mdi mdi-copyright"></span>
            {% ottm_translate 'navbar.copyright.label' %}</a>
        </li>
        {% if context.user.is_authenticated %}
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown"
               aria-haspopup="true" aria-expanded="false">
              <span class="mdi mdi-account"></span> {{ context.user.username }}
            </a>
            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown">
              <a class="dropdown-item" href="{% url 'ottm:user_profile' username=context.user.username %}">
                <span class="mdi mdi-account"></span> Profile
              </a>
              <a class="dropdown-item" href="{% url 'ottm:user_contributions' username=context.user.username %}">
                <span class="mdi mdi-puzzle"></span> Contributions
              </a>
              <a class="dropdown-item" href="{% url 'ottm:user_settings' %}">
                <span class="mdi mdi-cog"></span> Settings
              </a>
              <div class="dropdown-divider"></div>
              <a class="dropdown-item" id="nav-logout-link" href="{% url 'ottm:log_out' %}">
                <span class="mdi mdi-logout"></span> {% ottm_translate 'navbar.log_out.label' %}
              </a>
            </div>
          </li>
        {% else %}
          <li class="nav-item">
            <a id="nav-login-link" class="nav-link" href="{% url 'ottm:log_in' %}">
              <span class="mdi mdi-login"></span> {% ottm_translate 'navbar.log_in.label' %}
            </a>
          </li>
          <li class="nav-item">
            <a id="nav-signup-link" class="nav-link" href="{% url 'ottm:sign_up' %}">
              <span class="mdi mdi-account-plus"></span> {% ottm_translate 'navbar.sign_up.label' %}
            </a>
          </li>
        {% endif %}
      </ul>
    </div>
  </nav>
{% endblock %}
