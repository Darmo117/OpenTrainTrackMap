{"version":3,"file":"dep-user-settings.js","sources":["../../../../js-sources/src/user-settings.ts"],"sourcesContent":["import $ from \"jquery\";\n\n/**\n * Sets up events on the user settings form.\n */\nexport default function setupUserSettings() {\n  // Tab/URL hash synchronization\n  const hash = location.hash.substring(1) || \"personal-info\";\n  $(`#form-tab-${hash}`).addClass(\"active\");\n  $(`#form-panel-${hash}`).addClass(\"show active\");\n  $(\"#page-content ul[role='tablist'] button[role='tab']\").on(\"click\", (e) => {\n    location.hash = \"#\" + e.target.id.substring(9);\n  });\n\n  // Update example time when preferred timezone selection changes\n  $(\"#user-settings-form-preferred-timezone\").on(\"change\", (e) => {\n    const selectedTimezone = $(e.target).val();\n    if (typeof selectedTimezone !== \"string\") return;\n    const serverTimezone = window.ottm.config.get(\"serverTimezone\");\n    if (typeof serverTimezone !== \"string\") return;\n\n    const date = new Date();\n    // Convert date to selected timezone\n    const localTime = window.ottm.formatTime(\n      window.ottm.convertDateTimezone(date, selectedTimezone),\n    );\n    const $localTime = $(\"#local-time time\");\n    $localTime.text(localTime);\n    $localTime.attr(\"datetime\", localTime);\n    // Convert server time to stay coherent\n    const serverTime = window.ottm.formatTime(\n      window.ottm.convertDateTimezone(date, serverTimezone),\n    );\n    const $serverTime = $(\"#server-time time\");\n    $serverTime.text(serverTime);\n    $serverTime.attr(\"datetime\", serverTime);\n  });\n}\n"],"names":["setupUserSettings","hash","$","selectedTimezone","serverTimezone","date","localTime","$localTime","serverTime","$serverTime"],"mappings":"iEAKA,SAAwBA,GAAoB,CAE1C,MAAMC,EAAO,SAAS,KAAK,UAAU,CAAC,GAAK,gBAC3CC,EAAE,aAAaD,CAAI,EAAE,EAAE,SAAS,QAAQ,EACxCC,EAAE,eAAeD,CAAI,EAAE,EAAE,SAAS,aAAa,EAC/CC,EAAE,qDAAqD,EAAE,GAAG,QAAU,GAAM,CAC1E,SAAS,KAAO,IAAM,EAAE,OAAO,GAAG,UAAU,CAAC,CAAA,CAC9C,EAGDA,EAAE,wCAAwC,EAAE,GAAG,SAAW,GAAM,CAC9D,MAAMC,EAAmBD,EAAE,EAAE,MAAM,EAAE,IAAI,EACrC,GAAA,OAAOC,GAAqB,SAAU,OAC1C,MAAMC,EAAiB,OAAO,KAAK,OAAO,IAAI,gBAAgB,EAC1D,GAAA,OAAOA,GAAmB,SAAU,OAElC,MAAAC,MAAW,KAEXC,EAAY,OAAO,KAAK,WAC5B,OAAO,KAAK,oBAAoBD,EAAMF,CAAgB,CAAA,EAElDI,EAAaL,EAAE,kBAAkB,EACvCK,EAAW,KAAKD,CAAS,EACdC,EAAA,KAAK,WAAYD,CAAS,EAE/B,MAAAE,EAAa,OAAO,KAAK,WAC7B,OAAO,KAAK,oBAAoBH,EAAMD,CAAc,CAAA,EAEhDK,EAAcP,EAAE,mBAAmB,EACzCO,EAAY,KAAKD,CAAU,EACfC,EAAA,KAAK,WAAYD,CAAU,CAAA,CACxC,CACH"}