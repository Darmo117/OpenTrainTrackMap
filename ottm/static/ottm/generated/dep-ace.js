var xn={},ee={},be={};(function(a){a.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},a.getOS=function(){return a.isMac?a.OS.MAC:a.isLinux?a.OS.LINUX:a.OS.WINDOWS};var e=typeof navigator=="object"?navigator:{},t=(/mac|win|linux/i.exec(e.platform)||["other"])[0].toLowerCase(),i=e.userAgent||"",r=e.appName||"";a.isWin=t=="win",a.isMac=t=="mac",a.isLinux=t=="linux",a.isIE=r=="Microsoft Internet Explorer"||r.indexOf("MSAppHost")>=0?parseFloat((i.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((i.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),a.isOldIE=a.isIE&&a.isIE<9,a.isGecko=a.isMozilla=i.match(/ Gecko\/\d+/),a.isOpera=typeof opera=="object"&&Object.prototype.toString.call(window.opera)=="[object Opera]",a.isWebKit=parseFloat(i.split("WebKit/")[1])||void 0,a.isChrome=parseFloat(i.split(" Chrome/")[1])||void 0,a.isSafari=parseFloat(i.split(" Safari/")[1])&&!a.isChrome||void 0,a.isEdge=parseFloat(i.split(" Edge/")[1])||void 0,a.isAIR=i.indexOf("AdobeAIR")>=0,a.isAndroid=i.indexOf("Android")>=0,a.isChromeOS=i.indexOf(" CrOS ")>=0,a.isIOS=/iPad|iPhone|iPod/.test(i)&&!window.MSStream,a.isIOS&&(a.isMac=!0),a.isMobile=a.isIOS||a.isAndroid})(be);(function(a){var e=be,t="http://www.w3.org/1999/xhtml";a.buildDom=function l(h,c,u){if(typeof h=="string"&&h){var g=document.createTextNode(h);return c&&c.appendChild(g),g}if(!Array.isArray(h))return h&&h.appendChild&&c&&c.appendChild(h),h;if(typeof h[0]!="string"||!h[0]){for(var w=[],d=0;d<h.length;d++){var m=l(h[d],c,u);m&&w.push(m)}return w}var f=document.createElement(h[0]),v=h[1],p=1;v&&typeof v=="object"&&!Array.isArray(v)&&(p=2);for(var d=p;d<h.length;d++)l(h[d],f,u);return p==2&&Object.keys(v).forEach(function($){var C=v[$];$==="class"?f.className=Array.isArray(C)?C.join(" "):C:typeof C=="function"||$=="value"||$[0]=="$"?f[$]=C:$==="ref"?u&&(u[C]=f):$==="style"?typeof C=="string"&&(f.style.cssText=C):C!=null&&f.setAttribute($,C)}),c&&c.appendChild(f),f},a.getDocumentHead=function(l){return l||(l=document),l.head||l.getElementsByTagName("head")[0]||l.documentElement},a.createElement=function(l,h){return document.createElementNS?document.createElementNS(h||t,l):document.createElement(l)},a.removeChildren=function(l){l.innerHTML=""},a.createTextNode=function(l,h){var c=h?h.ownerDocument:document;return c.createTextNode(l)},a.createFragment=function(l){var h=l?l.ownerDocument:document;return h.createDocumentFragment()},a.hasCssClass=function(l,h){var c=(l.className+"").split(/\s+/g);return c.indexOf(h)!==-1},a.addCssClass=function(l,h){a.hasCssClass(l,h)||(l.className+=" "+h)},a.removeCssClass=function(l,h){for(var c=l.className.split(/\s+/g);;){var u=c.indexOf(h);if(u==-1)break;c.splice(u,1)}l.className=c.join(" ")},a.toggleCssClass=function(l,h){for(var c=l.className.split(/\s+/g),u=!0;;){var g=c.indexOf(h);if(g==-1)break;u=!1,c.splice(g,1)}return u&&c.push(h),l.className=c.join(" "),u},a.setCssClass=function(l,h,c){c?a.addCssClass(l,h):a.removeCssClass(l,h)},a.hasCssString=function(l,h){var c=0,u;if(h=h||document,u=h.querySelectorAll("style")){for(;c<u.length;)if(u[c++].id===l)return!0}},a.removeElementById=function(l,h){h=h||document,h.getElementById(l)&&h.getElementById(l).remove()};var i,r=[];a.useStrictCSP=function(l){i=l,l==!1?s():r||(r=[])};function s(){var l=r;r=null,l&&l.forEach(function(h){n(h[0],h[1])})}function n(l,h,c){if(!(typeof document>"u")){if(r){if(c)s();else if(c===!1)return r.push([l,h])}if(!i){var u=c;!c||!c.getRootNode?u=document:(u=c.getRootNode(),(!u||u==c)&&(u=document));var g=u.ownerDocument||u;if(h&&a.hasCssString(h,u))return null;h&&(l+=`
/*# sourceURL=ace/css/`+h+" */");var w=a.createElement("style");w.appendChild(g.createTextNode(l)),h&&(w.id=h),u==g&&(u=a.getDocumentHead(g)),u.insertBefore(w,u.firstChild)}}}if(a.importCssString=n,a.importCssStylsheet=function(l,h){a.buildDom(["link",{rel:"stylesheet",href:l}],a.getDocumentHead(h))},a.scrollbarWidth=function(l){var h=a.createElement("ace_inner");h.style.width="100%",h.style.minWidth="0px",h.style.height="200px",h.style.display="block";var c=a.createElement("ace_outer"),u=c.style;u.position="absolute",u.left="-10000px",u.overflow="hidden",u.width="200px",u.minWidth="0px",u.height="150px",u.display="block",c.appendChild(h);var g=l&&l.documentElement||document&&document.documentElement;if(!g)return 0;g.appendChild(c);var w=h.offsetWidth;u.overflow="scroll";var d=h.offsetWidth;return w===d&&(d=c.clientWidth),g.removeChild(c),w-d},a.computedStyle=function(l,h){return window.getComputedStyle(l,"")||{}},a.setStyle=function(l,h,c){l[h]!==c&&(l[h]=c)},a.HAS_CSS_ANIMATION=!1,a.HAS_CSS_TRANSFORMS=!1,a.HI_DPI=e.isWin?typeof window<"u"&&window.devicePixelRatio>=1.5:!0,e.isChromeOS&&(a.HI_DPI=!1),typeof document<"u"){var o=document.createElement("div");a.HI_DPI&&o.style.transform!==void 0&&(a.HAS_CSS_TRANSFORMS=!0),!e.isEdge&&typeof o.style.animationName<"u"&&(a.HAS_CSS_ANIMATION=!0),o=null}a.HAS_CSS_TRANSFORMS?a.translate=function(l,h,c){l.style.transform="translate("+Math.round(h)+"px, "+Math.round(c)+"px)"}:a.translate=function(l,h,c){l.style.top=Math.round(c)+"px",l.style.left=Math.round(h)+"px"}})(ee);var ne={};let _t=class Oe{constructor(e,t,i,r){this.start={row:e,column:t},this.end={row:i,column:r}}isEqual(e){return this.start.row===e.start.row&&this.end.row===e.end.row&&this.start.column===e.start.column&&this.end.column===e.end.column}toString(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"}contains(e,t){return this.compare(e,t)==0}compareRange(e){var t,i=e.end,r=e.start;return t=this.compare(i.row,i.column),t==1?(t=this.compare(r.row,r.column),t==1?2:t==0?1:0):t==-1?-2:(t=this.compare(r.row,r.column),t==-1?-1:t==1?42:0)}comparePoint(e){return this.compare(e.row,e.column)}containsRange(e){return this.comparePoint(e.start)==0&&this.comparePoint(e.end)==0}intersects(e){var t=this.compareRange(e);return t==-1||t==0||t==1}isEnd(e,t){return this.end.row==e&&this.end.column==t}isStart(e,t){return this.start.row==e&&this.start.column==t}setStart(e,t){typeof e=="object"?(this.start.column=e.column,this.start.row=e.row):(this.start.row=e,this.start.column=t)}setEnd(e,t){typeof e=="object"?(this.end.column=e.column,this.end.row=e.row):(this.end.row=e,this.end.column=t)}inside(e,t){return this.compare(e,t)==0?!(this.isEnd(e,t)||this.isStart(e,t)):!1}insideStart(e,t){return this.compare(e,t)==0?!this.isEnd(e,t):!1}insideEnd(e,t){return this.compare(e,t)==0?!this.isStart(e,t):!1}compare(e,t){return!this.isMultiLine()&&e===this.start.row?t<this.start.column?-1:t>this.end.column?1:0:e<this.start.row?-1:e>this.end.row?1:this.start.row===e?t>=this.start.column?0:-1:this.end.row===e?t<=this.end.column?0:1:0}compareStart(e,t){return this.start.row==e&&this.start.column==t?-1:this.compare(e,t)}compareEnd(e,t){return this.end.row==e&&this.end.column==t?1:this.compare(e,t)}compareInside(e,t){return this.end.row==e&&this.end.column==t?1:this.start.row==e&&this.start.column==t?-1:this.compare(e,t)}clipRows(e,t){if(this.end.row>t)var i={row:t+1,column:0};else if(this.end.row<e)var i={row:e,column:0};if(this.start.row>t)var r={row:t+1,column:0};else if(this.start.row<e)var r={row:e,column:0};return Oe.fromPoints(r||this.start,i||this.end)}extend(e,t){var i=this.compare(e,t);if(i==0)return this;if(i==-1)var r={row:e,column:t};else var s={row:e,column:t};return Oe.fromPoints(r||this.start,s||this.end)}isEmpty(){return this.start.row===this.end.row&&this.start.column===this.end.column}isMultiLine(){return this.start.row!==this.end.row}clone(){return Oe.fromPoints(this.start,this.end)}collapseRows(){return this.end.column==0?new Oe(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new Oe(this.start.row,0,this.end.row,0)}toScreenRange(e){var t=e.documentToScreenPosition(this.start),i=e.documentToScreenPosition(this.end);return new Oe(t.row,t.column,i.row,i.column)}moveBy(e,t){this.start.row+=e,this.start.column+=t,this.end.row+=e,this.end.column+=t}};_t.fromPoints=function(a,e){return new _t(a.row,a.column,e.row,e.column)};_t.comparePoints=function(a,e){return a.row-e.row||a.column-e.column};ne.Range=_t;var wi={},ae={};(function(a){a.inherits=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})},a.mixin=function(e,t){for(var i in t)e[i]=t[i];return e},a.implement=function(e,t){a.mixin(e,t)}})(ae);var V={},$i={};$i.deepCopy=function a(e){if(typeof e!="object"||!e)return e;var t;if(Array.isArray(e)){t=[];for(let i=0;i<e.length;i++)t[i]=a(e[i]);return t}if(Object.prototype.toString.call(e)!=="[object Object]")return e;t={};for(let i in e)t[i]=a(e[i]);return t};V.last=function(a){return a[a.length-1]};V.stringReverse=function(a){return a.split("").reverse().join("")};V.stringRepeat=function(a,e){for(var t="";e>0;)e&1&&(t+=a),(e>>=1)&&(a+=a);return t};var En=/^\s\s*/,kn=/\s\s*$/;V.stringTrimLeft=function(a){return a.replace(En,"")};V.stringTrimRight=function(a){return a.replace(kn,"")};V.copyObject=function(a){var e={};for(var t in a)e[t]=a[t];return e};V.copyArray=function(a){for(var e=[],t=0,i=a.length;t<i;t++)a[t]&&typeof a[t]=="object"?e[t]=this.copyObject(a[t]):e[t]=a[t];return e};V.deepCopy=$i.deepCopy;V.arrayToMap=function(a){for(var e={},t=0;t<a.length;t++)e[a[t]]=1;return e};V.createMap=function(a){var e=Object.create(null);for(var t in a)e[t]=a[t];return e};V.arrayRemove=function(a,e){for(var t=0;t<=a.length;t++)e===a[t]&&a.splice(t,1)};V.escapeRegExp=function(a){return a.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")};V.escapeHTML=function(a){return(""+a).replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")};V.getMatchOffsets=function(a,e){var t=[];return a.replace(e,function(i){t.push({offset:arguments[arguments.length-2],length:i.length})}),t};V.deferredCall=function(a){var e=null,t=function(){e=null,a()},i=function(r){return i.cancel(),e=setTimeout(t,r||0),i};return i.schedule=i,i.call=function(){return this.cancel(),a(),i},i.cancel=function(){return clearTimeout(e),e=null,i},i.isPending=function(){return e},i};V.delayedCall=function(a,e){var t=null,i=function(){t=null,a()},r=function(s){t==null&&(t=setTimeout(i,s||e))};return r.delay=function(s){t&&clearTimeout(t),t=setTimeout(i,s||e)},r.schedule=r,r.call=function(){this.cancel(),a()},r.cancel=function(){t&&clearTimeout(t),t=null},r.isPending=function(){return t},r};V.supportsLookbehind=function(){try{new RegExp("(?<=.)")}catch{return!1}return!0};V.skipEmptyMatch=function(a,e,t){return t&&a.codePointAt(e)>65535?2:1};var yi={},pe={},He={};(function(a){for(var e=ae,t={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta",91:"MetaLeft",92:"MetaRight",93:"ContextMenu"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,super:8,meta:8,command:8,cmd:8,control:1},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete","-13":"NumpadEnter",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",59:";",61:"=",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*"}},i={Command:224,Backspace:8,Tab:9,Return:13,Enter:13,Pause:19,Escape:27,PageUp:33,PageDown:34,End:35,Home:36,Insert:45,Delete:46,ArrowLeft:37,ArrowUp:38,ArrowRight:39,ArrowDown:40,Backquote:192,Minus:189,Equal:187,BracketLeft:219,Backslash:220,BracketRight:221,Semicolon:186,Quote:222,Comma:188,Period:190,Slash:191,Space:32,NumpadAdd:107,NumpadDecimal:110,NumpadSubtract:109,NumpadDivide:111,NumpadMultiply:106},r=0;r<10;r++)i["Digit"+r]=48+r,i["Numpad"+r]=96+r,t.PRINTABLE_KEYS[48+r]=""+r,t.FUNCTION_KEYS[96+r]="Numpad"+r;for(var r=65;r<91;r++){var s=String.fromCharCode(r+32);i["Key"+s.toUpperCase()]=r,t.PRINTABLE_KEYS[r]=s}for(var r=1;r<13;r++)i["F"+r]=111+r,t.FUNCTION_KEYS[111+r]="F"+r;var n={Shift:16,Control:17,Alt:18,Meta:224};for(var o in n)i[o]=i[o+"Left"]=i[o+"Right"]=n[o];a.$codeToKeyCode=i,t.PRINTABLE_KEYS[173]="-";for(var l in t.FUNCTION_KEYS){var h=t.FUNCTION_KEYS[l].toLowerCase();t[h]=parseInt(l,10)}for(var l in t.PRINTABLE_KEYS){var h=t.PRINTABLE_KEYS[l].toLowerCase();t[h]=parseInt(l,10)}e.mixin(t,t.MODIFIER_KEYS),e.mixin(t,t.PRINTABLE_KEYS),e.mixin(t,t.FUNCTION_KEYS),t.enter=t.return,t.escape=t.esc,t.del=t.delete,function(){for(var c=["cmd","ctrl","alt","shift"],u=Math.pow(2,c.length);u--;)t.KEY_MODS[u]=c.filter(function(g){return u&t.KEY_MODS[g]}).join("-")+"-"}(),t.KEY_MODS[0]="",t.KEY_MODS[-1]="input-",e.mixin(a,t),a.default=a,a.keyCodeToString=function(c){var u=t[c];return typeof u!="string"&&(u=String.fromCharCode(c)),u.toLowerCase()}})(He);(function(a){var e=He,t=be,i=null,r=0,s;function n(){s=!1;try{document.createComment("").addEventListener("test",function(){},{get passive(){return s={passive:!1},!0}})}catch{}}function o(){return s==null&&n(),s}function l(m,f,v){this.elem=m,this.type=f,this.callback=v}l.prototype.destroy=function(){c(this.elem,this.type,this.callback),this.elem=this.type=this.callback=void 0};var h=a.addListener=function(m,f,v,p){m.addEventListener(f,v,o()),p&&p.$toDestroy.push(new l(m,f,v))},c=a.removeListener=function(m,f,v){m.removeEventListener(f,v,o())};a.stopEvent=function(m){return a.stopPropagation(m),a.preventDefault(m),!1},a.stopPropagation=function(m){m.stopPropagation&&m.stopPropagation()},a.preventDefault=function(m){m.preventDefault&&m.preventDefault()},a.getButton=function(m){return m.type=="dblclick"?0:m.type=="contextmenu"||t.isMac&&m.ctrlKey&&!m.altKey&&!m.shiftKey?2:m.button},a.capture=function(m,f,v){var p=m&&m.ownerDocument||document;function $(C){f&&f(C),v&&v(C),c(p,"mousemove",f),c(p,"mouseup",$),c(p,"dragstart",$)}return h(p,"mousemove",f),h(p,"mouseup",$),h(p,"dragstart",$),$},a.addMouseWheelListener=function(m,f,v){h(m,"wheel",function(p){var $=.15,C=p.deltaX||0,y=p.deltaY||0;switch(p.deltaMode){case p.DOM_DELTA_PIXEL:p.wheelX=C*$,p.wheelY=y*$;break;case p.DOM_DELTA_LINE:var S=15;p.wheelX=C*S,p.wheelY=y*S;break;case p.DOM_DELTA_PAGE:var M=150;p.wheelX=C*M,p.wheelY=y*M;break}f(p)},v)},a.addMultiMouseDownListener=function(m,f,v,p,$){var C=0,y,S,M,E={2:"dblclick",3:"tripleclick",4:"quadclick"};function R(L){if(a.getButton(L)!==0?C=0:L.detail>1?(C++,C>4&&(C=1)):C=1,t.isIE){var x=Math.abs(L.clientX-y)>5||Math.abs(L.clientY-S)>5;(!M||x)&&(C=1),M&&clearTimeout(M),M=setTimeout(function(){M=null},f[C-1]||600),C==1&&(y=L.clientX,S=L.clientY)}if(L._clicks=C,v[p]("mousedown",L),C>4)C=0;else if(C>1)return v[p](E[C],L)}Array.isArray(m)||(m=[m]),m.forEach(function(L){h(L,"mousedown",R,$)})};function u(m){return 0|(m.ctrlKey?1:0)|(m.altKey?2:0)|(m.shiftKey?4:0)|(m.metaKey?8:0)}a.getModifierString=function(m){return e.KEY_MODS[u(m)]};function g(m,f,v){var p=u(f);if(!v&&f.code&&(v=e.$codeToKeyCode[f.code]||v),!t.isMac&&i){if(f.getModifierState&&(f.getModifierState("OS")||f.getModifierState("Win"))&&(p|=8),i.altGr)if((3&p)!=3)i.altGr=0;else return;if(v===18||v===17){var $=f.location;if(v===17&&$===1)i[v]==1&&(r=f.timeStamp);else if(v===18&&p===3&&$===2){var C=f.timeStamp-r;C<50&&(i.altGr=!0)}}}if(v in e.MODIFIER_KEYS&&(v=-1),!(!p&&v===13&&f.location===3&&(m(f,p,-v),f.defaultPrevented))){if(t.isChromeOS&&p&8){if(m(f,p,v),f.defaultPrevented)return;p&=-9}return!p&&!(v in e.FUNCTION_KEYS)&&!(v in e.PRINTABLE_KEYS)?!1:m(f,p,v)}}a.addCommandKeyListener=function(m,f,v){var p=null;h(m,"keydown",function($){i[$.keyCode]=(i[$.keyCode]||0)+1;var C=g(f,$,$.keyCode);return p=$.defaultPrevented,C},v),h(m,"keypress",function($){p&&($.ctrlKey||$.altKey||$.shiftKey||$.metaKey)&&(a.stopEvent($),p=null)},v),h(m,"keyup",function($){i[$.keyCode]=null},v),i||(w(),h(window,"focus",w))};function w(){i=Object.create(null)}if(typeof window=="object"&&window.postMessage&&!t.isOldIE){var d=1;a.nextTick=function(m,f){f=f||window;var v="zero-timeout-message-"+d++,p=function($){$.data==v&&(a.stopPropagation($),c(f,"message",p),m())};h(f,"message",p),f.postMessage(v,"*")}}a.$idleBlocked=!1,a.onIdle=function(m,f){return setTimeout(function v(){a.$idleBlocked?setTimeout(v,100):m()},f)},a.$idleBlockId=null,a.blockIdle=function(m){a.$idleBlockId&&clearTimeout(a.$idleBlockId),a.$idleBlocked=!0,a.$idleBlockId=setTimeout(function(){a.$idleBlocked=!1},m||100)},a.nextFrame=typeof window=="object"&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),a.nextFrame?a.nextFrame=a.nextFrame.bind(window):a.nextFrame=function(m){setTimeout(m,17)}})(pe);var Nt={exports:{}},Ht={};/*
 * based on code from:
 *
 * @license RequireJS text 0.25.0 Copyright (c) 2010-2011, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/requirejs for details
 */var Rn=ee;Ht.get=function(a,e){var t=new XMLHttpRequest;t.open("GET",a,!0),t.onreadystatechange=function(){t.readyState===4&&e(t.responseText)},t.send(null)};Ht.loadScript=function(a,e){var t=Rn.getDocumentHead(),i=document.createElement("script");i.src=a,t.appendChild(i),i.onload=i.onreadystatechange=function(r,s){(s||!i.readyState||i.readyState=="loaded"||i.readyState=="complete")&&(i=i.onload=i.onreadystatechange=null,s||e())}};Ht.qualifyURL=function(a){var e=document.createElement("a");return e.href=a,e.href};var Lr={},fe={},ye={},In=function(){this.propagationStopped=!0},Dn=function(){this.defaultPrevented=!0};ye._emit=ye._dispatchEvent=function(a,e){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var t=this._eventRegistry[a]||[],i=this._defaultHandlers[a];if(!(!t.length&&!i)){(typeof e!="object"||!e)&&(e={}),e.type||(e.type=a),e.stopPropagation||(e.stopPropagation=In),e.preventDefault||(e.preventDefault=Dn),t=t.slice();for(var r=0;r<t.length&&(t[r](e,this),!e.propagationStopped);r++);if(i&&!e.defaultPrevented)return i(e,this)}};ye._signal=function(a,e){var t=(this._eventRegistry||{})[a];if(t){t=t.slice();for(var i=0;i<t.length;i++)t[i](e,this)}};ye.once=function(a,e){var t=this;if(this.on(a,function i(){t.off(a,i),e.apply(null,arguments)}),!e)return new Promise(function(i){e=i})};ye.setDefaultHandler=function(a,e){var t=this._defaultHandlers;if(t||(t=this._defaultHandlers={_disabled_:{}}),t[a]){var i=t[a],r=t._disabled_[a];r||(t._disabled_[a]=r=[]),r.push(i);var s=r.indexOf(e);s!=-1&&r.splice(s,1)}t[a]=e};ye.removeDefaultHandler=function(a,e){var t=this._defaultHandlers;if(t){var i=t._disabled_[a];if(t[a]==e)i&&this.setDefaultHandler(a,i.pop());else if(i){var r=i.indexOf(e);r!=-1&&i.splice(r,1)}}};ye.on=ye.addEventListener=function(a,e,t){this._eventRegistry=this._eventRegistry||{};var i=this._eventRegistry[a];return i||(i=this._eventRegistry[a]=[]),i.indexOf(e)==-1&&i[t?"unshift":"push"](e),e};ye.off=ye.removeListener=ye.removeEventListener=function(a,e){this._eventRegistry=this._eventRegistry||{};var t=this._eventRegistry[a];if(t){var i=t.indexOf(e);i!==-1&&t.splice(i,1)}};ye.removeAllListeners=function(a){a||(this._eventRegistry=this._defaultHandlers=void 0),this._eventRegistry&&(this._eventRegistry[a]=void 0),this._defaultHandlers&&(this._defaultHandlers[a]=void 0)};fe.EventEmitter=ye;var bi={};bi.reportError=function(e,t){var i=new Error(e);i.data=t,typeof console=="object"&&console.error&&console.error(i),setTimeout(function(){throw i})};var Tr={},_n={"autocomplete.popup.aria-roledescription":"Autocomplete suggestions","autocomplete.popup.aria-label":"Autocomplete suggestions","autocomplete.popup.item.aria-roledescription":"item","autocomplete.loading":"Loading...","editor.scroller.aria-roledescription":"editor","editor.scroller.aria-label":"Editor content, press Enter to start editing, press Escape to exit","editor.gutter.aria-roledescription":"editor","editor.gutter.aria-label":"Editor gutter, press Enter to interact with controls using arrow keys, press Escape to exit","error-marker.good-state":"Looks good!","prompt.recently-used":"Recently used","prompt.other-commands":"Other commands","prompt.no-matching-commands":"No matching commands","search-box.find.placeholder":"Search for","search-box.find-all.text":"All","search-box.replace.placeholder":"Replace with","search-box.replace-next.text":"Replace","search-box.replace-all.text":"All","search-box.toggle-replace.title":"Toggle Replace mode","search-box.toggle-regexp.title":"RegExp Search","search-box.toggle-case.title":"CaseSensitive Search","search-box.toggle-whole-word.title":"Whole Word Search","search-box.toggle-in-selection.title":"Search In Selection","search-box.search-counter":"$0 of $1","text-input.aria-roledescription":"editor","text-input.aria-label":"Cursor at row $0","gutter.code-folding.range.aria-label":"Toggle code folding, rows $0 through $1","gutter.code-folding.closed.aria-label":"Toggle code folding, rows $0 through $1","gutter.code-folding.open.aria-label":"Toggle code folding, row $0","gutter.code-folding.closed.title":"Unfold code","gutter.code-folding.open.title":"Fold code","gutter.annotation.aria-label.error":"Error, read annotations row $0","gutter.annotation.aria-label.warning":"Warning, read annotations row $0","gutter.annotation.aria-label.info":"Info, read annotations row $0","inline-fold.closed.title":"Unfold code","gutter-tooltip.aria-label.error.singular":"error","gutter-tooltip.aria-label.error.plural":"errors","gutter-tooltip.aria-label.warning.singular":"warning","gutter-tooltip.aria-label.warning.plural":"warnings","gutter-tooltip.aria-label.info.singular":"information message","gutter-tooltip.aria-label.info.plural":"information messages","gutter.annotation.aria-label.security":"Security finding, read annotations row $0","gutter.annotation.aria-label.hint":"Suggestion, read annotations row $0","gutter-tooltip.aria-label.security.singular":"security finding","gutter-tooltip.aria-label.security.plural":"security findings","gutter-tooltip.aria-label.hint.singular":"suggestion","gutter-tooltip.aria-label.hint.plural":"suggestions"};Tr.defaultEnglishMessages=_n;var xr=ae,Nn=fe.EventEmitter;const On=bi.reportError,Fn=Tr.defaultEnglishMessages;var Wn={setOptions:function(a){Object.keys(a).forEach(function(e){this.setOption(e,a[e])},this)},getOptions:function(a){var e={};if(a)Array.isArray(a)||(e=a,a=Object.keys(e));else{var t=this.$options;a=Object.keys(t).filter(function(i){return!t[i].hidden})}return a.forEach(function(i){e[i]=this.getOption(i)},this),e},setOption:function(a,e){if(this["$"+a]!==e){var t=this.$options[a];if(!t)return ct('misspelled option "'+a+'"');if(t.forwardTo)return this[t.forwardTo]&&this[t.forwardTo].setOption(a,e);t.handlesSet||(this["$"+a]=e),t&&t.set&&t.set.call(this,e)}},getOption:function(a){var e=this.$options[a];return e?e.forwardTo?this[e.forwardTo]&&this[e.forwardTo].getOption(a):e&&e.get?e.get.call(this):this["$"+a]:ct('misspelled option "'+a+'"')}};function ct(a){typeof console<"u"&&console.warn&&console.warn.apply(console,arguments)}var Ue,ft;class Bt{constructor(){this.$defaultOptions={},Ue=Fn,ft="dollarSigns"}defineOptions(e,t,i){return e.$options||(this.$defaultOptions[t]=e.$options={}),Object.keys(i).forEach(function(r){var s=i[r];typeof s=="string"&&(s={forwardTo:s}),s.name||(s.name=r),e.$options[s.name]=s,"initialValue"in s&&(e["$"+s.name]=s.initialValue)}),xr.implement(e,Wn),this}resetOptions(e){Object.keys(e.$options).forEach(function(t){var i=e.$options[t];"value"in i&&e.setOption(t,i.value)})}setDefaultValue(e,t,i){if(!e){for(e in this.$defaultOptions)if(this.$defaultOptions[e][t])break;if(!this.$defaultOptions[e][t])return!1}var r=this.$defaultOptions[e]||(this.$defaultOptions[e]={});r[t]&&(r.forwardTo?this.setDefaultValue(r.forwardTo,t,i):r[t].value=i)}setDefaultValues(e,t){Object.keys(t).forEach(function(i){this.setDefaultValue(e,i,t[i])},this)}setMessages(e,t){Ue=e,t&&t.placeholders&&(ft=t.placeholders)}nls(e,t,i){Ue[e]||(ct("No message found for the key '"+e+"' in the provided messages, trying to find a translation for the default string '"+t+"'."),Ue[t]||ct("No message found for the default string '"+t+"' in the provided messages. Falling back to the default English message."));var r=Ue[e]||Ue[t]||t;return i&&(ft==="dollarSigns"&&(r=r.replace(/\$(\$|[\d]+)/g,function(s,n){return n=="$"?"$":i[n]})),ft==="curlyBrackets"&&(r=r.replace(/\{([^\}]+)\}/g,function(s,n){return i[n]}))),r}}Bt.prototype.warn=ct;Bt.prototype.reportError=On;xr.implement(Bt.prototype,Nn);Lr.AppConfig=Bt;var Er={},Hn=`.ace-tm .ace_gutter {
  background: #f0f0f0;
  color: #333;
}

.ace-tm .ace_print-margin {
  width: 1px;
  background: #e8e8e8;
}

.ace-tm .ace_fold {
    background-color: #6B72E6;
}

.ace-tm {
  background-color: #FFFFFF;
  color: black;
}

.ace-tm .ace_cursor {
  color: black;
}
        
.ace-tm .ace_invisible {
  color: rgb(191, 191, 191);
}

.ace-tm .ace_storage,
.ace-tm .ace_keyword {
  color: blue;
}

.ace-tm .ace_constant {
  color: rgb(197, 6, 11);
}

.ace-tm .ace_constant.ace_buildin {
  color: rgb(88, 72, 246);
}

.ace-tm .ace_constant.ace_language {
  color: rgb(88, 92, 246);
}

.ace-tm .ace_constant.ace_library {
  color: rgb(6, 150, 14);
}

.ace-tm .ace_invalid {
  background-color: rgba(255, 0, 0, 0.1);
  color: red;
}

.ace-tm .ace_support.ace_function {
  color: rgb(60, 76, 114);
}

.ace-tm .ace_support.ace_constant {
  color: rgb(6, 150, 14);
}

.ace-tm .ace_support.ace_type,
.ace-tm .ace_support.ace_class {
  color: rgb(109, 121, 222);
}

.ace-tm .ace_keyword.ace_operator {
  color: rgb(104, 118, 135);
}

.ace-tm .ace_string {
  color: rgb(3, 106, 7);
}

.ace-tm .ace_comment {
  color: rgb(76, 136, 107);
}

.ace-tm .ace_comment.ace_doc {
  color: rgb(0, 102, 255);
}

.ace-tm .ace_comment.ace_doc.ace_tag {
  color: rgb(128, 159, 191);
}

.ace-tm .ace_constant.ace_numeric {
  color: rgb(0, 0, 205);
}

.ace-tm .ace_variable {
  color: rgb(49, 132, 149);
}

.ace-tm .ace_xml-pe {
  color: rgb(104, 104, 91);
}

.ace-tm .ace_entity.ace_name.ace_function {
  color: #0000A2;
}


.ace-tm .ace_heading {
  color: rgb(12, 7, 255);
}

.ace-tm .ace_list {
  color:rgb(185, 6, 144);
}

.ace-tm .ace_meta.ace_tag {
  color:rgb(0, 22, 142);
}

.ace-tm .ace_string.ace_regex {
  color: rgb(255, 0, 0)
}

.ace-tm .ace_marker-layer .ace_selection {
  background: rgb(181, 213, 255);
}
.ace-tm.ace_multiselect .ace_selection.ace_start {
  box-shadow: 0 0 3px 0px white;
}
.ace-tm .ace_marker-layer .ace_step {
  background: rgb(252, 255, 0);
}

.ace-tm .ace_marker-layer .ace_stack {
  background: rgb(164, 229, 101);
}

.ace-tm .ace_marker-layer .ace_bracket {
  margin: -1px 0 0 -1px;
  border: 1px solid rgb(192, 192, 192);
}

.ace-tm .ace_marker-layer .ace_active-line {
  background: rgba(0, 0, 0, 0.07);
}

.ace-tm .ace_gutter-active-line {
    background-color : #dcdcdc;
}

.ace-tm .ace_marker-layer .ace_selected-word {
  background: rgb(250, 250, 255);
  border: 1px solid rgb(200, 200, 250);
}

.ace-tm .ace_indent-guide {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;
}

.ace-tm .ace_indent-guide-active {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAZSURBVHjaYvj///9/hivKyv8BAAAA//8DACLqBhbvk+/eAAAAAElFTkSuQmCC") right repeat-y;
}
`;(function(a){a.isDark=!1,a.cssClass="ace-tm",a.cssText=Hn,a.$id="ace/theme/textmate";var e=ee;e.importCssString(a.cssText,a.cssClass,!1)})(Er);Nt.exports;(function(a,e){"no use strict";var t=V,i=Ht,r=ee,s=Lr.AppConfig;a.exports=e=new s;var n={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{},loadWorkerFromBlob:!0,sharedPopups:!1,useStrictCSP:null};e.get=function(c){if(!n.hasOwnProperty(c))throw new Error("Unknown config key: "+c);return n[c]},e.set=function(c,u){if(n.hasOwnProperty(c))n[c]=u;else if(this.setDefaultValue("",c,u)==!1)throw new Error("Unknown config key: "+c);c=="useStrictCSP"&&r.useStrictCSP(u)},e.all=function(){return t.copyObject(n)},e.$modes={},e.moduleUrl=function(c,u){if(n.$moduleUrls[c])return n.$moduleUrls[c];var g=c.split("/");u=u||g[g.length-2]||"";var w=u=="snippets"?"/":"-",d=g[g.length-1];if(u=="worker"&&w=="-"){var m=new RegExp("^"+u+"[\\-_]|[\\-_]"+u+"$","g");d=d.replace(m,"")}(!d||d==u)&&g.length>1&&(d=g[g.length-2]);var f=n[u+"Path"];return f==null?f=n.basePath:w=="/"&&(u=w=""),f&&f.slice(-1)!="/"&&(f+="/"),f+u+w+d+this.get("suffix")},e.setModuleUrl=function(c,u){return n.$moduleUrls[c]=u};var o=function(c,u){if(c==="ace/theme/textmate"||c==="./theme/textmate")return u(null,Er);if(l)return l(c,u);console.error("loader is not configured")},l;e.setLoader=function(c){l=c},e.dynamicModules=Object.create(null),e.$loading={},e.$loaded={},e.loadModule=function(c,u){var g;if(Array.isArray(c))var w=c[0],d=c[1];else if(typeof c=="string")var d=c;var m=function(f){if(f&&!e.$loading[d])return u&&u(f);if(e.$loading[d]||(e.$loading[d]=[]),e.$loading[d].push(u),!(e.$loading[d].length>1)){var v=function(){o(d,function(p,$){$&&(e.$loaded[d]=$),e._emit("load.module",{name:d,module:$});var C=e.$loading[d];e.$loading[d]=null,C.forEach(function(y){y&&y($)})})};if(!e.get("packaged"))return v();i.loadScript(e.moduleUrl(d,w),v),h()}};if(e.dynamicModules[d])e.dynamicModules[d]().then(function(f){f.default?m(f.default):m(f)});else{try{g=this.$require(d)}catch{}m(g||e.$loaded[d])}},e.$require=function(c){if(typeof a.require=="function"){var u="require";return a[u](c)}},e.setModuleLoader=function(c,u){e.dynamicModules[c]=u};var h=function(){!n.basePath&&!n.workerPath&&!n.modePath&&!n.themePath&&!Object.keys(n.$moduleUrls).length&&(console.error("Unable to infer path to ace from script src,","use ace.config.set('basePath', 'path') to enable dynamic loading of modes and themes","or with webpack use ace/webpack-resolver"),h=function(){})};e.version="1.36.5"})(Nt,Nt.exports);var we=Nt.exports,vt,kr={lineMode:!1,pasteCancelled:function(){return vt&&vt>Date.now()-50?!0:vt=!1},cancel:function(){vt=Date.now()}},te=pe,Hi=we.nls,Ae=be,Kt=ee,Bn=V,zn=kr,Pn=Ae.isChrome<18,Un=Ae.isIE,Vn=Ae.isChrome>63,Ze=400,Te=He,Yt=Te.KEY_MODS,at=Ae.isIOS,Gn=at?/\s/:/\n/,rt=Ae.isMobile,Rr;Rr=function(a,e){var t=Kt.createElement("textarea");t.className="ace_text-input",t.setAttribute("wrap","off"),t.setAttribute("autocorrect","off"),t.setAttribute("autocapitalize","off"),t.setAttribute("spellcheck","false"),t.style.opacity="0",a.insertBefore(t,a.firstChild);var i=!1,r=!1,s=!1,n=!1,o="";rt||(t.style.fontSize="1px");var l=!1,h=!1,c="",u=0,g=0,w=0,d=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER,f=0;try{var v=document.activeElement===t}catch{}this.setNumberOfExtraLines=function(A){if(d=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER,A<0){f=0;return}f=A},this.setAriaLabel=function(){var A="";if(e.$textInputAriaLabel&&(A+=`${e.$textInputAriaLabel}, `),e.session){var T=e.session.selection.cursor.row;A+=Hi("text-input.aria-label","Cursor at row $0",[T+1])}t.setAttribute("aria-label",A)},this.setAriaOptions=function(A){A.activeDescendant?(t.setAttribute("aria-haspopup","true"),t.setAttribute("aria-autocomplete",A.inline?"both":"list"),t.setAttribute("aria-activedescendant",A.activeDescendant)):(t.setAttribute("aria-haspopup","false"),t.setAttribute("aria-autocomplete","both"),t.removeAttribute("aria-activedescendant")),A.role&&t.setAttribute("role",A.role),A.setLabel&&(t.setAttribute("aria-roledescription",Hi("text-input.aria-roledescription","editor")),this.setAriaLabel())},this.setAriaOptions({role:"textbox"}),te.addListener(t,"blur",function(A){h||(e.onBlur(A),v=!1)},e),te.addListener(t,"focus",function(A){if(!h){if(v=!0,Ae.isEdge)try{if(!document.hasFocus())return}catch{}e.onFocus(A),Ae.isEdge?setTimeout($):$()}},e),this.$focusScroll=!1,this.focus=function(){if(this.setAriaOptions({setLabel:e.renderer.enableKeyboardAccessibility}),o||Vn||this.$focusScroll=="browser")return t.focus({preventScroll:!0});var A=t.style.top;t.style.position="fixed",t.style.top="0px";try{var T=t.getBoundingClientRect().top!=0}catch{return}var k=[];if(T)for(var O=t.parentElement;O&&O.nodeType==1;)k.push(O),O.setAttribute("ace_nocontext","true"),!O.parentElement&&O.getRootNode?O=O.getRootNode().host:O=O.parentElement;t.focus({preventScroll:!0}),T&&k.forEach(function(z){z.removeAttribute("ace_nocontext")}),setTimeout(function(){t.style.position="",t.style.top=="0px"&&(t.style.top=A)},0)},this.blur=function(){t.blur()},this.isFocused=function(){return v},e.on("beforeEndOperation",function(){var A=e.curOp,T=A&&A.command&&A.command.name;if(T!="insertstring"){var k=T&&(A.docChanged||A.selectionChanged);s&&k&&(c=t.value="",q()),$()}}),e.on("changeSelection",this.setAriaLabel);var p=function(A,T){for(var k=T,O=1;O<=A-d&&O<2*f+1;O++)k+=e.session.getLine(A-O).length+1;return k},$=at?function(A){if(!(!v||i&&!A||n)){A||(A="");var T=`
 ab`+A+`cde fg
`;T!=t.value&&(t.value=c=T);var k=4,O=4+(A.length||(e.selection.isEmpty()?0:1));(u!=k||g!=O)&&t.setSelectionRange(k,O),u=k,g=O}}:function(){if(!(s||n)&&!(!v&&!M)){s=!0;var A=0,T=0,k="";if(e.session){var O=e.selection,z=O.getRange(),j=O.cursor.row;j===m+1?(d=m+1,m=d+2*f):j===d-1?(m=d-1,d=m-2*f):(j<d-1||j>m+1)&&(d=j>f?j-f:0,m=j>f?j+f:2*f);for(var B=[],P=d;P<=m;P++)B.push(e.session.getLine(P));if(k=B.join(`
`),A=p(z.start.row,z.start.column),T=p(z.end.row,z.end.column),z.start.row<d){var J=e.session.getLine(d-1);A=z.start.row<d-1?0:A,T+=J.length+1,k=J+`
`+k}else if(z.end.row>m){var U=e.session.getLine(m+1);T=z.end.row>m+1?U.length:z.end.column,T+=k.length+1,k=k+`
`+U}else rt&&j>0&&(k=`
`+k,T+=1,A+=1);k.length>Ze&&(A<Ze&&T<Ze?k=k.slice(0,Ze):(k=`
`,A==T?A=T=0:(A=0,T=1)));var ve=k+`

`;ve!=c&&(t.value=c=ve,u=g=ve.length)}if(M&&(u=t.selectionStart,g=t.selectionEnd),g!=T||u!=A||t.selectionEnd!=g)try{t.setSelectionRange(A,T),u=A,g=T}catch{}s=!1}};this.resetSelection=$,v&&e.onFocus();var C=function(A){return A.selectionStart===0&&A.selectionEnd>=c.length&&A.value===c&&c&&A.selectionEnd!==g},y=function(A){s||(i?i=!1:C(t)?(e.selectAll(),$()):rt&&t.selectionStart!=u&&$())},S=null;this.setInputHandler=function(A){S=A},this.getInputHandler=function(){return S};var M=!1,E=function(A,T){if(M&&(M=!1),r)return $(),A&&e.onPaste(A),r=!1,"";for(var k=t.selectionStart,O=t.selectionEnd,z=u,j=c.length-g,B=A,P=A.length-k,J=A.length-O,U=0;z>0&&c[U]==A[U];)U++,z--;for(B=B.slice(U),U=1;j>0&&c.length-U>u-1&&c[c.length-U]==A[A.length-U];)U++,j--;P-=U-1,J-=U-1;var ve=B.length-U+1;if(ve<0&&(z=-ve,ve=0),B=B.slice(0,ve),!T&&!B&&!P&&!z&&!j&&!J)return"";n=!0;var Qe=!1;return Ae.isAndroid&&B==". "&&(B="  ",Qe=!0),B&&!z&&!j&&!P&&!J||l?e.onTextInput(B):e.onTextInput(B,{extendLeft:z,extendRight:j,restoreStart:P,restoreEnd:J}),n=!1,c=A,u=k,g=O,w=J,Qe?`
`:B},R=function(A){if(s)return K();if(A&&A.inputType){if(A.inputType=="historyUndo")return e.execCommand("undo");if(A.inputType=="historyRedo")return e.execCommand("redo")}var T=t.value,k=E(T,!0);(T.length>Ze+100||Gn.test(k)||rt&&u<1&&u==g)&&$()},L=function(A,T,k){var O=A.clipboardData||window.clipboardData;if(!(!O||Pn)){var z=Un||k?"Text":"text/plain";try{return T?O.setData(z,T)!==!1:O.getData(z)}catch(j){if(!k)return L(j,T,!0)}}},x=function(A,T){var k=e.getCopyText();if(!k)return te.preventDefault(A);L(A,k)?(at&&($(k),i=k,setTimeout(function(){i=!1},10)),T?e.onCut():e.onCopy(),te.preventDefault(A)):(i=!0,t.value=k,t.select(),setTimeout(function(){i=!1,$(),T?e.onCut():e.onCopy()}))},b=function(A){x(A,!0)},H=function(A){x(A,!1)},G=function(A){var T=L(A);zn.pasteCancelled()||(typeof T=="string"?(T&&e.onPaste(T,A),Ae.isIE&&setTimeout($),te.preventDefault(A)):(t.value="",r=!0))};te.addCommandKeyListener(t,function(A,T,k){if(!s)return e.onCommandKey(A,T,k)},e),te.addListener(t,"select",y,e),te.addListener(t,"input",R,e),te.addListener(t,"cut",b,e),te.addListener(t,"copy",H,e),te.addListener(t,"paste",G,e),(!("oncut"in t)||!("oncopy"in t)||!("onpaste"in t))&&te.addListener(a,"keydown",function(A){if(!(Ae.isMac&&!A.metaKey||!A.ctrlKey))switch(A.keyCode){case 67:H(A);break;case 86:G(A);break;case 88:b(A);break}},e);var N=function(A){if(!(s||!e.onCompositionStart||e.$readOnly)&&(s={},!l)){A.data&&(s.useTextareaForIME=!1),setTimeout(K,0),e._signal("compositionStart"),e.on("mousedown",ie);var T=e.getSelectionRange();T.end.row=T.start.row,T.end.column=T.start.column,s.markerRange=T,s.selectionStart=u,e.onCompositionStart(s),s.useTextareaForIME?(c=t.value="",u=0,g=0):(t.msGetInputContext&&(s.context=t.msGetInputContext()),t.getInputContext&&(s.context=t.getInputContext()))}},K=function(){if(!(!s||!e.onCompositionUpdate||e.$readOnly)){if(l)return ie();if(s.useTextareaForIME)e.onCompositionUpdate(t.value);else{var A=t.value;E(A),s.markerRange&&(s.context&&(s.markerRange.start.column=s.selectionStart=s.context.compositionStartOffset),s.markerRange.end.column=s.markerRange.start.column+g-s.selectionStart+w)}}},q=function(A){!e.onCompositionEnd||e.$readOnly||(s=!1,e.onCompositionEnd(),e.off("mousedown",ie),A&&R())};function ie(){h=!0,t.blur(),t.focus(),h=!1}var F=Bn.delayedCall(K,50).schedule.bind(null,null);function D(A){A.keyCode==27&&t.value.length<t.selectionStart&&(s||(c=t.value),u=g=-1,$()),F()}te.addListener(t,"compositionstart",N,e),te.addListener(t,"compositionupdate",K,e),te.addListener(t,"keyup",D,e),te.addListener(t,"keydown",F,e),te.addListener(t,"compositionend",q,e),this.getElement=function(){return t},this.setCommandMode=function(A){l=A,t.readOnly=!1},this.setReadOnly=function(A){l||(t.readOnly=A)},this.setCopyWithEmptySelection=function(A){},this.onContextMenu=function(A){M=!0,$(),e._emit("nativecontextmenu",{target:e,domEvent:A}),this.moveToMouse(A,!0)},this.moveToMouse=function(A,T){o||(o=t.style.cssText),t.style.cssText=(T?"z-index:100000;":"")+(Ae.isIE?"opacity:0.1;":"")+"text-indent: -"+(u+g)*e.renderer.characterWidth*.5+"px;";var k=e.container.getBoundingClientRect(),O=Kt.computedStyle(e.container),z=k.top+(parseInt(O.borderTopWidth)||0),j=k.left+(parseInt(k.borderLeftWidth)||0),B=k.bottom-z-t.clientHeight-2,P=function(J){Kt.translate(t,J.clientX-j-2,Math.min(J.clientY-z-2,B))};P(A),A.type=="mousedown"&&(e.renderer.$isMousePressed=!0,clearTimeout(W),Ae.isWin&&te.capture(e.container,P,I))},this.onContextMenuClose=I;var W;function I(){clearTimeout(W),W=setTimeout(function(){o&&(t.style.cssText=o,o=""),e.renderer.$isMousePressed=!1,e.renderer.$keepTextAreaAtCursor&&e.renderer.$moveTextAreaToCursor()},0)}var Y=function(A){e.textInput.onContextMenu(A),I()};te.addListener(t,"mouseup",Y,e),te.addListener(t,"mousedown",function(A){A.preventDefault(),I()},e),te.addListener(e.renderer.scroller,"contextmenu",Y,e),te.addListener(t,"contextmenu",Y,e),at&&Z(a,e,t);function Z(A,T,k){var O=null,z=!1;k.addEventListener("keydown",function(B){O&&clearTimeout(O),z=!0},!0),k.addEventListener("keyup",function(B){O=setTimeout(function(){z=!1},100)},!0);var j=function(B){if(document.activeElement===k&&!(z||s||T.$mouseHandler.isMousePressed)&&!i){var P=k.selectionStart,J=k.selectionEnd,U=null,ve=0;if(P==0?U=Te.up:P==1?U=Te.home:J>g&&c[J]==`
`?U=Te.end:P<u&&c[P-1]==" "?(U=Te.left,ve=Yt.option):P<u||P==u&&g!=u&&P==J?U=Te.left:J>g&&c.slice(0,J).split(`
`).length>2?U=Te.down:J>g&&c[J-1]==" "?(U=Te.right,ve=Yt.option):(J>g||J==g&&g!=u&&P==J)&&(U=Te.right),P!==J&&(ve|=Yt.shift),U){var Qe=T.onCommandKey({},ve,U);if(!Qe&&T.commands){U=Te.keyCodeToString(U);var Wi=T.commands.findKeyCommand(ve,U);Wi&&T.execCommand(Wi)}u=P,g=J,$("")}}};document.addEventListener("selectionchange",j),T.on("destroy",function(){document.removeEventListener("selectionchange",j)})}this.destroy=function(){t.parentElement&&t.parentElement.removeChild(t)}};yi.TextInput=Rr;yi.$setUserAgentForTests=function(a,e){rt=a,at=e};var Ir={},Dr={},jn=be,Kn=0,Bi=550;let We=class{constructor(e){e.$clickSelection=null;var t=e.editor;t.setDefaultHandler("mousedown",this.onMouseDown.bind(e)),t.setDefaultHandler("dblclick",this.onDoubleClick.bind(e)),t.setDefaultHandler("tripleclick",this.onTripleClick.bind(e)),t.setDefaultHandler("quadclick",this.onQuadClick.bind(e)),t.setDefaultHandler("mousewheel",this.onMouseWheel.bind(e));var i=["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"];i.forEach(function(r){e[r]=this[r]},this),e.selectByLines=this.extendSelectionBy.bind(e,"getLineRange"),e.selectByWords=this.extendSelectionBy.bind(e,"getWordRange")}onMouseDown(e){var t=e.inSelection(),i=e.getDocumentPosition();this.mousedownEvent=e;var r=this.editor,s=e.getButton();if(s!==0){var n=r.getSelectionRange(),o=n.isEmpty();(o||s==1)&&r.selection.moveToPosition(i),s==2&&(r.textInput.onContextMenu(e.domEvent),jn.isMozilla||e.preventDefault());return}if(this.mousedownEvent.time=Date.now(),t&&!r.isFocused()&&(r.focus(),this.$focusTimeout&&!this.$clickSelection&&!r.inMultiSelectMode)){this.setState("focusWait"),this.captureMouse(e);return}return this.captureMouse(e),this.startSelect(i,e.domEvent._clicks>1),e.preventDefault()}startSelect(e,t){e=e||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var i=this.editor;this.mousedownEvent&&(this.mousedownEvent.getShiftKey()?i.selection.selectToPosition(e):t||i.selection.moveToPosition(e),t||this.select(),i.setStyle("ace_selecting"),this.setState("select"))}select(){var e,t=this.editor,i=t.renderer.screenToTextCoordinates(this.x,this.y);if(this.$clickSelection){var r=this.$clickSelection.comparePoint(i);if(r==-1)e=this.$clickSelection.end;else if(r==1)e=this.$clickSelection.start;else{var s=zi(this.$clickSelection,i);i=s.cursor,e=s.anchor}t.selection.setSelectionAnchor(e.row,e.column)}t.selection.selectToPosition(i),t.renderer.scrollCursorIntoView()}extendSelectionBy(e){var t,i=this.editor,r=i.renderer.screenToTextCoordinates(this.x,this.y),s=i.selection[e](r.row,r.column);if(this.$clickSelection){var n=this.$clickSelection.comparePoint(s.start),o=this.$clickSelection.comparePoint(s.end);if(n==-1&&o<=0)t=this.$clickSelection.end,(s.end.row!=r.row||s.end.column!=r.column)&&(r=s.start);else if(o==1&&n>=0)t=this.$clickSelection.start,(s.start.row!=r.row||s.start.column!=r.column)&&(r=s.end);else if(n==-1&&o==1)r=s.end,t=s.start;else{var l=zi(this.$clickSelection,r);r=l.cursor,t=l.anchor}i.selection.setSelectionAnchor(t.row,t.column)}i.selection.selectToPosition(r),i.renderer.scrollCursorIntoView()}selectByLinesEnd(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting")}focusWait(){var e=Yn(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y),t=Date.now();(e>Kn||t-this.mousedownEvent.time>this.$focusTimeout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())}onDoubleClick(e){var t=e.getDocumentPosition(),i=this.editor,r=i.session,s=r.getBracketRange(t);s?(s.isEmpty()&&(s.start.column--,s.end.column++),this.setState("select")):(s=i.selection.getWordRange(t.row,t.column),this.setState("selectByWords")),this.$clickSelection=s,this.select()}onTripleClick(e){var t=e.getDocumentPosition(),i=this.editor;this.setState("selectByLines");var r=i.getSelectionRange();r.isMultiLine()&&r.contains(t.row,t.column)?(this.$clickSelection=i.selection.getLineRange(r.start.row),this.$clickSelection.end=i.selection.getLineRange(r.end.row).end):this.$clickSelection=i.selection.getLineRange(t.row),this.select()}onQuadClick(e){var t=this.editor;t.selectAll(),this.$clickSelection=t.getSelectionRange(),this.setState("selectAll")}onMouseWheel(e){if(!e.getAccelKey()){e.getShiftKey()&&e.wheelY&&!e.wheelX&&(e.wheelX=e.wheelY,e.wheelY=0);var t=this.editor;this.$lastScroll||(this.$lastScroll={t:0,vx:0,vy:0,allowed:0});var i=this.$lastScroll,r=e.domEvent.timeStamp,s=r-i.t,n=s?e.wheelX/s:i.vx,o=s?e.wheelY/s:i.vy;s<Bi&&(n=(n+i.vx)/2,o=(o+i.vy)/2);var l=Math.abs(n/o),h=!1;if(l>=1&&t.renderer.isScrollableBy(e.wheelX*e.speed,0)&&(h=!0),l<=1&&t.renderer.isScrollableBy(0,e.wheelY*e.speed)&&(h=!0),h)i.allowed=r;else if(r-i.allowed<Bi){var c=Math.abs(n)<=1.5*Math.abs(i.vx)&&Math.abs(o)<=1.5*Math.abs(i.vy);c?(h=!0,i.allowed=r):i.allowed=0}if(i.t=r,i.vx=n,i.vy=o,h)return t.renderer.scrollBy(e.wheelX*e.speed,e.wheelY*e.speed),e.stop()}}};We.prototype.selectEnd=We.prototype.selectByLinesEnd;We.prototype.selectAllEnd=We.prototype.selectByLinesEnd;We.prototype.selectByWordsEnd=We.prototype.selectByLinesEnd;Dr.DefaultHandlers=We;function Yn(a,e,t,i){return Math.sqrt(Math.pow(t-a,2)+Math.pow(i-e,2))}function zi(a,e){if(a.start.row==a.end.row)var t=2*e.column-a.start.column-a.end.column;else if(a.start.row==a.end.row-1&&!a.start.column&&!a.end.column)var t=e.column-4;else var t=2*e.row-a.start.row-a.end.row;return t<0?{cursor:a.start,anchor:a.end}:{cursor:a.end,anchor:a.start}}var zt={},Pt={},_r={};_r.preventParentScroll=function(e){e.stopPropagation();var t=e.currentTarget,i=t.scrollHeight>t.clientHeight;i||e.preventDefault()};var Pi=ee,Qn=ne.Range,Zn=_r.preventParentScroll,Qt="ace_tooltip";let Nr=class{constructor(e){this.isOpen=!1,this.$element=null,this.$parentNode=e}$init(){return this.$element=Pi.createElement("div"),this.$element.className=Qt,this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element}getElement(){return this.$element||this.$init()}setText(e){this.getElement().textContent=e}setHtml(e){this.getElement().innerHTML=e}setPosition(e,t){this.getElement().style.left=e+"px",this.getElement().style.top=t+"px"}setClassName(e){Pi.addCssClass(this.getElement(),e)}setTheme(e){this.$element.className=Qt+" "+(e.isDark?"ace_dark ":"")+(e.cssClass||"")}show(e,t,i){e!=null&&this.setText(e),t!=null&&i!=null&&this.setPosition(t,i),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)}hide(e){this.isOpen&&(this.getElement().style.display="none",this.getElement().className=Qt,this.isOpen=!1)}getHeight(){return this.getElement().offsetHeight}getWidth(){return this.getElement().offsetWidth}destroy(){this.isOpen=!1,this.$element&&this.$element.parentNode&&this.$element.parentNode.removeChild(this.$element)}};class Xn{constructor(){this.popups=[]}addPopup(e){this.popups.push(e),this.updatePopups()}removePopup(e){const t=this.popups.indexOf(e);t!==-1&&(this.popups.splice(t,1),this.updatePopups())}updatePopups(){this.popups.sort((t,i)=>i.priority-t.priority);let e=[];for(let t of this.popups){let i=!0;for(let r of e)if(this.doPopupsOverlap(r,t)){i=!1;break}i?e.push(t):t.hide()}}doPopupsOverlap(e,t){const i=e.getElement().getBoundingClientRect(),r=t.getElement().getBoundingClientRect();return i.left<r.right&&i.right>r.left&&i.top<r.bottom&&i.bottom>r.top}}var ci=new Xn;Pt.popupManager=ci;Pt.Tooltip=Nr;class Jn extends Nr{constructor(e=document.body){super(e),this.timeout=void 0,this.lastT=0,this.idleTime=350,this.lastEvent=void 0,this.onMouseOut=this.onMouseOut.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.waitForHover=this.waitForHover.bind(this),this.hide=this.hide.bind(this);var t=this.getElement();t.style.whiteSpace="pre-wrap",t.style.pointerEvents="auto",t.addEventListener("mouseout",this.onMouseOut),t.tabIndex=-1,t.addEventListener("blur",(function(){t.contains(document.activeElement)||this.hide()}).bind(this)),t.addEventListener("wheel",Zn)}addToEditor(e){e.on("mousemove",this.onMouseMove),e.on("mousedown",this.hide),e.renderer.getMouseEventTarget().addEventListener("mouseout",this.onMouseOut,!0)}removeFromEditor(e){e.off("mousemove",this.onMouseMove),e.off("mousedown",this.hide),e.renderer.getMouseEventTarget().removeEventListener("mouseout",this.onMouseOut,!0),this.timeout&&(clearTimeout(this.timeout),this.timeout=null)}onMouseMove(e,t){this.lastEvent=e,this.lastT=Date.now();var i=t.$mouseHandler.isMousePressed;if(this.isOpen){var r=this.lastEvent&&this.lastEvent.getDocumentPosition();(!this.range||!this.range.contains(r.row,r.column)||i||this.isOutsideOfText(this.lastEvent))&&this.hide()}this.timeout||i||(this.lastEvent=e,this.timeout=setTimeout(this.waitForHover,this.idleTime))}waitForHover(){this.timeout&&clearTimeout(this.timeout);var e=Date.now()-this.lastT;if(this.idleTime-e>10){this.timeout=setTimeout(this.waitForHover,this.idleTime-e);return}this.timeout=null,this.lastEvent&&!this.isOutsideOfText(this.lastEvent)&&this.$gatherData(this.lastEvent,this.lastEvent.editor)}isOutsideOfText(e){var t=e.editor,i=e.getDocumentPosition(),r=t.session.getLine(i.row);if(i.column==r.length){var s=t.renderer.pixelToScreenCoordinates(e.clientX,e.clientY),n=t.session.documentToScreenPosition(i.row,i.column);if(n.column!=s.column||n.row!=s.row)return!0}return!1}setDataProvider(e){this.$gatherData=e}showForRange(e,t,i,r){var s=10;if(r&&r!=this.lastEvent||this.isOpen&&document.activeElement==this.getElement())return;var n=e.renderer;this.isOpen||(ci.addPopup(this),this.$registerCloseEvents(),this.setTheme(n.theme)),this.isOpen=!0,this.addMarker(t,e.session),this.range=Qn.fromPoints(t.start,t.end);var o=n.textToScreenCoordinates(t.start.row,t.start.column),l=n.scroller.getBoundingClientRect();o.pageX<l.left&&(o.pageX=l.left);var h=this.getElement();h.innerHTML="",h.appendChild(i),h.style.maxHeight="",h.style.display="block";var c=h.clientHeight,u=h.clientWidth,g=window.innerHeight-o.pageY-n.lineHeight;let w=!0;o.pageY-c<0&&o.pageY<g&&(w=!1),h.style.maxHeight=(w?o.pageY:g)-s+"px",h.style.top=w?"":o.pageY+n.lineHeight+"px",h.style.bottom=w?window.innerHeight-o.pageY+"px":"",h.style.left=Math.min(o.pageX,window.innerWidth-u-s)+"px"}addMarker(e,t){this.marker&&this.$markerSession.removeMarker(this.marker),this.$markerSession=t,this.marker=t&&t.addMarker(e,"ace_highlight-marker","text")}hide(e){!e&&document.activeElement==this.getElement()||e&&e.target&&(e.type!="keydown"||e.ctrlKey||e.metaKey)&&this.$element.contains(e.target)||(this.lastEvent=null,this.timeout&&clearTimeout(this.timeout),this.timeout=null,this.addMarker(null),this.isOpen&&(this.$removeCloseEvents(),this.getElement().style.display="none",this.isOpen=!1,ci.removePopup(this)))}$registerCloseEvents(){window.addEventListener("keydown",this.hide,!0),window.addEventListener("wheel",this.hide,!0),window.addEventListener("mousedown",this.hide,!0)}$removeCloseEvents(){window.removeEventListener("keydown",this.hide,!0),window.removeEventListener("wheel",this.hide,!0),window.removeEventListener("mousedown",this.hide,!0)}onMouseOut(e){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.lastEvent=null,this.isOpen&&(!e.relatedTarget||this.getElement().contains(e.relatedTarget)||e&&e.currentTarget.contains(e.relatedTarget)||e.relatedTarget.classList.contains("ace_content")||this.hide())}}Pt.HoverTooltip=Jn;var Fe=ee,qn=pe,Ui=Pt.Tooltip,Le=we.nls;function es(a){var e=a.editor,t=e.renderer.$gutterLayer,i=new Or(e);a.editor.setDefaultHandler("guttermousedown",function(h){if(!(!e.isFocused()||h.getButton()!=0)){var c=t.getRegion(h);if(c!="foldWidgets"){var u=h.getDocumentPosition().row,g=e.session.selection;if(h.getShiftKey())g.selectTo(u,0);else{if(h.domEvent.detail==2)return e.selectAll(),h.preventDefault();a.$clickSelection=e.selection.getLineRange(u)}return a.setState("selectByLines"),a.captureMouse(h),h.preventDefault()}}});var r,s;function n(){var h=s.getDocumentPosition().row,c=e.session.getLength();if(h==c){var u=e.renderer.pixelToScreenCoordinates(0,s.y).row,g=s.$pos;if(u>e.session.documentToScreenRow(g.row,g.column))return o()}if(i.showTooltip(h),!!i.isOpen)if(e.on("mousewheel",o),a.$tooltipFollowsMouse)l(s);else{var w=s.getGutterRow(),d=t.$lines.get(w);if(d){var m=d.element.querySelector(".ace_gutter_annotation"),f=m.getBoundingClientRect(),v=i.getElement().style;v.left=f.right+"px",v.top=f.bottom+"px"}else l(s)}}function o(){r&&(r=clearTimeout(r)),i.isOpen&&(i.hideTooltip(),e.off("mousewheel",o))}function l(h){i.setPosition(h.x,h.y)}a.editor.setDefaultHandler("guttermousemove",function(h){var c=h.domEvent.target||h.domEvent.srcElement;if(Fe.hasCssClass(c,"ace_fold-widget"))return o();i.isOpen&&a.$tooltipFollowsMouse&&l(h),s=h,!r&&(r=setTimeout(function(){r=null,s&&!a.isMousePressed?n():o()},50))}),qn.addListener(e.renderer.$gutter,"mouseout",function(h){s=null,!(!i.isOpen||r)&&(r=setTimeout(function(){r=null,o()},50))},e),e.on("changeSession",o),e.on("input",o)}zt.GutterHandler=es;let Or=class nt extends Ui{constructor(e){super(e.container),this.editor=e}setPosition(e,t){var i=window.innerWidth||document.documentElement.clientWidth,r=window.innerHeight||document.documentElement.clientHeight,s=this.getWidth(),n=this.getHeight();e+=15,t+=15,e+s>i&&(e-=e+s-i),t+n>r&&(t-=20+n),Ui.prototype.setPosition.call(this,e,t)}static get annotationLabels(){return{error:{singular:Le("gutter-tooltip.aria-label.error.singular","error"),plural:Le("gutter-tooltip.aria-label.error.plural","errors")},security:{singular:Le("gutter-tooltip.aria-label.security.singular","security finding"),plural:Le("gutter-tooltip.aria-label.security.plural","security findings")},warning:{singular:Le("gutter-tooltip.aria-label.warning.singular","warning"),plural:Le("gutter-tooltip.aria-label.warning.plural","warnings")},info:{singular:Le("gutter-tooltip.aria-label.info.singular","information message"),plural:Le("gutter-tooltip.aria-label.info.plural","information messages")},hint:{singular:Le("gutter-tooltip.aria-label.hint.singular","suggestion"),plural:Le("gutter-tooltip.aria-label.hint.plural","suggestions")}}}showTooltip(e){var t=this.editor.renderer.$gutterLayer,i=t.$annotations[e],r;i?r={displayText:Array.from(i.displayText),type:Array.from(i.type)}:r={displayText:[],type:[]};var s=t.session.getFoldLine(e);if(s&&t.$showFoldedAnnotations){var n={error:[],security:[],warning:[],info:[],hint:[]},o={error:1,security:2,warning:3,info:4,hint:5},l;for(let v=e+1;v<=s.end.row;v++)if(t.$annotations[v])for(var h=0;h<t.$annotations[v].text.length;h++){var c=t.$annotations[v].type[h];n[c].push(t.$annotations[v].text[h]),(!l||o[c]<o[l])&&(l=c)}if(["error","security","warning"].includes(l)){var u=`${nt.annotationsToSummaryString(n)} in folded code.`;r.displayText.push(u),r.type.push(l+"_fold")}}if(r.displayText.length===0)return this.hide();var g={error:[],security:[],warning:[],info:[],hint:[]},w=t.$useSvgGutterIcons?"ace_icon_svg":"ace_icon";for(let v=0;v<r.displayText.length;v++){var d=Fe.createElement("span"),m=Fe.createElement("span");m.classList.add(`ace_${r.type[v]}`,w),m.setAttribute("aria-label",`${nt.annotationLabels[r.type[v].replace("_fold","")].singular}`),m.setAttribute("role","img"),m.appendChild(Fe.createTextNode(" ")),d.appendChild(m),d.appendChild(Fe.createTextNode(r.displayText[v])),d.appendChild(Fe.createElement("br")),g[r.type[v].replace("_fold","")].push(d)}var f=this.getElement();Fe.removeChildren(f),g.error.forEach(v=>f.appendChild(v)),g.security.forEach(v=>f.appendChild(v)),g.warning.forEach(v=>f.appendChild(v)),g.info.forEach(v=>f.appendChild(v)),g.hint.forEach(v=>f.appendChild(v)),f.setAttribute("aria-live","polite"),this.isOpen||(this.setTheme(this.editor.renderer.theme),this.setClassName("ace_gutter-tooltip")),this.show(),this.editor._signal("showGutterTooltip",this)}hideTooltip(){this.$element.removeAttribute("aria-live"),this.hide(),this.editor._signal("hideGutterTooltip",this)}static annotationsToSummaryString(e){const t=[],i=["error","security","warning","info","hint"];for(const r of i){if(!e[r].length)continue;const s=e[r].length===1?nt.annotationLabels[r].singular:nt.annotationLabels[r].plural;t.push(`${e[r].length} ${s}`)}return t.join(", ")}};zt.GutterTooltip=Or;var Ut={},Zt=pe,ts=be;let is=class{constructor(e,t){this.speed,this.wheelX,this.wheelY,this.domEvent=e,this.editor=t,this.x=this.clientX=e.clientX,this.y=this.clientY=e.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1}stopPropagation(){Zt.stopPropagation(this.domEvent),this.propagationStopped=!0}preventDefault(){Zt.preventDefault(this.domEvent),this.defaultPrevented=!0}stop(){this.stopPropagation(),this.preventDefault()}getDocumentPosition(){return this.$pos?this.$pos:(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),this.$pos)}getGutterRow(){var e=this.getDocumentPosition().row,t=this.editor.session.documentToScreenRow(e,0),i=this.editor.session.documentToScreenRow(this.editor.renderer.$gutterLayer.$lines.get(0).row,0);return t-i}inSelection(){if(this.$inSelection!==null)return this.$inSelection;var e=this.editor,t=e.getSelectionRange();if(t.isEmpty())this.$inSelection=!1;else{var i=this.getDocumentPosition();this.$inSelection=t.contains(i.row,i.column)}return this.$inSelection}getButton(){return Zt.getButton(this.domEvent)}getShiftKey(){return this.domEvent.shiftKey}getAccelKey(){return ts.isMac?this.domEvent.metaKey:this.domEvent.ctrlKey}};Ut.MouseEvent=is;var Fr={},rs=ee,Ce=pe,Rt=be,ns=200,ss=200,os=5;function Wr(a){var e=a.editor,t=rs.createElement("div");t.style.cssText="top:-100px;position:absolute;z-index:2147483647;opacity:0.5",t.textContent="";var i=["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"];i.forEach(function(L){a[L]=this[L]},this),e.on("mousedown",this.onMouseDown.bind(a));var r=e.container,s,n,o,l,h,c,u=0,g,w,d,m,f;this.onDragStart=function(L){if(this.cancelDrag||!r.draggable){var x=this;return setTimeout(function(){x.startSelect(),x.captureMouse(L)},0),L.preventDefault()}h=e.getSelectionRange();var b=L.dataTransfer;b.effectAllowed=e.getReadOnly()?"copy":"copyMove",e.container.appendChild(t),b.setDragImage&&b.setDragImage(t,0,0),setTimeout(function(){e.container.removeChild(t)}),b.clearData(),b.setData("Text",e.session.getTextRange()),w=!0,this.setState("drag")},this.onDragEnd=function(L){if(r.draggable=!1,w=!1,this.setState(null),!e.getReadOnly()){var x=L.dataTransfer.dropEffect;!g&&x=="move"&&e.session.remove(e.getSelectionRange()),e.$resetCursorStyle()}this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(L){if(!(e.getReadOnly()||!E(L.dataTransfer)))return n=L.clientX,o=L.clientY,s||C(),u++,L.dataTransfer.dropEffect=g=R(L),Ce.preventDefault(L)},this.onDragOver=function(L){if(!(e.getReadOnly()||!E(L.dataTransfer)))return n=L.clientX,o=L.clientY,s||(C(),u++),S!==null&&(S=null),L.dataTransfer.dropEffect=g=R(L),Ce.preventDefault(L)},this.onDragLeave=function(L){if(u--,u<=0&&s)return y(),g=null,Ce.preventDefault(L)},this.onDrop=function(L){if(c){var x=L.dataTransfer;if(w)switch(g){case"move":h.contains(c.row,c.column)?h={start:c,end:c}:h=e.moveText(h,c);break;case"copy":h=e.moveText(h,c,!0);break}else{var b=x.getData("Text");h={start:c,end:e.session.insert(c,b)},e.focus(),g=null}return y(),Ce.preventDefault(L)}},Ce.addListener(r,"dragstart",this.onDragStart.bind(a),e),Ce.addListener(r,"dragend",this.onDragEnd.bind(a),e),Ce.addListener(r,"dragenter",this.onDragEnter.bind(a),e),Ce.addListener(r,"dragover",this.onDragOver.bind(a),e),Ce.addListener(r,"dragleave",this.onDragLeave.bind(a),e),Ce.addListener(r,"drop",this.onDrop.bind(a),e);function v(L,x){var b=Date.now(),H=!x||L.row!=x.row,G=!x||L.column!=x.column;if(!m||H||G)e.moveCursorToPosition(L),m=b,f={x:n,y:o};else{var N=ui(f.x,f.y,n,o);N>os?m=null:b-m>=ss&&(e.renderer.scrollCursorIntoView(),m=null)}}function p(L,x){var b=Date.now(),H=e.renderer.layerConfig.lineHeight,G=e.renderer.layerConfig.characterWidth,N=e.renderer.scroller.getBoundingClientRect(),K={x:{left:n-N.left,right:N.right-n},y:{top:o-N.top,bottom:N.bottom-o}},q=Math.min(K.x.left,K.x.right),ie=Math.min(K.y.top,K.y.bottom),F={row:L.row,column:L.column};q/G<=2&&(F.column+=K.x.left<K.x.right?-3:2),ie/H<=1&&(F.row+=K.y.top<K.y.bottom?-1:1);var D=L.row!=F.row,W=L.column!=F.column,I=!x||L.row!=x.row;D||W&&!I?d?b-d>=ns&&e.renderer.scrollCursorIntoView(F):d=b:d=null}function $(){var L=c;c=e.renderer.screenToTextCoordinates(n,o),v(c,L),p(c,L)}function C(){h=e.selection.toOrientedRange(),s=e.session.addMarker(h,"ace_selection",e.getSelectionStyle()),e.clearSelection(),e.isFocused()&&e.renderer.$cursorLayer.setBlinking(!1),clearInterval(l),$(),l=setInterval($,20),u=0,Ce.addListener(document,"mousemove",M)}function y(){clearInterval(l),e.session.removeMarker(s),s=null,e.selection.fromOrientedRange(h),e.isFocused()&&!w&&e.$resetCursorStyle(),h=null,c=null,u=0,d=null,m=null,Ce.removeListener(document,"mousemove",M)}var S=null;function M(){S==null&&(S=setTimeout(function(){S!=null&&s&&y()},20))}function E(L){var x=L.types;return!x||Array.prototype.some.call(x,function(b){return b=="text/plain"||b=="Text"})}function R(L){var x=["copy","copymove","all","uninitialized"],b=["move","copymove","linkmove","all","uninitialized"],H=Rt.isMac?L.altKey:L.ctrlKey,G="uninitialized";try{G=L.dataTransfer.effectAllowed.toLowerCase()}catch{}var N="none";return H&&x.indexOf(G)>=0?N="copy":b.indexOf(G)>=0?N="move":x.indexOf(G)>=0&&(N="copy"),N}}(function(){this.dragWait=function(){var a=Date.now()-this.mousedownEvent.time;a>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){var a=this.editor.container;a.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(a){this.editor.$resetCursorStyle(),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var a=this.editor,e=a.container;e.draggable=!0,a.renderer.$cursorLayer.setBlinking(!1),a.setStyle("ace_dragging");var t=Rt.isWin?"default":"move";a.renderer.setCursorStyle(t),this.setState("dragReady")},this.onMouseDrag=function(a){var e=this.editor.container;if(Rt.isIE&&this.state=="dragReady"){var t=ui(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);t>3&&e.dragDrop()}if(this.state==="dragWait"){var t=ui(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);t>0&&(e.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))}},this.onMouseDown=function(a){if(this.$dragEnabled){this.mousedownEvent=a;var e=this.editor,t=a.inSelection(),i=a.getButton(),r=a.domEvent.detail||1;if(r===1&&i===0&&t){if(a.editor.inMultiSelectMode&&(a.getAccelKey()||a.getShiftKey()))return;this.mousedownEvent.time=Date.now();var s=a.domEvent.target||a.domEvent.srcElement;if("unselectable"in s&&(s.unselectable="on"),e.getDragDelay()){if(Rt.isWebKit){this.cancelDrag=!0;var n=e.container;n.draggable=!0}this.setState("dragWait")}else this.startDrag();this.captureMouse(a,this.onMouseDrag.bind(this)),a.defaultPrevented=!0}}}}).call(Wr.prototype);function ui(a,e,t,i){return Math.sqrt(Math.pow(t-a,2)+Math.pow(i-e,2))}Fr.DragdropHandler=Wr;var Hr={},Xt=Ut.MouseEvent,mt=pe,Vi=ee;Hr.addTouchListeners=function(a,e){var t="scroll",i,r,s,n,o,l,h=0,c,u=0,g=0,w=0,d,m;function f(){var S=window.navigator&&window.navigator.clipboard,M=!1,E=function(){var x=e.getCopyText(),b=e.session.getUndoManager().hasUndo();m.replaceChild(Vi.buildDom(M?["span",!x&&R("selectall")&&["span",{class:"ace_mobile-button",action:"selectall"},"Select All"],x&&R("copy")&&["span",{class:"ace_mobile-button",action:"copy"},"Copy"],x&&R("cut")&&["span",{class:"ace_mobile-button",action:"cut"},"Cut"],S&&R("paste")&&["span",{class:"ace_mobile-button",action:"paste"},"Paste"],b&&R("undo")&&["span",{class:"ace_mobile-button",action:"undo"},"Undo"],R("find")&&["span",{class:"ace_mobile-button",action:"find"},"Find"],R("openCommandPalette")&&["span",{class:"ace_mobile-button",action:"openCommandPalette"},"Palette"]]:["span"]),m.firstChild)},R=function(x){return e.commands.canExecute(x,e)},L=function(x){var b=x.target.getAttribute("action");if(b=="more"||!M)return M=!M,E();b=="paste"?S.readText().then(function(H){e.execCommand(b,H)}):b&&((b=="cut"||b=="copy")&&(S?S.writeText(e.getCopyText()):document.execCommand("copy")),e.execCommand(b)),m.firstChild.style.display="none",M=!1,b!="openCommandPalette"&&e.focus()};m=Vi.buildDom(["div",{class:"ace_mobile-menu",ontouchstart:function(x){t="menu",x.stopPropagation(),x.preventDefault(),e.textInput.focus()},ontouchend:function(x){x.stopPropagation(),x.preventDefault(),L(x)},onclick:L},["span"],["span",{class:"ace_mobile-button",action:"more"},"..."]],e.container)}function v(){if(!e.getOption("enableMobileMenu")){m&&p();return}m||f();var S=e.selection.cursor,M=e.renderer.textToScreenCoordinates(S.row,S.column),E=e.renderer.textToScreenCoordinates(0,0).pageX,R=e.renderer.scrollLeft,L=e.container.getBoundingClientRect();m.style.top=M.pageY-L.top-3+"px",M.pageX-L.left<L.width-70?(m.style.left="",m.style.right="10px"):(m.style.right="",m.style.left=E+R-L.left+"px"),m.style.display="",m.firstChild.style.display="none",e.on("input",p)}function p(S){m&&(m.style.display="none"),e.off("input",p)}function $(){o=null,clearTimeout(o);var S=e.selection.getRange(),M=S.contains(c.row,c.column);(S.isEmpty()||!M)&&(e.selection.moveToPosition(c),e.selection.selectWord()),t="wait",v()}function C(){o=null,clearTimeout(o),e.selection.moveToPosition(c);var S=u>=2?e.selection.getLineRange(c.row):e.session.getBracketRange(c);S&&!S.isEmpty()?e.selection.setRange(S):e.selection.selectWord(),t="wait"}mt.addListener(a,"contextmenu",function(S){if(d){var M=e.textInput.getElement();M.focus()}},e),mt.addListener(a,"touchstart",function(S){var M=S.touches;if(o||M.length>1){clearTimeout(o),o=null,s=-1,t="zoom";return}d=e.$mouseHandler.isMousePressed=!0;var E=e.renderer.layerConfig.lineHeight,R=e.renderer.layerConfig.lineHeight,L=S.timeStamp;n=L;var x=M[0],b=x.clientX,H=x.clientY;Math.abs(i-b)+Math.abs(r-H)>E&&(s=-1),i=S.clientX=b,r=S.clientY=H,g=w=0;var G=new Xt(S,e);if(c=G.getDocumentPosition(),L-s<500&&M.length==1&&!h)u++,S.preventDefault(),S.button=0,C();else{u=0;var N=e.selection.cursor,K=e.selection.isEmpty()?N:e.selection.anchor,q=e.renderer.$cursorLayer.getPixelPosition(N,!0),ie=e.renderer.$cursorLayer.getPixelPosition(K,!0),F=e.renderer.scroller.getBoundingClientRect(),D=e.renderer.layerConfig.offset,W=e.renderer.scrollLeft,I=function(A,T){return A=A/R,T=T/E-.75,A*A+T*T};if(S.clientX<F.left){t="zoom";return}var Y=I(S.clientX-F.left-q.left+W,S.clientY-F.top-q.top+D),Z=I(S.clientX-F.left-ie.left+W,S.clientY-F.top-ie.top+D);Y<3.5&&Z<3.5&&(t=Y>Z?"cursor":"anchor"),Z<3.5?t="anchor":Y<3.5?t="cursor":t="scroll",o=setTimeout($,450)}s=L},e),mt.addListener(a,"touchend",function(S){d=e.$mouseHandler.isMousePressed=!1,l&&clearInterval(l),t=="zoom"?(t="",h=0):o?(e.selection.moveToPosition(c),h=0,v()):t=="scroll"?(y(),p()):v(),clearTimeout(o),o=null},e),mt.addListener(a,"touchmove",function(S){o&&(clearTimeout(o),o=null);var M=S.touches;if(!(M.length>1||t=="zoom")){var E=M[0],R=i-E.clientX,L=r-E.clientY;if(t=="wait")if(R*R+L*L>4)t="cursor";else return S.preventDefault();i=E.clientX,r=E.clientY,S.clientX=E.clientX,S.clientY=E.clientY;var x=S.timeStamp,b=x-n;if(n=x,t=="scroll"){var H=new Xt(S,e);H.speed=1,H.wheelX=R,H.wheelY=L,10*Math.abs(R)<Math.abs(L)&&(R=0),10*Math.abs(L)<Math.abs(R)&&(L=0),b!=0&&(g=R/b,w=L/b),e._emit("mousewheel",H),H.propagationStopped||(g=w=0)}else{var G=new Xt(S,e),N=G.getDocumentPosition();t=="cursor"?e.selection.moveCursorToPosition(N):t=="anchor"&&e.selection.setSelectionAnchor(N.row,N.column),e.renderer.scrollCursorIntoView(N),S.preventDefault()}}},e);function y(){h+=60,l=setInterval(function(){h--<=0&&(clearInterval(l),l=null),Math.abs(g)<.01&&(g=0),Math.abs(w)<.01&&(w=0),h<20&&(g=.9*g),h<20&&(w=.9*w);var S=e.session.getScrollTop();e.renderer.scrollBy(10*g,10*w),S==e.session.getScrollTop()&&(h=0)},10)}};var me=pe,It=be,as=Dr.DefaultHandlers,ls=zt.GutterHandler,pt=Ut.MouseEvent,hs=Fr.DragdropHandler,cs=Hr.addTouchListeners,us=we;let Ci=class{constructor(e){this.$dragDelay,this.$dragEnabled,this.$mouseMoved,this.mouseEvent,this.$focusTimeout;var t=this;this.editor=e,new as(this),new ls(this),new hs(this);var i=function(n){var o=!document.hasFocus||!document.hasFocus()||!e.isFocused()&&document.activeElement==(e.textInput&&e.textInput.getElement());o&&window.focus(),e.focus(),setTimeout(function(){e.isFocused()||e.focus()})},r=e.renderer.getMouseEventTarget();me.addListener(r,"click",this.onMouseEvent.bind(this,"click"),e),me.addListener(r,"mousemove",this.onMouseMove.bind(this,"mousemove"),e),me.addMultiMouseDownListener([r,e.renderer.scrollBarV&&e.renderer.scrollBarV.inner,e.renderer.scrollBarH&&e.renderer.scrollBarH.inner,e.textInput&&e.textInput.getElement()].filter(Boolean),[400,300,250],this,"onMouseEvent",e),me.addMouseWheelListener(e.container,this.onMouseWheel.bind(this,"mousewheel"),e),cs(e.container,e);var s=e.renderer.$gutter;me.addListener(s,"mousedown",this.onMouseEvent.bind(this,"guttermousedown"),e),me.addListener(s,"click",this.onMouseEvent.bind(this,"gutterclick"),e),me.addListener(s,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick"),e),me.addListener(s,"mousemove",this.onMouseEvent.bind(this,"guttermousemove"),e),me.addListener(r,"mousedown",i,e),me.addListener(s,"mousedown",i,e),It.isIE&&e.renderer.scrollBarV&&(me.addListener(e.renderer.scrollBarV.element,"mousedown",i,e),me.addListener(e.renderer.scrollBarH.element,"mousedown",i,e)),e.on("mousemove",function(n){if(!(t.state||t.$dragDelay||!t.$dragEnabled)){var o=e.renderer.screenToTextCoordinates(n.x,n.y),l=e.session.selection.getRange(),h=e.renderer;!l.isEmpty()&&l.insideStart(o.row,o.column)?h.setCursorStyle("default"):h.setCursorStyle("")}},e)}onMouseEvent(e,t){this.editor.session&&this.editor._emit(e,new pt(t,this.editor))}onMouseMove(e,t){var i=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;!i||!i.length||this.editor._emit(e,new pt(t,this.editor))}onMouseWheel(e,t){var i=new pt(t,this.editor);i.speed=this.$scrollSpeed*2,i.wheelX=t.wheelX,i.wheelY=t.wheelY,this.editor._emit(e,i)}setState(e){this.state=e}captureMouse(e,t){this.x=e.x,this.y=e.y,this.isMousePressed=!0;var i=this.editor,r=this.editor.renderer;r.$isMousePressed=!0;var s=this,n=function(u){if(u){if(It.isWebKit&&!u.which&&s.releaseMouse)return s.releaseMouse();s.x=u.clientX,s.y=u.clientY,t&&t(u),s.mouseEvent=new pt(u,s.editor),s.$mouseMoved=!0}},o=function(u){i.off("beforeEndOperation",h),clearInterval(c),i.session&&l(),s[s.state+"End"]&&s[s.state+"End"](u),s.state="",s.isMousePressed=r.$isMousePressed=!1,r.$keepTextAreaAtCursor&&r.$moveTextAreaToCursor(),s.$onCaptureMouseMove=s.releaseMouse=null,u&&s.onMouseEvent("mouseup",u),i.endOperation()},l=function(){s[s.state]&&s[s.state](),s.$mouseMoved=!1};if(It.isOldIE&&e.domEvent.type=="dblclick")return setTimeout(function(){o(e)});var h=function(u){s.releaseMouse&&i.curOp.command.name&&i.curOp.selectionChanged&&(s[s.state+"End"]&&s[s.state+"End"](),s.state="",s.releaseMouse())};i.on("beforeEndOperation",h),i.startOperation({command:{name:"mouse"}}),s.$onCaptureMouseMove=n,s.releaseMouse=me.capture(this.editor.container,n,o);var c=setInterval(l,20)}cancelContextMenu(){var e=(function(t){t&&t.domEvent&&t.domEvent.type!="contextmenu"||(this.editor.off("nativecontextmenu",e),t&&t.domEvent&&me.stopEvent(t.domEvent))}).bind(this);setTimeout(e,10),this.editor.on("nativecontextmenu",e)}destroy(){this.releaseMouse&&this.releaseMouse()}};Ci.prototype.releaseMouse=null;us.defineOptions(Ci.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:It.isMac?150:0},dragEnabled:{initialValue:!0},focusTimeout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}});Ir.MouseHandler=Ci;var Br={},Gi=ee;let ds=class{constructor(e){e.on("click",function(t){var i=t.getDocumentPosition(),r=e.session,s=r.getFoldAt(i.row,i.column,1);s&&(t.getAccelKey()?r.removeFold(s):r.expandFold(s),t.stop());var n=t.domEvent&&t.domEvent.target;n&&Gi.hasCssClass(n,"ace_inline_button")&&Gi.hasCssClass(n,"ace_toggle_wrap")&&(r.setOption("wrap",!r.getUseWrapMode()),e.renderer.scrollCursorIntoView())}),e.on("gutterclick",function(t){var i=e.renderer.$gutterLayer.getRegion(t);if(i=="foldWidgets"){var r=t.getDocumentPosition().row,s=e.session;s.foldWidgets&&s.foldWidgets[r]&&e.session.onFoldWidgetClick(r,t),e.isFocused()||e.focus(),t.stop()}}),e.on("gutterdblclick",function(t){var i=e.renderer.$gutterLayer.getRegion(t);if(i=="foldWidgets"){var r=t.getDocumentPosition().row,s=e.session,n=s.getParentFoldRangeData(r,!0),o=n.range||n.firstRange;if(o){r=o.start.row;var l=s.getFoldAt(r,s.getLine(r).length,1);l?s.removeFold(l):(s.addFold("...",o),e.renderer.scrollCursorIntoView({row:o.start.row,column:0}))}t.stop()}})}};Br.FoldHandler=ds;var zr={},gs=He,fs=pe;let vs=class{constructor(e){this.$editor=e,this.$data={editor:e},this.$handlers=[],this.setDefaultHandler(e.commands)}setDefaultHandler(e){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=e,this.addKeyboardHandler(e,0)}setKeyboardHandler(e){var t=this.$handlers;if(t[t.length-1]!=e){for(;t[t.length-1]&&t[t.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(t[t.length-1]);this.addKeyboardHandler(e,1)}}addKeyboardHandler(e,t){if(e){typeof e=="function"&&!e.handleKeyboard&&(e.handleKeyboard=e);var i=this.$handlers.indexOf(e);i!=-1&&this.$handlers.splice(i,1),t==null?this.$handlers.push(e):this.$handlers.splice(t,0,e),i==-1&&e.attach&&e.attach(this.$editor)}}removeKeyboardHandler(e){var t=this.$handlers.indexOf(e);return t==-1?!1:(this.$handlers.splice(t,1),e.detach&&e.detach(this.$editor),!0)}getKeyboardHandler(){return this.$handlers[this.$handlers.length-1]}getStatusText(){var e=this.$data,t=e.editor;return this.$handlers.map(function(i){return i.getStatusText&&i.getStatusText(t,e)||""}).filter(Boolean).join(" ")}$callKeyboardHandlers(e,t,i,r){for(var s,n=!1,o=this.$editor.commands,l=this.$handlers.length;l--&&(s=this.$handlers[l].handleKeyboard(this.$data,e,t,i,r),!(!(!s||!s.command)&&(s.command=="null"?n=!0:n=o.exec(s.command,this.$editor,s.args,r),n&&r&&e!=-1&&s.passEvent!=!0&&s.command.passEvent!=!0&&fs.stopEvent(r),n))););return!n&&e==-1&&(s={command:"insertstring"},n=o.exec("insertstring",this.$editor,t)),n&&this.$editor._signal&&this.$editor._signal("keyboardActivity",s),n}onCommandKey(e,t,i){var r=gs.keyCodeToString(i);return this.$callKeyboardHandlers(t,r,i,e)}onTextInput(e){return this.$callKeyboardHandlers(-1,e)}};zr.KeyBinding=vs;var Vt={},Pr={},Ur={};(function(a){var e=0,t=0,i=!1,r=!1,s=!1,n=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],o=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],l=0,h=1,c=0,u=1,g=2,w=3,d=4,m=5,f=6,v=7,p=8,$=9,C=10,y=11,S=12,M=13,E=14,R=15,L=16,x=17,b=18,H=[b,b,b,b,b,b,b,b,b,f,m,f,p,m,b,b,b,b,b,b,b,b,b,b,b,b,b,b,m,m,m,f,p,d,d,y,y,y,d,d,d,d,d,C,$,C,$,$,g,g,g,g,g,g,g,g,g,g,$,d,d,d,d,d,d,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,d,d,d,d,d,d,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,d,d,d,d,b,b,b,b,b,b,m,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,$,d,y,y,y,y,d,d,d,d,c,d,d,b,d,d,y,y,g,g,d,c,d,d,d,g,c,d,d,d,d,d],G=[p,p,p,p,p,p,p,p,p,p,p,b,b,b,c,u,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,p,m,M,E,R,L,x,$,y,y,y,y,y,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,$,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,p];function N(F,D,W,I){var Y=e?o:n,Z=null,A=null,T=null,k=0,O=null,z=null,j=-1,B=null,P=null,J=[];if(!I)for(B=0,I=[];B<W;B++)I[B]=ie(F[B]);for(t=e,i=!1,r=!1,s=!1,P=0;P<W;P++){if(Z=k,J[P]=A=q(F,I,J,P),k=Y[Z][A],O=k&240,k&=15,D[P]=T=Y[k][5],O>0)if(O==16){for(B=j;B<P;B++)D[B]=1;j=-1}else j=-1;if(z=Y[k][6],z)j==-1&&(j=P);else if(j>-1){for(B=j;B<P;B++)D[B]=T;j=-1}I[P]==m&&(D[P]=0),t|=T}if(s){for(B=0;B<W;B++)if(I[B]==f){D[B]=e;for(var U=B-1;U>=0&&I[U]==p;U--)D[U]=e}}}function K(F,D,W){if(!(t<F)){if(F==1&&e==h&&!r){W.reverse();return}for(var I=W.length,Y=0,Z,A,T,k;Y<I;){if(D[Y]>=F){for(Z=Y+1;Z<I&&D[Z]>=F;)Z++;for(A=Y,T=Z-1;A<T;A++,T--)k=W[A],W[A]=W[T],W[T]=k;Y=Z}Y++}}}function q(F,D,W,I){var Y=D[I],Z,A,T,k;switch(Y){case c:case u:i=!1;case d:case w:return Y;case g:return i?w:g;case v:return i=!0,u;case p:return d;case $:return I<1||I+1>=D.length||(Z=W[I-1])!=g&&Z!=w||(A=D[I+1])!=g&&A!=w?d:(i&&(A=w),A==Z?A:d);case C:return Z=I>0?W[I-1]:m,Z==g&&I+1<D.length&&D[I+1]==g?g:d;case y:if(I>0&&W[I-1]==g)return g;if(i)return d;for(k=I+1,T=D.length;k<T&&D[k]==y;)k++;return k<T&&D[k]==g?g:d;case S:for(T=D.length,k=I+1;k<T&&D[k]==S;)k++;if(k<T){var O=F[I],z=O>=1425&&O<=2303||O==64286;if(Z=D[k],z&&(Z==u||Z==v))return u}return I<1||(Z=D[I-1])==m?d:W[I-1];case m:return i=!1,r=!0,e;case f:return s=!0,d;case M:case E:case L:case x:case R:i=!1;case b:return d}}function ie(F){var D=F.charCodeAt(0),W=D>>8;return W==0?D>191?c:H[D]:W==5?/[\u0591-\u05f4]/.test(F)?u:c:W==6?/[\u0610-\u061a\u064b-\u065f\u06d6-\u06e4\u06e7-\u06ed]/.test(F)?S:/[\u0660-\u0669\u066b-\u066c]/.test(F)?w:D==1642?y:/[\u06f0-\u06f9]/.test(F)?g:v:W==32&&D<=8287?G[D&255]:W==254&&D>=65136?v:d}a.L=c,a.R=u,a.EN=g,a.ON_R=3,a.AN=4,a.R_H=5,a.B=6,a.RLE=7,a.DOT="",a.doBidiReorder=function(F,D,W){if(F.length<2)return{};var I=F.split(""),Y=new Array(I.length),Z=new Array(I.length),A=[];e=W?h:l,N(I,A,I.length,D);for(var T=0;T<Y.length;Y[T]=T,T++);K(2,A,Y),K(1,A,Y);for(var T=0;T<Y.length-1;T++)D[T]===w?A[T]=a.AN:A[T]===u&&(D[T]>v&&D[T]<M||D[T]===d||D[T]===b)?A[T]=a.ON_R:T>0&&I[T-1]===""&&/\u0622|\u0623|\u0625|\u0627/.test(I[T])&&(A[T-1]=A[T]=a.R_H,T++);I[I.length-1]===a.DOT&&(A[I.length-1]=a.B),I[0]===""&&(A[0]=a.RLE);for(var T=0;T<Y.length;T++)Z[T]=A[Y[T]];return{logicalFromVisual:Y,bidiLevels:Z}},a.hasBidiCharacters=function(F,D){for(var W=!1,I=0;I<F.length;I++)D[I]=ie(F.charAt(I)),!W&&(D[I]==u||D[I]==v||D[I]==w)&&(W=!0);return W},a.getVisualFromLogicalIdx=function(F,D){for(var W=0;W<D.logicalFromVisual.length;W++)if(D.logicalFromVisual[W]==F)return W;return 0}})(Ur);var ue=Ur,ms=V,ji=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\u202B]/;let ps=class{constructor(e){this.session=e,this.bidiMap={},this.currentRow=null,this.bidiUtil=ue,this.charWidths=[],this.EOL="",this.showInvisibles=!0,this.isRtlDir=!1,this.$isRtl=!1,this.line="",this.wrapIndent=0,this.EOF="",this.RLE="",this.contentWidth=0,this.fontMetrics=null,this.rtlLineOffset=0,this.wrapOffset=0,this.isMoveLeftOperation=!1,this.seenBidi=ji.test(e.getValue())}isBidiRow(e,t,i){return this.seenBidi?(e!==this.currentRow&&(this.currentRow=e,this.updateRowLine(t,i),this.updateBidiMap()),this.bidiMap.bidiLevels):!1}onChange(e){this.seenBidi?this.currentRow=null:e.action=="insert"&&ji.test(e.lines.join(`
`))&&(this.seenBidi=!0,this.currentRow=null)}getDocumentRow(){var e=0,t=this.session.$screenRowCache;if(t.length){var i=this.session.$getRowCacheIndex(t,this.currentRow);i>=0&&(e=this.session.$docRowCache[i])}return e}getSplitIndex(){var e=0,t=this.session.$screenRowCache;if(t.length)for(var i,r=this.session.$getRowCacheIndex(t,this.currentRow);this.currentRow-e>0&&(i=this.session.$getRowCacheIndex(t,this.currentRow-e-1),i===r);)r=i,e++;else e=this.currentRow;return e}updateRowLine(e,t){e===void 0&&(e=this.getDocumentRow());var i=e===this.session.getLength()-1,r=i?this.EOF:this.EOL;if(this.wrapIndent=0,this.line=this.session.getLine(e),this.isRtlDir=this.$isRtl||this.line.charAt(0)===this.RLE,this.session.$useWrapMode){var s=this.session.$wrapData[e];s&&(t===void 0&&(t=this.getSplitIndex()),t>0&&s.length?(this.wrapIndent=s.indent,this.wrapOffset=this.wrapIndent*this.charWidths[ue.L],this.line=t<s.length?this.line.substring(s[t-1],s[t]):this.line.substring(s[s.length-1])):this.line=this.line.substring(0,s[t]),t==s.length&&(this.line+=this.showInvisibles?r:ue.DOT))}else this.line+=this.showInvisibles?r:ue.DOT;var n=this.session,o=0,l;this.line=this.line.replace(/\t|[\u1100-\u2029, \u202F-\uFFE6]/g,function(h,c){return h==="	"||n.isFullWidth(h.charCodeAt(0))?(l=h==="	"?n.getScreenTabSize(c+o):2,o+=l-1,ms.stringRepeat(ue.DOT,l)):h}),this.isRtlDir&&(this.fontMetrics.$main.textContent=this.line.charAt(this.line.length-1)==ue.DOT?this.line.substr(0,this.line.length-1):this.line,this.rtlLineOffset=this.contentWidth-this.fontMetrics.$main.getBoundingClientRect().width)}updateBidiMap(){var e=[];ue.hasBidiCharacters(this.line,e)||this.isRtlDir?this.bidiMap=ue.doBidiReorder(this.line,e,this.isRtlDir):this.bidiMap={}}markAsDirty(){this.currentRow=null}updateCharacterWidths(e){if(this.characterWidth!==e.$characterSize.width){this.fontMetrics=e;var t=this.characterWidth=e.$characterSize.width,i=e.$measureCharWidth("");this.charWidths[ue.L]=this.charWidths[ue.EN]=this.charWidths[ue.ON_R]=t,this.charWidths[ue.R]=this.charWidths[ue.AN]=i,this.charWidths[ue.R_H]=i*.45,this.charWidths[ue.B]=this.charWidths[ue.RLE]=0,this.currentRow=null}}setShowInvisibles(e){this.showInvisibles=e,this.currentRow=null}setEolChar(e){this.EOL=e}setContentWidth(e){this.contentWidth=e}isRtlLine(e){return this.$isRtl?!0:e!=null?this.session.getLine(e).charAt(0)==this.RLE:this.isRtlDir}setRtlDirection(e,t){for(var i=e.getCursorPosition(),r=e.selection.getSelectionAnchor().row;r<=i.row;r++)!t&&e.session.getLine(r).charAt(0)===e.session.$bidiHandler.RLE?e.session.doc.removeInLine(r,0,1):t&&e.session.getLine(r).charAt(0)!==e.session.$bidiHandler.RLE&&e.session.doc.insert({column:0,row:r},e.session.$bidiHandler.RLE)}getPosLeft(e){e-=this.wrapIndent;var t=this.line.charAt(0)===this.RLE?1:0,i=e>t?this.session.getOverwrite()?e:e-1:t,r=ue.getVisualFromLogicalIdx(i,this.bidiMap),s=this.bidiMap.bidiLevels,n=0;!this.session.getOverwrite()&&e<=t&&s[r]%2!==0&&r++;for(var o=0;o<r;o++)n+=this.charWidths[s[o]];return!this.session.getOverwrite()&&e>t&&s[r]%2===0&&(n+=this.charWidths[s[r]]),this.wrapIndent&&(n+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset),this.isRtlDir&&(n+=this.rtlLineOffset),n}getSelections(e,t){var i=this.bidiMap,r=i.bidiLevels,s,n=[],o=0,l=Math.min(e,t)-this.wrapIndent,h=Math.max(e,t)-this.wrapIndent,c=!1,u=!1,g=0;this.wrapIndent&&(o+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);for(var w,d=0;d<r.length;d++)w=i.logicalFromVisual[d],s=r[d],c=w>=l&&w<h,c&&!u?g=o:!c&&u&&n.push({left:g,width:o-g}),o+=this.charWidths[s],u=c;if(c&&d===r.length&&n.push({left:g,width:o-g}),this.isRtlDir)for(var m=0;m<n.length;m++)n[m].left+=this.rtlLineOffset;return n}offsetToCol(i){this.isRtlDir&&(i-=this.rtlLineOffset);var t=0,i=Math.max(i,0),r=0,s=0,n=this.bidiMap.bidiLevels,o=this.charWidths[n[s]];for(this.wrapIndent&&(i-=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);i>r+o/2;){if(r+=o,s===n.length-1){o=0;break}o=this.charWidths[n[++s]]}return s>0&&n[s-1]%2!==0&&n[s]%2===0?(i<r&&s--,t=this.bidiMap.logicalFromVisual[s]):s>0&&n[s-1]%2===0&&n[s]%2!==0?t=1+(i>r?this.bidiMap.logicalFromVisual[s]:this.bidiMap.logicalFromVisual[s-1]):this.isRtlDir&&s===n.length-1&&o===0&&n[s-1]%2===0||!this.isRtlDir&&s===0&&n[s]%2!==0?t=1+this.bidiMap.logicalFromVisual[s]:(s>0&&n[s-1]%2!==0&&o!==0&&s--,t=this.bidiMap.logicalFromVisual[s]),t===0&&this.isRtlDir&&t++,t+this.wrapIndent}};Pr.BidiHandler=ps;var Si={},ws=ae,Ki=V,$s=fe.EventEmitter,Ee=ne.Range;let Ne=class{constructor(e){this.session=e,this.doc=e.getDocument(),this.clearSelection(),this.cursor=this.lead=this.doc.createAnchor(0,0),this.anchor=this.doc.createAnchor(0,0),this.$silent=!1;var t=this;this.cursor.on("change",function(i){t.$cursorChanged=!0,t.$silent||t._emit("changeCursor"),!t.$isEmpty&&!t.$silent&&t._emit("changeSelection"),!t.$keepDesiredColumnOnChange&&i.old.column!=i.value.column&&(t.$desiredColumn=null)}),this.anchor.on("change",function(){t.$anchorChanged=!0,!t.$isEmpty&&!t.$silent&&t._emit("changeSelection")})}isEmpty(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column}isMultiLine(){return!this.$isEmpty&&this.anchor.row!=this.cursor.row}getCursor(){return this.lead.getPosition()}setAnchor(e,t){this.$isEmpty=!1,this.anchor.setPosition(e,t)}getAnchor(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()}getSelectionLead(){return this.lead.getPosition()}isBackwards(){var e=this.anchor,t=this.lead;return e.row>t.row||e.row==t.row&&e.column>t.column}getRange(){var e=this.anchor,t=this.lead;return this.$isEmpty?Ee.fromPoints(t,t):this.isBackwards()?Ee.fromPoints(t,e):Ee.fromPoints(e,t)}clearSelection(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))}selectAll(){this.$setSelection(0,0,Number.MAX_VALUE,Number.MAX_VALUE)}setRange(e,t){var i=t?e.end:e.start,r=t?e.start:e.end;this.$setSelection(i.row,i.column,r.row,r.column)}$setSelection(e,t,i,r){if(!this.$silent){var s=this.$isEmpty,n=this.inMultiSelectMode;this.$silent=!0,this.$cursorChanged=this.$anchorChanged=!1,this.anchor.setPosition(e,t),this.cursor.setPosition(i,r),this.$isEmpty=!Ee.comparePoints(this.anchor,this.cursor),this.$silent=!1,this.$cursorChanged&&this._emit("changeCursor"),(this.$cursorChanged||this.$anchorChanged||s!=this.$isEmpty||n)&&this._emit("changeSelection")}}$moveSelection(e){var t=this.lead;this.$isEmpty&&this.setSelectionAnchor(t.row,t.column),e.call(this)}selectTo(e,t){this.$moveSelection(function(){this.moveCursorTo(e,t)})}selectToPosition(e){this.$moveSelection(function(){this.moveCursorToPosition(e)})}moveTo(e,t){this.clearSelection(),this.moveCursorTo(e,t)}moveToPosition(e){this.clearSelection(),this.moveCursorToPosition(e)}selectUp(){this.$moveSelection(this.moveCursorUp)}selectDown(){this.$moveSelection(this.moveCursorDown)}selectRight(){this.$moveSelection(this.moveCursorRight)}selectLeft(){this.$moveSelection(this.moveCursorLeft)}selectLineStart(){this.$moveSelection(this.moveCursorLineStart)}selectLineEnd(){this.$moveSelection(this.moveCursorLineEnd)}selectFileEnd(){this.$moveSelection(this.moveCursorFileEnd)}selectFileStart(){this.$moveSelection(this.moveCursorFileStart)}selectWordRight(){this.$moveSelection(this.moveCursorWordRight)}selectWordLeft(){this.$moveSelection(this.moveCursorWordLeft)}getWordRange(e,t){if(typeof t>"u"){var i=e||this.lead;e=i.row,t=i.column}return this.session.getWordRange(e,t)}selectWord(){this.setSelectionRange(this.getWordRange())}selectAWord(){var e=this.getCursor(),t=this.session.getAWordRange(e.row,e.column);this.setSelectionRange(t)}getLineRange(e,t){var i=typeof e=="number"?e:this.lead.row,r,s=this.session.getFoldLine(i);return s?(i=s.start.row,r=s.end.row):r=i,t===!0?new Ee(i,0,r,this.session.getLine(r).length):new Ee(i,0,r+1,0)}selectLine(){this.setSelectionRange(this.getLineRange())}moveCursorUp(){this.moveCursorBy(-1,0)}moveCursorDown(){this.moveCursorBy(1,0)}wouldMoveIntoSoftTab(e,t,i){var r=e.column,s=e.column+t;return i<0&&(r=e.column-t,s=e.column),this.session.isTabStop(e)&&this.doc.getLine(e.row).slice(r,s).split(" ").length-1==t}moveCursorLeft(){var e=this.lead.getPosition(),t;if(t=this.session.getFoldAt(e.row,e.column,-1))this.moveCursorTo(t.start.row,t.start.column);else if(e.column===0)e.row>0&&this.moveCursorTo(e.row-1,this.doc.getLine(e.row-1).length);else{var i=this.session.getTabSize();this.wouldMoveIntoSoftTab(e,i,-1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,-i):this.moveCursorBy(0,-1)}}moveCursorRight(){var e=this.lead.getPosition(),t;if(t=this.session.getFoldAt(e.row,e.column,1))this.moveCursorTo(t.end.row,t.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var i=this.session.getTabSize(),e=this.lead;this.wouldMoveIntoSoftTab(e,i,1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,i):this.moveCursorBy(0,1)}}moveCursorLineStart(){var e=this.lead.row,t=this.lead.column,i=this.session.documentToScreenRow(e,t),r=this.session.screenToDocumentPosition(i,0),s=this.session.getDisplayLine(e,null,r.row,r.column),n=s.match(/^\s*/);n[0].length!=t&&!this.session.$useEmacsStyleLineStart&&(r.column+=n[0].length),this.moveCursorToPosition(r)}moveCursorLineEnd(){var e=this.lead,t=this.session.getDocumentLastRowColumnPosition(e.row,e.column);if(this.lead.column==t.column){var i=this.session.getLine(t.row);if(t.column==i.length){var r=i.search(/\s+$/);r>0&&(t.column=r)}}this.moveCursorTo(t.row,t.column)}moveCursorFileEnd(){var e=this.doc.getLength()-1,t=this.doc.getLine(e).length;this.moveCursorTo(e,t)}moveCursorFileStart(){this.moveCursorTo(0,0)}moveCursorLongWordRight(){var e=this.lead.row,t=this.lead.column,i=this.doc.getLine(e),r=i.substring(t);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var s=this.session.getFoldAt(e,t,1);if(s){this.moveCursorTo(s.end.row,s.end.column);return}if(this.session.nonTokenRe.exec(r)&&(t+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,r=i.substring(t)),t>=i.length){this.moveCursorTo(e,i.length),this.moveCursorRight(),e<this.doc.getLength()-1&&this.moveCursorWordRight();return}this.session.tokenRe.exec(r)&&(t+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(e,t)}moveCursorLongWordLeft(){var e=this.lead.row,t=this.lead.column,i;if(i=this.session.getFoldAt(e,t,-1)){this.moveCursorTo(i.start.row,i.start.column);return}var r=this.session.getFoldStringAt(e,t,-1);r==null&&(r=this.doc.getLine(e).substring(0,t));var s=Ki.stringReverse(r);if(this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.nonTokenRe.exec(s)&&(t-=this.session.nonTokenRe.lastIndex,s=s.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),t<=0){this.moveCursorTo(e,0),this.moveCursorLeft(),e>0&&this.moveCursorWordLeft();return}this.session.tokenRe.exec(s)&&(t-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(e,t)}$shortWordEndIndex(e){var t=0,i,r=/\s/,s=this.session.tokenRe;if(s.lastIndex=0,this.session.tokenRe.exec(e))t=this.session.tokenRe.lastIndex;else{for(;(i=e[t])&&r.test(i);)t++;if(t<1){for(s.lastIndex=0;(i=e[t])&&!s.test(i);)if(s.lastIndex=0,t++,r.test(i))if(t>2){t--;break}else{for(;(i=e[t])&&r.test(i);)t++;if(t>2)break}}}return s.lastIndex=0,t}moveCursorShortWordRight(){var e=this.lead.row,t=this.lead.column,i=this.doc.getLine(e),r=i.substring(t),s=this.session.getFoldAt(e,t,1);if(s)return this.moveCursorTo(s.end.row,s.end.column);if(t==i.length){var n=this.doc.getLength();do e++,r=this.doc.getLine(e);while(e<n&&/^\s*$/.test(r));/^\s+/.test(r)||(r=""),t=0}var o=this.$shortWordEndIndex(r);this.moveCursorTo(e,t+o)}moveCursorShortWordLeft(){var e=this.lead.row,t=this.lead.column,i;if(i=this.session.getFoldAt(e,t,-1))return this.moveCursorTo(i.start.row,i.start.column);var r=this.session.getLine(e).substring(0,t);if(t===0){do e--,r=this.doc.getLine(e);while(e>0&&/^\s*$/.test(r));t=r.length,/\s+$/.test(r)||(r="")}var s=Ki.stringReverse(r),n=this.$shortWordEndIndex(s);return this.moveCursorTo(e,t-n)}moveCursorWordRight(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()}moveCursorWordLeft(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()}moveCursorBy(e,t){var i=this.session.documentToScreenPosition(this.lead.row,this.lead.column),r;if(t===0&&(e!==0&&(this.session.$bidiHandler.isBidiRow(i.row,this.lead.row)?(r=this.session.$bidiHandler.getPosLeft(i.column),i.column=Math.round(r/this.session.$bidiHandler.charWidths[0])):r=i.column*this.session.$bidiHandler.charWidths[0]),this.$desiredColumn?i.column=this.$desiredColumn:this.$desiredColumn=i.column),e!=0&&this.session.lineWidgets&&this.session.lineWidgets[this.lead.row]){var s=this.session.lineWidgets[this.lead.row];e<0?e-=s.rowsAbove||0:e>0&&(e+=s.rowCount-(s.rowsAbove||0))}var n=this.session.screenToDocumentPosition(i.row+e,i.column,r);e!==0&&t===0&&n.row===this.lead.row&&(n.column,this.lead.column),this.moveCursorTo(n.row,n.column+t,t===0)}moveCursorToPosition(e){this.moveCursorTo(e.row,e.column)}moveCursorTo(e,t,i){var r=this.session.getFoldAt(e,t,1);r&&(e=r.start.row,t=r.start.column),this.$keepDesiredColumnOnChange=!0;var s=this.session.getLine(e);/[\uDC00-\uDFFF]/.test(s.charAt(t))&&s.charAt(t-1)&&(this.lead.row==e&&this.lead.column==t+1?t=t-1:t=t+1),this.lead.setPosition(e,t),this.$keepDesiredColumnOnChange=!1,i||(this.$desiredColumn=null)}moveCursorToScreen(e,t,i){var r=this.session.screenToDocumentPosition(e,t);this.moveCursorTo(r.row,r.column,i)}detach(){this.lead.detach(),this.anchor.detach()}fromOrientedRange(e){this.setSelectionRange(e,e.cursor==e.start),this.$desiredColumn=e.desiredColumn||this.$desiredColumn}toOrientedRange(e){var t=this.getRange();return e?(e.start.column=t.start.column,e.start.row=t.start.row,e.end.column=t.end.column,e.end.row=t.end.row):e=t,e.cursor=this.isBackwards()?e.start:e.end,e.desiredColumn=this.$desiredColumn,e}getRangeOfMovements(e){var t=this.getCursor();try{e(this);var i=this.getCursor();return Ee.fromPoints(t,i)}catch{return Ee.fromPoints(t,t)}finally{this.moveCursorToPosition(t)}}toJSON(){if(this.rangeCount)var e=this.ranges.map(function(t){var i=t.clone();return i.isBackwards=t.cursor==t.start,i});else{var e=this.getRange();e.isBackwards=this.isBackwards()}return e}fromJSON(e){if(e.start==null)if(this.rangeList&&e.length>1){this.toSingleRange(e[0]);for(var t=e.length;t--;){var i=Ee.fromPoints(e[t].start,e[t].end);e[t].isBackwards&&(i.cursor=i.start),this.addRange(i,!0)}return}else e=e[0];this.rangeList&&this.toSingleRange(e),this.setSelectionRange(e,e.isBackwards)}isEqual(e){if((e.length||this.rangeCount)&&e.length!=this.rangeCount)return!1;if(!e.length||!this.ranges)return this.getRange().isEqual(e);for(var t=this.ranges.length;t--;)if(!this.ranges[t].isEqual(e[t]))return!1;return!0}};Ne.prototype.setSelectionAnchor=Ne.prototype.setAnchor;Ne.prototype.getSelectionAnchor=Ne.prototype.getAnchor;Ne.prototype.setSelectionRange=Ne.prototype.setRange;ws.implement(Ne.prototype,$s);Si.Selection=Ne;var Vr={},Gr={};const ys=bi.reportError;var Yi=2e3;let jr=class{constructor(e){this.splitRegex,this.states=e,this.regExps={},this.matchMappings={};for(var t in this.states){for(var i=this.states[t],r=[],s=0,n=this.matchMappings[t]={defaultToken:"text"},o="g",l=[],h=0;h<i.length;h++){var c=i[h];if(c.defaultToken&&(n.defaultToken=c.defaultToken),c.caseInsensitive&&o.indexOf("i")===-1&&(o+="i"),c.unicode&&o.indexOf("u")===-1&&(o+="u"),c.regex!=null){c.regex instanceof RegExp&&(c.regex=c.regex.toString().slice(1,-1));var u=c.regex,g=new RegExp("(?:("+u+")|(.))").exec("a").length-2;Array.isArray(c.token)?c.token.length==1||g==1?c.token=c.token[0]:g-1!=c.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:c,groupCount:g-1}),c.token=c.token[0]):(c.tokenArray=c.token,c.token=null,c.onMatch=this.$arrayTokens):typeof c.token=="function"&&!c.onMatch&&(g>1?c.onMatch=this.$applyToken:c.onMatch=c.token),g>1&&(/\\\d/.test(c.regex)?u=c.regex.replace(/\\([0-9]+)/g,function(w,d){return"\\"+(parseInt(d,10)+s+1)}):(g=1,u=this.removeCapturingGroups(c.regex)),!c.splitRegex&&typeof c.token!="string"&&l.push(c)),n[s]=h,s+=g,r.push(u),c.onMatch||(c.onMatch=null)}}r.length||(n[0]=0,r.push("$")),l.forEach(function(w){w.splitRegex=this.createSplitterRegexp(w.regex,o)},this),this.regExps[t]=new RegExp("("+r.join(")|(")+")|($)",o)}}$setMaxTokenCount(e){Yi=e|0}$applyToken(e){var t=this.splitRegex.exec(e).slice(1),i=this.token.apply(this,t);if(typeof i=="string")return[{type:i,value:e}];for(var r=[],s=0,n=i.length;s<n;s++)t[s]&&(r[r.length]={type:i[s],value:t[s]});return r}$arrayTokens(e){if(!e)return[];var t=this.splitRegex.exec(e);if(!t)return"text";for(var i=[],r=this.tokenArray,s=0,n=r.length;s<n;s++)t[s+1]&&(i[i.length]={type:r[s],value:t[s+1]});return i}removeCapturingGroups(e){var t=e.replace(/\\.|\[(?:\\.|[^\\\]])*|\(\?[:=!<]|(\()/g,function(i,r){return r?"(?:":i});return t}createSplitterRegexp(e,t){if(e.indexOf("(?=")!=-1){var i=0,r=!1,s={};e.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(n,o,l,h,c,u){return r?r=c!="]":c?r=!0:h?(i==s.stack&&(s.end=u+1,s.stack=-1),i--):l&&(i++,l.length!=1&&(s.stack=i,s.start=u)),n}),s.end!=null&&/^\)*$/.test(e.substr(s.end))&&(e=e.substring(0,s.start)+e.substr(s.end))}return e.charAt(0)!="^"&&(e="^"+e),e.charAt(e.length-1)!="$"&&(e+="$"),new RegExp(e,(t||"").replace("g",""))}getLineTokens(e,t){if(t&&typeof t!="string"){var i=t.slice(0);t=i[0],t==="#tmp"&&(i.shift(),t=i.shift())}else var i=[];var r=t||"start",s=this.states[r];s||(r="start",s=this.states[r]);var n=this.matchMappings[r],o=this.regExps[r];o.lastIndex=0;for(var l,h=[],c=0,u=0,g={type:null,value:""};l=o.exec(e);){var w=n.defaultToken,d=null,m=l[0],f=o.lastIndex;if(f-m.length>c){var v=e.substring(c,f-m.length);g.type==w?g.value+=v:(g.type&&h.push(g),g={type:w,value:v})}for(var p=0;p<l.length-2;p++)if(l[p+1]!==void 0){d=s[n[p]],d.onMatch?w=d.onMatch(m,r,i,e):w=d.token,d.next&&(typeof d.next=="string"?r=d.next:r=d.next(r,i),s=this.states[r],s||(this.reportError("state doesn't exist",r),r="start",s=this.states[r]),n=this.matchMappings[r],c=f,o=this.regExps[r],o.lastIndex=f),d.consumeLineEnd&&(c=f);break}if(m){if(typeof w=="string")(!d||d.merge!==!1)&&g.type===w?g.value+=m:(g.type&&h.push(g),g={type:w,value:m});else if(w){g.type&&h.push(g),g={type:null,value:""};for(var p=0;p<w.length;p++)h.push(w[p])}}if(c==e.length)break;if(c=f,u++>Yi){for(u>2*e.length&&this.reportError("infinite loop with in ace tokenizer",{startState:t,line:e});c<e.length;)g.type&&h.push(g),g={value:e.substring(c,c+=500),type:"overflow"};r="start",i=[];break}}return g.type&&h.push(g),i.length>1&&i[0]!==r&&i.unshift("#tmp",r),{tokens:h,state:i.length?i:r}}};jr.prototype.reportError=ys;Gr.Tokenizer=jr;var Kr={};const bs=$i.deepCopy;var Ai;Ai=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}};(function(){this.addRules=function(t,i){if(!i){for(var r in t)this.$rules[r]=t[r];return}for(var r in t){for(var s=t[r],n=0;n<s.length;n++){var o=s[n];(o.next||o.onMatch)&&(typeof o.next=="string"&&o.next.indexOf(i)!==0&&(o.next=i+o.next),o.nextState&&o.nextState.indexOf(i)!==0&&(o.nextState=i+o.nextState))}this.$rules[i+r]=s}},this.getRules=function(){return this.$rules},this.embedRules=function(t,i,r,s,n){var o=typeof t=="function"?new t().getRules():t;if(s)for(var l=0;l<s.length;l++)s[l]=i+s[l];else{s=[];for(var h in o)s.push(i+h)}if(this.addRules(o,i),r)for(var c=Array.prototype[n?"push":"unshift"],l=0;l<s.length;l++)c.apply(this.$rules[s[l]],bs(r));this.$embeds||(this.$embeds=[]),this.$embeds.push(i)},this.getEmbeds=function(){return this.$embeds};var a=function(t,i){return(t!="start"||i.length)&&i.unshift(this.nextState,t),this.nextState},e=function(t,i){return i.shift(),i.shift()||"start"};this.normalizeRules=function(){var t=0,i=this.$rules;function r(s){var n=i[s];n.processed=!0;for(var o=0;o<n.length;o++){var l=n[o],h=null;Array.isArray(l)&&(h=l,l={}),!l.regex&&l.start&&(l.regex=l.start,l.next||(l.next=[]),l.next.push({defaultToken:l.token},{token:l.token+".end",regex:l.end||l.start,next:"pop"}),l.token=l.token+".start",l.push=!0);var c=l.next||l.push;if(c&&Array.isArray(c)){var u=l.stateName;u||(u=l.token,typeof u!="string"&&(u=u[0]||""),i[u]&&(u+=t++)),i[u]=c,l.next=u,r(u)}else c=="pop"&&(l.next=e);if(l.push&&(l.nextState=l.next||l.push,l.next=a,delete l.push),l.rules)for(var g in l.rules)i[g]?i[g].push&&i[g].push.apply(i[g],l.rules[g]):i[g]=l.rules[g];var w=typeof l=="string"?l:l.include;if(w&&(w==="$self"&&(w="start"),Array.isArray(w)?h=w.map(function(m){return i[m]}):h=i[w]),h){var d=[o,1].concat(h);l.noEscape&&(d=d.filter(function(m){return!m.next})),n.splice.apply(n,d),o--}l.keywordMap&&(l.token=this.createKeywordMapper(l.keywordMap,l.defaultToken||"text",l.caseInsensitive),delete l.defaultToken)}}Object.keys(i).forEach(r,this)},this.createKeywordMapper=function(t,i,r,s){var n=Object.create(null);return this.$keywordList=[],Object.keys(t).forEach(function(o){for(var l=t[o],h=l.split(s||"|"),c=h.length;c--;){var u=h[c];this.$keywordList.push(u),r&&(u=u.toLowerCase()),n[u]=o}},this),t=null,r?function(o){return n[o.toLowerCase()]||i}:function(o){return n[o]||i}},this.getKeywords=function(){return this.$keywords}}).call(Ai.prototype);Kr.TextHighlightRules=Ai;var Yr={},Qr={},Mi;Mi=function(){this.$behaviours={}};(function(){this.add=function(a,e,t){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[a]:this.$behaviours[a]={}}this.$behaviours[a][e]=t},this.addBehaviours=function(a){for(var e in a)for(var t in a[e])this.add(e,t,a[e][t])},this.remove=function(a){this.$behaviours&&this.$behaviours[a]&&delete this.$behaviours[a]},this.inherit=function(a,e){if(typeof a=="function")var t=new a().getBehaviours(e);else var t=a.getBehaviours(e);this.addBehaviours(t)},this.getBehaviours=function(a){if(a){for(var e={},t=0;t<a.length;t++)this.$behaviours[a[t]]&&(e[a[t]]=this.$behaviours[a[t]]);return e}else return this.$behaviours}}).call(Mi.prototype);Qr.Behaviour=Mi;var Ye={},Cs=ne.Range;let Ss=class{constructor(e,t,i){this.$session=e,this.$row=t,this.$rowTokens=e.getTokens(t);var r=e.getTokenAt(t,i);this.$tokenIndex=r?r.index:-1}stepBackward(){for(this.$tokenIndex-=1;this.$tokenIndex<0;){if(this.$row-=1,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]}stepForward(){this.$tokenIndex+=1;for(var e;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,e||(e=this.$session.getLength()),this.$row>=e)return this.$row=e-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]}getCurrentToken(){return this.$rowTokens[this.$tokenIndex]}getCurrentTokenRow(){return this.$row}getCurrentTokenColumn(){var e=this.$rowTokens,t=this.$tokenIndex,i=e[t].start;if(i!==void 0)return i;for(i=0;t>0;)t-=1,i+=e[t].value.length;return i}getCurrentTokenPosition(){return{row:this.$row,column:this.getCurrentTokenColumn()}}getCurrentTokenRange(){var e=this.$rowTokens[this.$tokenIndex],t=this.getCurrentTokenColumn();return new Cs(this.$row,t,this.$row,t+e.value.length)}};Ye.TokenIterator=Ss;var As=ae,Ms=Qr.Behaviour,Qi=Ye.TokenIterator,Ls=V,Zi=["text","paren.rparen","rparen","paren","punctuation.operator"],Ts=["text","paren.rparen","rparen","paren","punctuation.operator","comment"],X,Xe={},Xi={'"':'"',"'":"'"},Se=function(a){var e=-1;if(a.multiSelect&&(e=a.selection.index,Xe.rangeCount!=a.multiSelect.rangeCount&&(Xe={rangeCount:a.multiSelect.rangeCount})),Xe[e])return X=Xe[e];X=Xe[e]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}},wt=function(a,e,t,i){var r=a.end.row-a.start.row;return{text:t+e+i,selection:[0,a.start.column+1,r,a.end.column+(r?0:1)]}},Q;Q=function(a){a=a||{},this.add("braces","insertion",function(e,t,i,r,s){var n=i.getCursorPosition(),o=r.doc.getLine(n.row);if(s=="{"){Se(i);var l=i.getSelectionRange(),h=r.doc.getTextRange(l),c=r.getTokenAt(n.row,n.column);if(h!==""&&h!=="{"&&i.getWrapBehavioursEnabled())return wt(l,h,"{","}");if(c&&/(?:string)\.quasi|\.xml/.test(c.type))return[/tag\-(?:open|name)/,/attribute\-name/].some(p=>p.test(c.type))||/(string)\.quasi/.test(c.type)&&c.value[n.column-c.start-1]!=="$"?void 0:(Q.recordAutoInsert(i,r,"}"),{text:"{}",selection:[1,1]});if(Q.isSaneInsertion(i,r))return/[\]\}\)]/.test(o[n.column])||i.inMultiSelectMode||a.braces?(Q.recordAutoInsert(i,r,"}"),{text:"{}",selection:[1,1]}):(Q.recordMaybeInsert(i,r,"{"),{text:"{",selection:[1,1]})}else if(s=="}"){Se(i);var u=o.substring(n.column,n.column+1);if(u=="}"){var g=r.$findOpeningBracket("}",{column:n.column+1,row:n.row});if(g!==null&&Q.isAutoInsertedClosing(n,o,s))return Q.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}else if(s==`
`||s==`\r
`){Se(i);var w="";Q.isMaybeInsertedClosing(n,o)&&(w=Ls.stringRepeat("}",X.maybeInsertedBrackets),Q.clearMaybeInsertedClosing());var u=o.substring(n.column,n.column+1);if(u==="}"){var d=r.findMatchingBracket({row:n.row,column:n.column+1},"}");if(!d)return null;var m=this.$getIndent(r.getLine(d.row))}else if(w)var m=this.$getIndent(o);else{Q.clearMaybeInsertedClosing();return}var f=m+r.getTabString();return{text:`
`+f+`
`+m+w,selection:[1,f.length,1,f.length]}}else Q.clearMaybeInsertedClosing()}),this.add("braces","deletion",function(e,t,i,r,s){var n=r.doc.getTextRange(s);if(!s.isMultiLine()&&n=="{"){Se(i);var o=r.doc.getLine(s.start.row),l=o.substring(s.end.column,s.end.column+1);if(l=="}")return s.end.column++,s;X.maybeInsertedBrackets--}}),this.add("parens","insertion",function(e,t,i,r,s){if(s=="("){Se(i);var n=i.getSelectionRange(),o=r.doc.getTextRange(n);if(o!==""&&i.getWrapBehavioursEnabled())return wt(n,o,"(",")");if(Q.isSaneInsertion(i,r))return Q.recordAutoInsert(i,r,")"),{text:"()",selection:[1,1]}}else if(s==")"){Se(i);var l=i.getCursorPosition(),h=r.doc.getLine(l.row),c=h.substring(l.column,l.column+1);if(c==")"){var u=r.$findOpeningBracket(")",{column:l.column+1,row:l.row});if(u!==null&&Q.isAutoInsertedClosing(l,h,s))return Q.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("parens","deletion",function(e,t,i,r,s){var n=r.doc.getTextRange(s);if(!s.isMultiLine()&&n=="("){Se(i);var o=r.doc.getLine(s.start.row),l=o.substring(s.start.column+1,s.start.column+2);if(l==")")return s.end.column++,s}}),this.add("brackets","insertion",function(e,t,i,r,s){if(s=="["){Se(i);var n=i.getSelectionRange(),o=r.doc.getTextRange(n);if(o!==""&&i.getWrapBehavioursEnabled())return wt(n,o,"[","]");if(Q.isSaneInsertion(i,r))return Q.recordAutoInsert(i,r,"]"),{text:"[]",selection:[1,1]}}else if(s=="]"){Se(i);var l=i.getCursorPosition(),h=r.doc.getLine(l.row),c=h.substring(l.column,l.column+1);if(c=="]"){var u=r.$findOpeningBracket("]",{column:l.column+1,row:l.row});if(u!==null&&Q.isAutoInsertedClosing(l,h,s))return Q.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("brackets","deletion",function(e,t,i,r,s){var n=r.doc.getTextRange(s);if(!s.isMultiLine()&&n=="["){Se(i);var o=r.doc.getLine(s.start.row),l=o.substring(s.start.column+1,s.start.column+2);if(l=="]")return s.end.column++,s}}),this.add("string_dquotes","insertion",function(e,t,i,r,s){var n=r.$mode.$quotes||Xi;if(s.length==1&&n[s]){if(this.lineCommentStart&&this.lineCommentStart.indexOf(s)!=-1)return;Se(i);var o=s,l=i.getSelectionRange(),h=r.doc.getTextRange(l);if(h!==""&&(h.length!=1||!n[h])&&i.getWrapBehavioursEnabled())return wt(l,h,o,o);if(!h){var c=i.getCursorPosition(),u=r.doc.getLine(c.row),g=u.substring(c.column-1,c.column),w=u.substring(c.column,c.column+1),d=r.getTokenAt(c.row,c.column),m=r.getTokenAt(c.row,c.column+1);if(g=="\\"&&d&&/escape/.test(d.type))return null;var f=d&&/string|escape/.test(d.type),v=!m||/string|escape/.test(m.type),p;if(w==o)p=f!==v,p&&/string\.end/.test(m.type)&&(p=!1);else{if(f&&!v||f&&v)return null;var $=r.$mode.tokenRe;$.lastIndex=0;var C=$.test(g);$.lastIndex=0;var y=$.test(w),S=r.$mode.$pairQuotesAfter,M=S&&S[o]&&S[o].test(g);if(!M&&C||y||w&&!/[\s;,.})\]\\]/.test(w))return null;var E=u[c.column-2];if(g==o&&(E==o||$.test(E)))return null;p=!0}return{text:p?o+o:"",selection:[1,1]}}}}),this.add("string_dquotes","deletion",function(e,t,i,r,s){var n=r.$mode.$quotes||Xi,o=r.doc.getTextRange(s);if(!s.isMultiLine()&&n.hasOwnProperty(o)){Se(i);var l=r.doc.getLine(s.start.row),h=l.substring(s.start.column+1,s.start.column+2);if(h==o)return s.end.column++,s}}),a.closeDocComment!==!1&&this.add("doc comment end","insertion",function(e,t,i,r,s){if(e==="doc-start"&&(s===`
`||s===`\r
`)&&i.selection.isEmpty()){var n=i.getCursorPosition();if(n.column===0)return;for(var o=r.doc.getLine(n.row),l=r.doc.getLine(n.row+1),h=r.getTokens(n.row),c=0,u=0;u<h.length;u++){c+=h[u].value.length;var g=h[u];if(c>=n.column){if(c===n.column){if(!/\.doc/.test(g.type))return;if(/\*\//.test(g.value)){var w=h[u+1];if(!w||!/\.doc/.test(w.type))return}}var d=n.column-(c-g.value.length),m=g.value.indexOf("*/"),f=g.value.indexOf("/**",m>-1?m+2:0);if(f!==-1&&d>f&&d<f+3||m!==-1&&f!==-1&&d>=m&&d<=f||!/\.doc/.test(g.type))return;break}}var v=this.$getIndent(o);if(/\s*\*/.test(l))return/^\s*\*/.test(o)?{text:s+v+"* ",selection:[1,2+v.length,1,2+v.length]}:{text:s+v+" * ",selection:[1,3+v.length,1,3+v.length]};if(/\/\*\*/.test(o.substring(0,n.column)))return{text:s+v+" * "+s+" "+v+"*/",selection:[1,4+v.length,1,4+v.length]}}})};Q.isSaneInsertion=function(a,e){var t=a.getCursorPosition(),i=new Qi(e,t.row,t.column);if(!this.$matchTokenType(i.getCurrentToken()||"text",Zi)){if(/[)}\]]/.test(a.session.getLine(t.row)[t.column]))return!0;var r=new Qi(e,t.row,t.column+1);if(!this.$matchTokenType(r.getCurrentToken()||"text",Zi))return!1}return i.stepForward(),i.getCurrentTokenRow()!==t.row||this.$matchTokenType(i.getCurrentToken()||"text",Ts)};Q.$matchTokenType=function(a,e){return e.indexOf(a.type||a)>-1};Q.recordAutoInsert=function(a,e,t){var i=a.getCursorPosition(),r=e.doc.getLine(i.row);this.isAutoInsertedClosing(i,r,X.autoInsertedLineEnd[0])||(X.autoInsertedBrackets=0),X.autoInsertedRow=i.row,X.autoInsertedLineEnd=t+r.substr(i.column),X.autoInsertedBrackets++};Q.recordMaybeInsert=function(a,e,t){var i=a.getCursorPosition(),r=e.doc.getLine(i.row);this.isMaybeInsertedClosing(i,r)||(X.maybeInsertedBrackets=0),X.maybeInsertedRow=i.row,X.maybeInsertedLineStart=r.substr(0,i.column)+t,X.maybeInsertedLineEnd=r.substr(i.column),X.maybeInsertedBrackets++};Q.isAutoInsertedClosing=function(a,e,t){return X.autoInsertedBrackets>0&&a.row===X.autoInsertedRow&&t===X.autoInsertedLineEnd[0]&&e.substr(a.column)===X.autoInsertedLineEnd};Q.isMaybeInsertedClosing=function(a,e){return X.maybeInsertedBrackets>0&&a.row===X.maybeInsertedRow&&e.substr(a.column)===X.maybeInsertedLineEnd&&e.substr(0,a.column)==X.maybeInsertedLineStart};Q.popAutoInsertedClosing=function(){X.autoInsertedLineEnd=X.autoInsertedLineEnd.substr(1),X.autoInsertedBrackets--};Q.clearMaybeInsertedClosing=function(){X&&(X.maybeInsertedBrackets=0,X.maybeInsertedRow=-1)};As.inherits(Q,Ms);Yr.CstyleBehaviour=Q;var Zr={},$t=[48,9,8,25,5,0,2,25,48,0,11,0,5,0,6,22,2,30,2,457,5,11,15,4,8,0,2,0,18,116,2,1,3,3,9,0,2,2,2,0,2,19,2,82,2,138,2,4,3,155,12,37,3,0,8,38,10,44,2,0,2,1,2,1,2,0,9,26,6,2,30,10,7,61,2,9,5,101,2,7,3,9,2,18,3,0,17,58,3,100,15,53,5,0,6,45,211,57,3,18,2,5,3,11,3,9,2,1,7,6,2,2,2,7,3,1,3,21,2,6,2,0,4,3,3,8,3,1,3,3,9,0,5,1,2,4,3,11,16,2,2,5,5,1,3,21,2,6,2,1,2,1,2,1,3,0,2,4,5,1,3,2,4,0,8,3,2,0,8,15,12,2,2,8,2,2,2,21,2,6,2,1,2,4,3,9,2,2,2,2,3,0,16,3,3,9,18,2,2,7,3,1,3,21,2,6,2,1,2,4,3,8,3,1,3,2,9,1,5,1,2,4,3,9,2,0,17,1,2,5,4,2,2,3,4,1,2,0,2,1,4,1,4,2,4,11,5,4,4,2,2,3,3,0,7,0,15,9,18,2,2,7,2,2,2,22,2,9,2,4,4,7,2,2,2,3,8,1,2,1,7,3,3,9,19,1,2,7,2,2,2,22,2,9,2,4,3,8,2,2,2,3,8,1,8,0,2,3,3,9,19,1,2,7,2,2,2,22,2,15,4,7,2,2,2,3,10,0,9,3,3,9,11,5,3,1,2,17,4,23,2,8,2,0,3,6,4,0,5,5,2,0,2,7,19,1,14,57,6,14,2,9,40,1,2,0,3,1,2,0,3,0,7,3,2,6,2,2,2,0,2,0,3,1,2,12,2,2,3,4,2,0,2,5,3,9,3,1,35,0,24,1,7,9,12,0,2,0,2,0,5,9,2,35,5,19,2,5,5,7,2,35,10,0,58,73,7,77,3,37,11,42,2,0,4,328,2,3,3,6,2,0,2,3,3,40,2,3,3,32,2,3,3,6,2,0,2,3,3,14,2,56,2,3,3,66,5,0,33,15,17,84,13,619,3,16,2,25,6,74,22,12,2,6,12,20,12,19,13,12,2,2,2,1,13,51,3,29,4,0,5,1,3,9,34,2,3,9,7,87,9,42,6,69,11,28,4,11,5,11,11,39,3,4,12,43,5,25,7,10,38,27,5,62,2,28,3,10,7,9,14,0,89,75,5,9,18,8,13,42,4,11,71,55,9,9,4,48,83,2,2,30,14,230,23,280,3,5,3,37,3,5,3,7,2,0,2,0,2,0,2,30,3,52,2,6,2,0,4,2,2,6,4,3,3,5,5,12,6,2,2,6,67,1,20,0,29,0,14,0,17,4,60,12,5,0,4,11,18,0,5,0,3,9,2,0,4,4,7,0,2,0,2,0,2,3,2,10,3,3,6,4,5,0,53,1,2684,46,2,46,2,132,7,6,15,37,11,53,10,0,17,22,10,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,31,48,0,470,1,36,5,2,4,6,1,5,85,3,1,3,2,2,89,2,3,6,40,4,93,18,23,57,15,513,6581,75,20939,53,1164,68,45,3,268,4,27,21,31,3,13,13,1,2,24,9,69,11,1,38,8,3,102,3,1,111,44,25,51,13,68,12,9,7,23,4,0,5,45,3,35,13,28,4,64,15,10,39,54,10,13,3,9,7,22,4,1,5,66,25,2,227,42,2,1,3,9,7,11171,13,22,5,48,8453,301,3,61,3,105,39,6,13,4,6,11,2,12,2,4,2,0,2,1,2,1,2,107,34,362,19,63,3,53,41,11,5,15,17,6,13,1,25,2,33,4,2,134,20,9,8,25,5,0,2,25,12,88,4,5,3,5,3,5,3,2],Ji=0,di=[];for(var Je=0;Je<$t.length;Je+=2)di.push(Ji+=$t[Je]),$t[Je+1]&&di.push(45,Ji+=$t[Je+1]);Zr.wordChars=String.fromCharCode.apply(null,di);var yt=we,xs=Gr.Tokenizer,Es=Kr.TextHighlightRules,ks=Yr.CstyleBehaviour,qi=Zr,bt=V,er=Ye.TokenIterator,tr=ne.Range,Li;Li=function(){this.HighlightRules=Es};(function(){this.$defaultBehaviour=new ks,this.tokenRe=new RegExp("^["+qi.wordChars+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+qi.wordChars+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules(this.$highlightRuleConfig),this.$tokenizer=new xs(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(a,e,t,i){var r=e.doc,s=!0,n=!0,o=1/0,l=e.getTabSize(),h=!1;if(this.lineCommentStart){if(Array.isArray(this.lineCommentStart))var g=this.lineCommentStart.map(bt.escapeRegExp).join("|"),c=this.lineCommentStart[0];else var g=bt.escapeRegExp(this.lineCommentStart),c=this.lineCommentStart;g=new RegExp("^(\\s*)(?:"+g+") ?"),h=e.getUseSoftTabs();var m=function(E,R){var L=E.match(g);if(L){var x=L[1].length,b=L[0].length;!p(E,x,b)&&L[0][b-1]==" "&&b--,r.removeInLine(R,x,b)}},v=c+" ",d=function(E,R){(!s||/\S/.test(E))&&(p(E,o,o)?r.insertInLine({row:R,column:o},v):r.insertInLine({row:R,column:o},c))},f=function(E,R){return g.test(E)},p=function(E,R,L){for(var x=0;R--&&E.charAt(R)==" ";)x++;if(x%l!=0)return!1;for(var x=0;E.charAt(L++)==" ";)x++;return l>2?x%l!=l-1:x%l==0}}else{if(!this.blockComment)return!1;var c=this.blockComment.start,u=this.blockComment.end,g=new RegExp("^(\\s*)(?:"+bt.escapeRegExp(c)+")"),w=new RegExp("(?:"+bt.escapeRegExp(u)+")\\s*$"),d=function(y,S){f(y,S)||(!s||/\S/.test(y))&&(r.insertInLine({row:S,column:y.length},u),r.insertInLine({row:S,column:o},c))},m=function(y,S){var M;(M=y.match(w))&&r.removeInLine(S,y.length-M[0].length,y.length),(M=y.match(g))&&r.removeInLine(S,M[1].length,M[0].length)},f=function(y,S){if(g.test(y))return!0;for(var M=e.getTokens(S),E=0;E<M.length;E++)if(M[E].type==="comment")return!0}}function $(y){for(var S=t;S<=i;S++)y(r.getLine(S),S)}var C=1/0;$(function(y,S){var M=y.search(/\S/);M!==-1?(M<o&&(o=M),n&&!f(y,S)&&(n=!1)):C>y.length&&(C=y.length)}),o==1/0&&(o=C,s=!1,n=!1),h&&o%l!=0&&(o=Math.floor(o/l)*l),$(n?m:d)},this.toggleBlockComment=function(a,e,t,i){var r=this.blockComment;if(r){!r.start&&r[0]&&(r=r[0]);var s=new er(e,i.row,i.column),n=s.getCurrentToken();e.selection;var o=e.selection.toOrientedRange(),l,h;if(n&&/comment/.test(n.type)){for(var c,u;n&&/comment/.test(n.type);){var g=n.value.indexOf(r.start);if(g!=-1){var w=s.getCurrentTokenRow(),d=s.getCurrentTokenColumn()+g;c=new tr(w,d,w,d+r.start.length);break}n=s.stepBackward()}for(var s=new er(e,i.row,i.column),n=s.getCurrentToken();n&&/comment/.test(n.type);){var g=n.value.indexOf(r.end);if(g!=-1){var w=s.getCurrentTokenRow(),d=s.getCurrentTokenColumn()+g;u=new tr(w,d,w,d+r.end.length);break}n=s.stepForward()}u&&e.remove(u),c&&(e.remove(c),l=c.start.row,h=-r.start.length)}else h=r.start.length,l=t.start.row,e.insert(t.end,r.end),e.insert(t.start,r.start);o.start.row==l&&(o.start.column+=h),o.end.row==l&&(o.end.column+=h),e.selection.fromOrientedRange(o)}},this.getNextLineIndent=function(a,e,t){return this.$getIndent(e)},this.checkOutdent=function(a,e,t){return!1},this.autoOutdent=function(a,e,t){},this.$getIndent=function(a){return a.match(/^\s*/)[0]},this.createWorker=function(a){return null},this.createModeDelegates=function(a){this.$embeds=[],this.$modes={};for(let s in a)if(a[s]){var e=a[s],t=e.prototype.$id,i=yt.$modes[t];i||(yt.$modes[t]=i=new e),yt.$modes[s]||(yt.$modes[s]=i),this.$embeds.push(s),this.$modes[s]=i}var r=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"];for(let s=0;s<r.length;s++)(function(n){var o=r[s],l=n[o];n[r[s]]=function(){return this.$delegator(o,arguments,l)}})(this)},this.$delegator=function(a,e,t){var i=e[0]||"start";if(typeof i!="string"){if(Array.isArray(i[2])){var r=i[2][i[2].length-1],s=this.$modes[r];if(s)return s[a].apply(s,[i[1]].concat([].slice.call(e,1)))}i=i[0]||"start"}for(var n=0;n<this.$embeds.length;n++)if(this.$modes[this.$embeds[n]]){var o=i.split(this.$embeds[n]);if(!o[0]&&o[1]){e[0]=o[1];var s=this.$modes[this.$embeds[n]];return s[a].apply(s,e)}}var l=t.apply(this,e);return t?l:void 0},this.transformAction=function(a,e,t,i,r){if(this.$behaviour){var s=this.$behaviour.getBehaviours();for(var n in s)if(s[n][e]){var o=s[n][e].apply(this,arguments);if(o)return o}}},this.getKeywords=function(a){if(!this.completionKeywords){var e=this.$tokenizer.rules,t=[];for(var i in e)for(var r=e[i],s=0,n=r.length;s<n;s++)if(typeof r[s].token=="string")/keyword|support|storage/.test(r[s].token)&&t.push(r[s].regex);else if(typeof r[s].token=="object"){for(var o=0,l=r[s].token.length;o<l;o++)if(/keyword|support|storage/.test(r[s].token[o])){var i=r[s].regex.match(/\(.+?\)/g)[o];t.push(i.substr(1,i.length-2))}}this.completionKeywords=t}return a?t.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(a,e,t,i){var r=this.$keywordList||this.$createKeywordList();return r.map(function(s){return{name:s,value:s,score:0,meta:"keyword"}})},this.$id="ace/mode/text"}).call(Li.prototype);Vr.Mode=Li;var Xr={},Ct=ee;let Rs=class{constructor(e){this.session=e,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeFold",this.updateOnFold),this.session.on("changeEditor",this.$onChangeEditor)}getRowLength(e){var t;return this.lineWidgets?t=this.lineWidgets[e]&&this.lineWidgets[e].rowCount||0:t=0,!this.$useWrapMode||!this.$wrapData[e]?1+t:this.$wrapData[e].length+1+t}$getWidgetScreenLength(){var e=0;return this.lineWidgets.forEach(function(t){t&&t.rowCount&&!t.hidden&&(e+=t.rowCount)}),e}$onChangeEditor(e){this.attach(e.editor)}attach(e){e&&e.widgetManager&&e.widgetManager!=this&&e.widgetManager.detach(),this.editor!=e&&(this.detach(),this.editor=e,e&&(e.widgetManager=this,e.renderer.on("beforeRender",this.measureWidgets),e.renderer.on("afterRender",this.renderWidgets)))}detach(e){var t=this.editor;if(t){this.editor=null,t.widgetManager=null,t.renderer.off("beforeRender",this.measureWidgets),t.renderer.off("afterRender",this.renderWidgets);var i=this.session.lineWidgets;i&&i.forEach(function(r){r&&r.el&&r.el.parentNode&&(r._inDocument=!1,r.el.parentNode.removeChild(r.el))})}}updateOnFold(e,t){var i=t.lineWidgets;if(!(!i||!e.action)){for(var r=e.data,s=r.start.row,n=r.end.row,o=e.action=="add",l=s+1;l<n;l++)i[l]&&(i[l].hidden=o);i[n]&&(o?i[s]?i[n].hidden=o:i[s]=i[n]:(i[s]==i[n]&&(i[s]=void 0),i[n].hidden=o))}}updateOnChange(e){var t=this.session.lineWidgets;if(t){var i=e.start.row,r=e.end.row-i;if(r!==0)if(e.action=="remove"){var s=t.splice(i+1,r);!t[i]&&s[s.length-1]&&(t[i]=s.pop()),s.forEach(function(o){o&&this.removeLineWidget(o)},this),this.$updateRows()}else{var n=new Array(r);t[i]&&t[i].column!=null&&e.start.column>t[i].column&&i++,n.unshift(i,0),t.splice.apply(t,n),this.$updateRows()}}}$updateRows(){var e=this.session.lineWidgets;if(e){var t=!0;e.forEach(function(i,r){if(i)for(t=!1,i.row=r;i.$oldWidget;)i.$oldWidget.row=r,i=i.$oldWidget}),t&&(this.session.lineWidgets=null)}}$registerLineWidget(e){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()));var t=this.session.lineWidgets[e.row];return t&&(e.$oldWidget=t,t.el&&t.el.parentNode&&(t.el.parentNode.removeChild(t.el),t._inDocument=!1)),this.session.lineWidgets[e.row]=e,e}addLineWidget(e){if(this.$registerLineWidget(e),e.session=this.session,!this.editor)return e;var t=this.editor.renderer;e.html&&!e.el&&(e.el=Ct.createElement("div"),e.el.innerHTML=e.html),e.text&&!e.el&&(e.el=Ct.createElement("div"),e.el.textContent=e.text),e.el&&(Ct.addCssClass(e.el,"ace_lineWidgetContainer"),e.className&&Ct.addCssClass(e.el,e.className),e.el.style.position="absolute",e.el.style.zIndex="5",t.container.appendChild(e.el),e._inDocument=!0,e.coverGutter||(e.el.style.zIndex="3"),e.pixelHeight==null&&(e.pixelHeight=e.el.offsetHeight)),e.rowCount==null&&(e.rowCount=e.pixelHeight/t.layerConfig.lineHeight);var i=this.session.getFoldAt(e.row,0);if(e.$fold=i,i){var r=this.session.lineWidgets;e.row==i.end.row&&!r[i.start.row]?r[i.start.row]=e:e.hidden=!0}return this.session._emit("changeFold",{data:{start:{row:e.row}}}),this.$updateRows(),this.renderWidgets(null,t),this.onWidgetChanged(e),e}removeLineWidget(e){if(e._inDocument=!1,e.session=null,e.el&&e.el.parentNode&&e.el.parentNode.removeChild(e.el),e.editor&&e.editor.destroy)try{e.editor.destroy()}catch{}if(this.session.lineWidgets){var t=this.session.lineWidgets[e.row];if(t==e)this.session.lineWidgets[e.row]=e.$oldWidget,e.$oldWidget&&this.onWidgetChanged(e.$oldWidget);else for(;t;){if(t.$oldWidget==e){t.$oldWidget=e.$oldWidget;break}t=t.$oldWidget}}this.session._emit("changeFold",{data:{start:{row:e.row}}}),this.$updateRows()}getWidgetsAtRow(e){for(var t=this.session.lineWidgets,i=t&&t[e],r=[];i;)r.push(i),i=i.$oldWidget;return r}onWidgetChanged(e){this.session._changedWidgets.push(e),this.editor&&this.editor.renderer.updateFull()}measureWidgets(e,t){var i=this.session._changedWidgets,r=t.layerConfig;if(!(!i||!i.length)){for(var s=1/0,n=0;n<i.length;n++){var o=i[n];if(!(!o||!o.el)&&o.session==this.session){if(!o._inDocument){if(this.session.lineWidgets[o.row]!=o)continue;o._inDocument=!0,t.container.appendChild(o.el)}o.h=o.el.offsetHeight,o.fixedWidth||(o.w=o.el.offsetWidth,o.screenWidth=Math.ceil(o.w/r.characterWidth));var l=o.h/r.lineHeight;o.coverLine&&(l-=this.session.getRowLineCount(o.row),l<0&&(l=0)),o.rowCount!=l&&(o.rowCount=l,o.row<s&&(s=o.row))}}s!=1/0&&(this.session._emit("changeFold",{data:{start:{row:s}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}}renderWidgets(e,t){var i=t.layerConfig,r=this.session.lineWidgets;if(r){for(var s=Math.min(this.firstRow,i.firstRow),n=Math.max(this.lastRow,i.lastRow,r.length);s>0&&!r[s];)s--;this.firstRow=i.firstRow,this.lastRow=i.lastRow,t.$cursorLayer.config=i;for(var o=s;o<=n;o++){var l=r[o];if(!(!l||!l.el)){if(l.hidden){l.el.style.top=-100-(l.pixelHeight||0)+"px";continue}l._inDocument||(l._inDocument=!0,t.container.appendChild(l.el));var h=t.$cursorLayer.getPixelPosition({row:o,column:0},!0).top;l.coverLine||(h+=i.lineHeight*this.session.getRowLineCount(l.row)),l.el.style.top=h-i.offset+"px";var c=l.coverGutter?0:t.gutterWidth;l.fixedWidth||(c-=t.scrollLeft),l.el.style.left=c+"px",l.fullWidth&&l.screenWidth&&(l.el.style.minWidth=i.width+2*i.padding+"px"),l.fixedWidth?l.el.style.right=t.scrollBar.getWidth()+"px":l.el.style.right=""}}}}};Xr.LineWidgets=Rs;var Jr={},qr={};qr.applyDelta=function(a,e,t){var i=e.start.row,r=e.start.column,s=a[i]||"";switch(e.action){case"insert":var n=e.lines;if(n.length===1)a[i]=s.substring(0,r)+e.lines[0]+s.substring(r);else{var o=[i,1].concat(e.lines);a.splice.apply(a,o),a[i]=s.substring(0,r)+a[i],a[i+e.lines.length-1]+=s.substring(r)}break;case"remove":var l=e.end.column,h=e.end.row;i===h?a[i]=s.substring(0,r)+s.substring(l):a.splice(i,h-i+1,s.substring(0,r)+a[h].substring(l));break}};var en={},Is=ae,Ds=fe.EventEmitter;let Ti=class{constructor(e,t,i){this.$onChange=this.onChange.bind(this),this.attach(e),typeof t!="number"?this.setPosition(t.row,t.column):this.setPosition(t,i)}getPosition(){return this.$clipPositionToDocument(this.row,this.column)}getDocument(){return this.document}onChange(e){if(!(e.start.row==e.end.row&&e.start.row!=this.row)&&!(e.start.row>this.row)){var t=_s(e,{row:this.row,column:this.column},this.$insertRight);this.setPosition(t.row,t.column,!0)}}setPosition(e,t,i){var r;if(i?r={row:e,column:t}:r=this.$clipPositionToDocument(e,t),!(this.row==r.row&&this.column==r.column)){var s={row:this.row,column:this.column};this.row=r.row,this.column=r.column,this._signal("change",{old:s,value:r})}}detach(){this.document.off("change",this.$onChange)}attach(e){this.document=e||this.document,this.document.on("change",this.$onChange)}$clipPositionToDocument(e,t){var i={};return e>=this.document.getLength()?(i.row=Math.max(0,this.document.getLength()-1),i.column=this.document.getLine(i.row).length):e<0?(i.row=0,i.column=0):(i.row=e,i.column=Math.min(this.document.getLine(i.row).length,Math.max(0,t))),t<0&&(i.column=0),i}};Ti.prototype.$insertRight=!1;Is.implement(Ti.prototype,Ds);function ir(a,e,t){var i=t?a.column<=e.column:a.column<e.column;return a.row<e.row||a.row==e.row&&i}function _s(a,e,t){var i=a.action=="insert",r=(i?1:-1)*(a.end.row-a.start.row),s=(i?1:-1)*(a.end.column-a.start.column),n=a.start,o=i?n:a.end;return ir(e,n,t)?{row:e.row,column:e.column}:ir(o,e,!t)?{row:e.row+r,column:e.column+(e.row==o.row?s:0)}:{row:n.row,column:n.column}}en.Anchor=Ti;var Ns=ae,Os=qr.applyDelta,Fs=fe.EventEmitter,qe=ne.Range,Ws=en.Anchor;let Gt=class{constructor(e){this.$lines=[""],e.length===0?this.$lines=[""]:Array.isArray(e)?this.insertMergedLines({row:0,column:0},e):this.insert({row:0,column:0},e)}setValue(e){var t=this.getLength()-1;this.remove(new qe(0,0,t,this.getLine(t).length)),this.insert({row:0,column:0},e||"")}getValue(){return this.getAllLines().join(this.getNewLineCharacter())}createAnchor(e,t){return new Ws(this,e,t)}$detectNewLine(e){var t=e.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=t?t[1]:`
`,this._signal("changeNewLineMode")}getNewLineCharacter(){switch(this.$newLineMode){case"windows":return`\r
`;case"unix":return`
`;default:return this.$autoNewLine||`
`}}setNewLineMode(e){this.$newLineMode!==e&&(this.$newLineMode=e,this._signal("changeNewLineMode"))}getNewLineMode(){return this.$newLineMode}isNewLine(e){return e==`\r
`||e=="\r"||e==`
`}getLine(e){return this.$lines[e]||""}getLines(e,t){return this.$lines.slice(e,t+1)}getAllLines(){return this.getLines(0,this.getLength())}getLength(){return this.$lines.length}getTextRange(e){return this.getLinesForRange(e).join(this.getNewLineCharacter())}getLinesForRange(e){var t;if(e.start.row===e.end.row)t=[this.getLine(e.start.row).substring(e.start.column,e.end.column)];else{t=this.getLines(e.start.row,e.end.row),t[0]=(t[0]||"").substring(e.start.column);var i=t.length-1;e.end.row-e.start.row==i&&(t[i]=t[i].substring(0,e.end.column))}return t}insertLines(e,t){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(e,t)}removeLines(e,t){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(e,t)}insertNewLine(e){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(e,["",""])}insert(e,t){return this.getLength()<=1&&this.$detectNewLine(t),this.insertMergedLines(e,this.$split(t))}insertInLine(e,t){var i=this.clippedPos(e.row,e.column),r=this.pos(e.row,e.column+t.length);return this.applyDelta({start:i,end:r,action:"insert",lines:[t]},!0),this.clonePos(r)}clippedPos(e,t){var i=this.getLength();e===void 0?e=i:e<0?e=0:e>=i&&(e=i-1,t=void 0);var r=this.getLine(e);return t==null&&(t=r.length),t=Math.min(Math.max(t,0),r.length),{row:e,column:t}}clonePos(e){return{row:e.row,column:e.column}}pos(e,t){return{row:e,column:t}}$clipPosition(e){var t=this.getLength();return e.row>=t?(e.row=Math.max(0,t-1),e.column=this.getLine(t-1).length):(e.row=Math.max(0,e.row),e.column=Math.min(Math.max(e.column,0),this.getLine(e.row).length)),e}insertFullLines(e,t){e=Math.min(Math.max(e,0),this.getLength());var i=0;e<this.getLength()?(t=t.concat([""]),i=0):(t=[""].concat(t),e--,i=this.$lines[e].length),this.insertMergedLines({row:e,column:i},t)}insertMergedLines(e,t){var i=this.clippedPos(e.row,e.column),r={row:i.row+t.length-1,column:(t.length==1?i.column:0)+t[t.length-1].length};return this.applyDelta({start:i,end:r,action:"insert",lines:t}),this.clonePos(r)}remove(e){var t=this.clippedPos(e.start.row,e.start.column),i=this.clippedPos(e.end.row,e.end.column);return this.applyDelta({start:t,end:i,action:"remove",lines:this.getLinesForRange({start:t,end:i})}),this.clonePos(t)}removeInLine(e,t,i){var r=this.clippedPos(e,t),s=this.clippedPos(e,i);return this.applyDelta({start:r,end:s,action:"remove",lines:this.getLinesForRange({start:r,end:s})},!0),this.clonePos(r)}removeFullLines(e,t){e=Math.min(Math.max(0,e),this.getLength()-1),t=Math.min(Math.max(0,t),this.getLength()-1);var i=t==this.getLength()-1&&e>0,r=t<this.getLength()-1,s=i?e-1:e,n=i?this.getLine(s).length:0,o=r?t+1:t,l=r?0:this.getLine(o).length,h=new qe(s,n,o,l),c=this.$lines.slice(e,t+1);return this.applyDelta({start:h.start,end:h.end,action:"remove",lines:this.getLinesForRange(h)}),c}removeNewLine(e){e<this.getLength()-1&&e>=0&&this.applyDelta({start:this.pos(e,this.getLine(e).length),end:this.pos(e+1,0),action:"remove",lines:["",""]})}replace(e,t){if(e instanceof qe||(e=qe.fromPoints(e.start,e.end)),t.length===0&&e.isEmpty())return e.start;if(t==this.getTextRange(e))return e.end;this.remove(e);var i;return t?i=this.insert(e.start,t):i=e.start,i}applyDeltas(e){for(var t=0;t<e.length;t++)this.applyDelta(e[t])}revertDeltas(e){for(var t=e.length-1;t>=0;t--)this.revertDelta(e[t])}applyDelta(e,t){var i=e.action=="insert";(i?e.lines.length<=1&&!e.lines[0]:!qe.comparePoints(e.start,e.end))||(i&&e.lines.length>2e4?this.$splitAndapplyLargeDelta(e,2e4):(Os(this.$lines,e,t),this._signal("change",e)))}$safeApplyDelta(e){var t=this.$lines.length;(e.action=="remove"&&e.start.row<t&&e.end.row<t||e.action=="insert"&&e.start.row<=t)&&this.applyDelta(e)}$splitAndapplyLargeDelta(e,t){for(var i=e.lines,r=i.length-t+1,s=e.start.row,n=e.start.column,o=0,l=0;o<r;o=l){l+=t-1;var h=i.slice(o,l);h.push(""),this.applyDelta({start:this.pos(s+o,n),end:this.pos(s+l,n=0),action:e.action,lines:h},!0)}e.lines=i.slice(o),e.start.row=s+o,e.start.column=n,this.applyDelta(e,!0)}revertDelta(e){this.$safeApplyDelta({start:this.clonePos(e.start),end:this.clonePos(e.end),action:e.action=="insert"?"remove":"insert",lines:e.lines.slice()})}indexToPosition(e,t){for(var i=this.$lines||this.getAllLines(),r=this.getNewLineCharacter().length,s=t||0,n=i.length;s<n;s++)if(e-=i[s].length+r,e<0)return{row:s,column:e+i[s].length+r};return{row:n-1,column:e+i[n-1].length+r}}positionToIndex(e,t){for(var i=this.$lines||this.getAllLines(),r=this.getNewLineCharacter().length,s=0,n=Math.min(e.row,i.length),o=t||0;o<n;++o)s+=i[o].length+r;return s+e.column}$split(e){return e.split(/\r\n|\r|\n/)}};Gt.prototype.$autoNewLine="";Gt.prototype.$newLineMode="auto";Ns.implement(Gt.prototype,Fs);Jr.Document=Gt;var tn={},Hs=ae,Bs=fe.EventEmitter;let rn=class{constructor(e,t){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=e;var i=this;this.$worker=function(){if(i.running){for(var r=new Date,s=i.currentLine,n=-1,o=i.doc,l=s;i.lines[s];)s++;var h=o.getLength(),c=0;for(i.running=!1;s<h;){i.$tokenizeRow(s),n=s;do s++;while(i.lines[s]);if(c++,c%5===0&&new Date-r>20){i.running=setTimeout(i.$worker,20);break}}i.currentLine=s,n==-1&&(n=s),l<=n&&i.fireUpdateEvent(l,n)}}}setTokenizer(e){this.tokenizer=e,this.lines=[],this.states=[],this.start(0)}setDocument(e){this.doc=e,this.lines=[],this.states=[],this.stop()}fireUpdateEvent(e,t){var i={first:e,last:t};this._signal("update",{data:i})}start(e){this.currentLine=Math.min(e||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)}scheduleStart(){this.running||(this.running=setTimeout(this.$worker,700))}$updateOnChange(e){var t=e.start.row,i=e.end.row-t;if(i===0)this.lines[t]=null;else if(e.action=="remove")this.lines.splice(t,i+1,null),this.states.splice(t,i+1,null);else{var r=Array(i+1);r.unshift(t,1),this.lines.splice.apply(this.lines,r),this.states.splice.apply(this.states,r)}this.currentLine=Math.min(t,this.currentLine,this.doc.getLength()),this.stop()}stop(){this.running&&clearTimeout(this.running),this.running=!1}getTokens(e){return this.lines[e]||this.$tokenizeRow(e)}getState(e){return this.currentLine==e&&this.$tokenizeRow(e),this.states[e]||"start"}$tokenizeRow(e){var t=this.doc.getLine(e),i=this.states[e-1],r=this.tokenizer.getLineTokens(t,i,e);return this.states[e]+""!=r.state+""?(this.states[e]=r.state,this.lines[e+1]=null,this.currentLine>e+1&&(this.currentLine=e+1)):this.currentLine==e&&(this.currentLine=e+1),this.lines[e]=r.tokens}cleanup(){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.removeAllListeners()}};Hs.implement(rn.prototype,Bs);tn.BackgroundTokenizer=rn;var nn={},zs=V,Ps=ne.Range;let sn=class{constructor(e,t,i="text"){this.setRegexp(e),this.clazz=t,this.type=i}setRegexp(e){this.regExp+""!=e+""&&(this.regExp=e,this.cache=[])}update(e,t,i,r){if(this.regExp)for(var s=r.firstRow,n=r.lastRow,o={},l=s;l<=n;l++){var h=this.cache[l];h==null&&(h=zs.getMatchOffsets(i.getLine(l),this.regExp),h.length>this.MAX_RANGES&&(h=h.slice(0,this.MAX_RANGES)),h=h.map(function(w){return new Ps(l,w.offset,l,w.offset+w.length)}),this.cache[l]=h.length?h:"");for(var c=h.length;c--;){var u=h[c].toScreenRange(i),g=u.toString();o[g]||(o[g]=!0,t.drawSingleLineMarker(e,u,this.clazz,r))}}}};sn.prototype.MAX_RANGES=500;nn.SearchHighlight=sn;var xi={};let Ie=class{constructor(){this.$keepRedoStack,this.$maxRev=0,this.$fromUndo=!1,this.$undoDepth=1/0,this.reset()}addSession(e){this.$session=e}add(e,t,i){if(!this.$fromUndo&&e!=this.$lastDelta){if(this.$keepRedoStack||(this.$redoStack.length=0),t===!1||!this.lastDeltas){this.lastDeltas=[];var r=this.$undoStack.length;r>this.$undoDepth-1&&this.$undoStack.splice(0,r-this.$undoDepth+1),this.$undoStack.push(this.lastDeltas),e.id=this.$rev=++this.$maxRev}(e.action=="remove"||e.action=="insert")&&(this.$lastDelta=e),this.lastDeltas.push(e)}}addSelection(e,t){this.selections.push({value:e,rev:t||this.$rev})}startNewGroup(){return this.lastDeltas=null,this.$rev}markIgnored(e,t){t==null&&(t=this.$rev+1);for(var i=this.$undoStack,r=i.length;r--;){var s=i[r][0];if(s.id<=e)break;s.id<t&&(s.ignore=!0)}this.lastDeltas=null}getSelection(e,t){for(var i=this.selections,r=i.length;r--;){var s=i[r];if(s.rev<e)return t&&(s=i[r+1]),s}}getRevision(){return this.$rev}getDeltas(e,t){t==null&&(t=this.$rev+1);for(var i=this.$undoStack,r=null,s=0,n=i.length;n--;){var o=i[n][0];if(o.id<t&&!r&&(r=n+1),o.id<=e){s=n+1;break}}return i.slice(s,r)}getChangedRanges(e,t){t==null&&(t=this.$rev+1)}getChangedLines(e,t){t==null&&(t=this.$rev+1)}undo(e,t){this.lastDeltas=null;var i=this.$undoStack;if(Us(i,i.length)){e||(e=this.$session),this.$redoStackBaseRev!==this.$rev&&this.$redoStack.length&&(this.$redoStack=[]),this.$fromUndo=!0;var r=i.pop(),s=null;return r&&(s=e.undoChanges(r,t),this.$redoStack.push(r),this.$syncRev()),this.$fromUndo=!1,s}}redo(e,t){if(this.lastDeltas=null,e||(e=this.$session),this.$fromUndo=!0,this.$redoStackBaseRev!=this.$rev){var i=this.getDeltas(this.$redoStackBaseRev,this.$rev+1);Ys(this.$redoStack,i),this.$redoStackBaseRev=this.$rev,this.$redoStack.forEach(function(n){n[0].id=++this.$maxRev},this)}var r=this.$redoStack.pop(),s=null;return r&&(s=e.redoChanges(r,t),this.$undoStack.push(r),this.$syncRev()),this.$fromUndo=!1,s}$syncRev(){var e=this.$undoStack,t=e[e.length-1],i=t&&t[0].id||0;this.$redoStackBaseRev=i,this.$rev=i}reset(){this.lastDeltas=null,this.$lastDelta=null,this.$undoStack=[],this.$redoStack=[],this.$rev=0,this.mark=0,this.$redoStackBaseRev=this.$rev,this.selections=[]}canUndo(){return this.$undoStack.length>0}canRedo(){return this.$redoStack.length>0}bookmark(e){e==null&&(e=this.$rev),this.mark=e}isAtBookmark(){return this.$rev===this.mark}toJSON(){return{$redoStack:this.$redoStack,$undoStack:this.$undoStack}}fromJSON(e){this.reset(),this.$undoStack=e.$undoStack,this.$redoStack=e.$redoStack}$prettyPrint(e){return e?Dt(e):Dt(this.$undoStack)+`
---
`+Dt(this.$redoStack)}};Ie.prototype.hasUndo=Ie.prototype.canUndo;Ie.prototype.hasRedo=Ie.prototype.canRedo;Ie.prototype.isClean=Ie.prototype.isAtBookmark;Ie.prototype.markClean=Ie.prototype.bookmark;function Us(a,e){for(var t=e;t--;){var i=a[t];if(i&&!i[0].ignore){for(;t<e-1;){var r=Gs(a[t],a[t+1]);a[t]=r[0],a[t+1]=r[1],t++}return!0}}}var Ot=ne.Range,ge=Ot.comparePoints;Ot.comparePoints;function Ft(a){return{row:a.row,column:a.column}}function Vs(a){return{start:Ft(a.start),end:Ft(a.end),action:a.action,lines:a.lines.slice()}}function Dt(a){if(a=a||this,Array.isArray(a))return a.map(Dt).join(`
`);var e="";return a.action?(e=a.action=="insert"?"+":"-",e+="["+a.lines+"]"):a.value&&(Array.isArray(a.value)?e=a.value.map(Jt).join(`
`):e=Jt(a.value)),a.start&&(e+=Jt(a)),(a.id||a.rev)&&(e+="	("+(a.id||a.rev)+")"),e}function Jt(a){return a.start.row+":"+a.start.column+"=>"+a.end.row+":"+a.end.column}function rr(a,e){var t=a.action=="insert",i=e.action=="insert";if(t&&i)if(ge(e.start,a.end)>=0)se(e,a,-1);else if(ge(e.start,a.start)<=0)se(a,e,1);else return null;else if(t&&!i)if(ge(e.start,a.end)>=0)se(e,a,-1);else if(ge(e.end,a.start)<=0)se(a,e,-1);else return null;else if(!t&&i)if(ge(e.start,a.start)>=0)se(e,a,1);else if(ge(e.start,a.start)<=0)se(a,e,1);else return null;else if(!t&&!i)if(ge(e.start,a.start)>=0)se(e,a,1);else if(ge(e.end,a.start)<=0)se(a,e,-1);else return null;return[e,a]}function Gs(a,e){for(var t=a.length;t--;)for(var i=0;i<e.length;i++)if(!rr(a[t],e[i])){for(;t<a.length;){for(;i--;)rr(e[i],a[t]);i=e.length,t++}return[a,e]}return a.selectionBefore=e.selectionBefore=a.selectionAfter=e.selectionAfter=null,[e,a]}function js(a,e){var t=a.action=="insert",i=e.action=="insert";if(t&&i)ge(a.start,e.start)<0?se(e,a,1):se(a,e,1);else if(t&&!i)ge(a.start,e.end)>=0?se(a,e,-1):(ge(a.start,e.start)<=0||se(a,Ot.fromPoints(e.start,a.start),-1),se(e,a,1));else if(!t&&i)ge(e.start,a.end)>=0?se(e,a,-1):(ge(e.start,a.start)<=0||se(e,Ot.fromPoints(a.start,e.start),-1),se(a,e,1));else if(!t&&!i)if(ge(e.start,a.end)>=0)se(e,a,-1);else if(ge(e.end,a.start)<=0)se(a,e,-1);else{var r,s;return ge(a.start,e.start)<0&&(r=a,a=nr(a,e.start)),ge(a.end,e.end)>0&&(s=nr(a,e.end)),gi(e.end,a.start,a.end,-1),s&&!r&&(a.lines=s.lines,a.start=s.start,a.end=s.end,s=a),[e,r,s].filter(Boolean)}return[e,a]}function se(a,e,t){gi(a.start,e.start,e.end,t),gi(a.end,e.start,e.end,t)}function gi(a,e,t,i){a.row==(i==1?e:t).row&&(a.column+=i*(t.column-e.column)),a.row+=i*(t.row-e.row)}function nr(a,e){var t=a.lines,i=a.end;a.end=Ft(e);var r=a.end.row-a.start.row,s=t.splice(r,t.length),n=r?e.column:e.column-a.start.column;t.push(s[0].substring(0,n)),s[0]=s[0].substr(n);var o={start:Ft(e),end:i,lines:s,action:a.action};return o}function Ks(a,e){e=Vs(e);for(var t=a.length;t--;){for(var i=a[t],r=0;r<i.length;r++){var s=i[r],n=js(s,e);e=n[0],n.length!=2&&(n[2]?(i.splice(r+1,1,n[1],n[2]),r++):n[1]||(i.splice(r,1),r--))}i.length||a.splice(t,1)}return a}function Ys(a,e){for(var t=0;t<e.length;t++)for(var i=e[t],r=0;r<i.length;r++)Ks(a,i[r])}xi.UndoManager=Ie;var qt={},ei={},sr;function Qs(){if(sr)return ei;sr=1;var a=ne.Range;class e{constructor(i,r){this.foldData=i,Array.isArray(r)?this.folds=r:r=this.folds=[r];var s=r[r.length-1];this.range=new a(r[0].start.row,r[0].start.column,s.end.row,s.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(n){n.setFoldLine(this)},this)}shiftRow(i){this.start.row+=i,this.end.row+=i,this.folds.forEach(function(r){r.start.row+=i,r.end.row+=i})}addFold(i){if(i.sameRow){if(i.start.row<this.startRow||i.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(i),this.folds.sort(function(r,s){return-r.range.compareEnd(s.start.row,s.start.column)}),this.range.compareEnd(i.start.row,i.start.column)>0?(this.end.row=i.end.row,this.end.column=i.end.column):this.range.compareStart(i.end.row,i.end.column)<0&&(this.start.row=i.start.row,this.start.column=i.start.column)}else if(i.start.row==this.end.row)this.folds.push(i),this.end.row=i.end.row,this.end.column=i.end.column;else if(i.end.row==this.start.row)this.folds.unshift(i),this.start.row=i.start.row,this.start.column=i.start.column;else throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");i.foldLine=this}containsRow(i){return i>=this.start.row&&i<=this.end.row}walk(i,r,s){var n=0,o=this.folds,l,h,c,u=!0;r==null&&(r=this.end.row,s=this.end.column);for(var g=0;g<o.length;g++){if(l=o[g],h=l.range.compareStart(r,s),h==-1){i(null,r,s,n,u);return}if(c=i(null,l.start.row,l.start.column,n,u),c=!c&&i(l.placeholder,l.start.row,l.start.column,n),c||h===0)return;u=!l.sameRow,n=l.end.column}i(null,r,s,n,u)}getNextFoldTo(i,r){for(var s,n,o=0;o<this.folds.length;o++){if(s=this.folds[o],n=s.range.compareEnd(i,r),n==-1)return{fold:s,kind:"after"};if(n===0)return{fold:s,kind:"inside"}}return null}addRemoveChars(i,r,s){var n=this.getNextFoldTo(i,r),o,l;if(n){if(o=n.fold,n.kind=="inside"&&o.start.column!=r&&o.start.row!=i)window.console&&window.console.log(i,r,o);else if(o.start.row==i){l=this.folds;var h=l.indexOf(o);for(h===0&&(this.start.column+=s),h;h<l.length;h++){if(o=l[h],o.start.column+=s,!o.sameRow)return;o.end.column+=s}this.end.column+=s}}}split(i,r){var s=this.getNextFoldTo(i,r);if(!s||s.kind=="inside")return null;var n=s.fold,o=this.folds,l=this.foldData,h=o.indexOf(n),c=o[h-1];this.end.row=c.end.row,this.end.column=c.end.column,o=o.splice(h,o.length-h);var u=new e(l,o);return l.splice(l.indexOf(this)+1,0,u),u}merge(i){for(var r=i.folds,s=0;s<r.length;s++)this.addFold(r[s]);var n=this.foldData;n.splice(n.indexOf(i),1)}toString(){var i=[this.range.toString()+": ["];return this.folds.forEach(function(r){i.push("  "+r.toString())}),i.push("]"),i.join(`
`)}idxToPosition(i){for(var r=0,s=0;s<this.folds.length;s++){var n=this.folds[s];if(i-=n.start.column-r,i<0)return{row:n.start.row,column:n.start.column+i};if(i-=n.placeholder.length,i<0)return n.start;r=n.end.column}return{row:this.end.row,column:this.end.column+i}}}return ei.FoldLine=e,ei}var ti={},Ei={},Zs=ne.Range,Ve=Zs.comparePoints;class on{constructor(){this.ranges=[],this.$bias=1}pointIndex(e,t,i){for(var r=this.ranges,s=i||0;s<r.length;s++){var n=r[s],o=Ve(e,n.end);if(!(o>0)){var l=Ve(e,n.start);return o===0?t&&l!==0?-s-2:s:l>0||l===0&&!t?s:-s-1}}return-s-1}add(e){var t=!e.isEmpty(),i=this.pointIndex(e.start,t);i<0&&(i=-i-1);var r=this.pointIndex(e.end,t,i);return r<0?r=-r-1:r++,this.ranges.splice(i,r-i,e)}addList(e){for(var t=[],i=e.length;i--;)t.push.apply(t,this.add(e[i]));return t}substractPoint(e){var t=this.pointIndex(e);if(t>=0)return this.ranges.splice(t,1)}merge(){var e=[],t=this.ranges;t=t.sort(function(o,l){return Ve(o.start,l.start)});for(var i=t[0],r,s=1;s<t.length;s++){r=i,i=t[s];var n=Ve(r.end,i.start);n<0||n==0&&!r.isEmpty()&&!i.isEmpty()||(Ve(r.end,i.end)<0&&(r.end.row=i.end.row,r.end.column=i.end.column),t.splice(s,1),e.push(i),i=r,s--)}return this.ranges=t,e}contains(e,t){return this.pointIndex({row:e,column:t})>=0}containsPoint(e){return this.pointIndex(e)>=0}rangeAtPoint(e){var t=this.pointIndex(e);if(t>=0)return this.ranges[t]}clipRows(e,t){var i=this.ranges;if(i[0].start.row>t||i[i.length-1].start.row<e)return[];var r=this.pointIndex({row:e,column:0});r<0&&(r=-r-1);var s=this.pointIndex({row:t,column:0},r);s<0&&(s=-s-1);for(var n=[],o=r;o<s;o++)n.push(i[o]);return n}removeAll(){return this.ranges.splice(0,this.ranges.length)}attach(e){this.session&&this.detach(),this.session=e,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)}detach(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)}$onChange(e){for(var t=e.start,i=e.end,r=t.row,s=i.row,n=this.ranges,o=0,l=n.length;o<l;o++){var h=n[o];if(h.end.row>=r)break}if(e.action=="insert")for(var c=s-r,u=-t.column+i.column;o<l;o++){var h=n[o];if(h.start.row>r)break;if(h.start.row==r&&h.start.column>=t.column&&(h.start.column==t.column&&this.$bias<=0||(h.start.column+=u,h.start.row+=c)),h.end.row==r&&h.end.column>=t.column){if(h.end.column==t.column&&this.$bias<0)continue;h.end.column==t.column&&u>0&&o<l-1&&h.end.column>h.start.column&&h.end.column==n[o+1].start.column&&(h.end.column-=u),h.end.column+=u,h.end.row+=c}}else for(var c=r-s,u=t.column-i.column;o<l;o++){var h=n[o];if(h.start.row>s)break;h.end.row<s&&(r<h.end.row||r==h.end.row&&t.column<h.end.column)?(h.end.row=r,h.end.column=t.column):h.end.row==s?h.end.column<=i.column?(c||h.end.column>t.column)&&(h.end.column=t.column,h.end.row=t.row):(h.end.column+=u,h.end.row+=c):h.end.row>s&&(h.end.row+=c),h.start.row<s&&(r<h.start.row||r==h.start.row&&t.column<h.start.column)?(h.start.row=r,h.start.column=t.column):h.start.row==s?h.start.column<=i.column?(c||h.start.column>t.column)&&(h.start.column=t.column,h.start.row=t.row):(h.start.column+=u,h.start.row+=c):h.start.row>s&&(h.start.row+=c)}if(c!=0&&o<l)for(;o<l;o++){var h=n[o];h.start.row+=c,h.end.row+=c}}}on.prototype.comparePoints=Ve;Ei.RangeList=on;var or;function Xs(){if(or)return ti;or=1;var a=Ei.RangeList;class e extends a{constructor(o,l){super(),this.foldLine=null,this.placeholder=l,this.range=o,this.start=o.start,this.end=o.end,this.sameRow=o.start.row==o.end.row,this.subFolds=this.ranges=[]}toString(){return'"'+this.placeholder+'" '+this.range.toString()}setFoldLine(o){this.foldLine=o,this.subFolds.forEach(function(l){l.setFoldLine(o)})}clone(){var o=this.range.clone(),l=new e(o,this.placeholder);return this.subFolds.forEach(function(h){l.subFolds.push(h.clone())}),l.collapseChildren=this.collapseChildren,l}addSubFold(o){if(!this.range.isEqual(o)){i(o,this.start);for(var g=o.start.row,w=o.start.column,l=0,h=-1;l<this.subFolds.length&&(h=this.subFolds[l].range.compare(g,w),h==1);l++);var c=this.subFolds[l],u=0;if(h==0){if(c.range.containsRange(o))return c.addSubFold(o);u=1}for(var g=o.range.end.row,w=o.range.end.column,d=l,h=-1;d<this.subFolds.length&&(h=this.subFolds[d].range.compare(g,w),h==1);d++);h==0&&d++;for(var m=this.subFolds.splice(l,d-l,o),f=h==0?m.length-1:m.length,v=u;v<f;v++)o.addSubFold(m[v]);return o.setFoldLine(this.foldLine),o}}restoreRange(o){return s(o,this.start)}}function t(n,o){n.row-=o.row,n.row==0&&(n.column-=o.column)}function i(n,o){t(n.start,o),t(n.end,o)}function r(n,o){n.row==0&&(n.column+=o.column),n.row+=o.row}function s(n,o){r(n.start,o),r(n.end,o)}return ti.Fold=e,ti}var ar;function Js(){if(ar)return qt;ar=1;var a=ne.Range,e=Qs().FoldLine,t=Xs().Fold,i=Ye.TokenIterator,r=Ut.MouseEvent;function s(){this.getFoldAt=function(n,o,l){var h=this.getFoldLine(n);if(!h)return null;for(var c=h.folds,u=0;u<c.length;u++){var g=c[u].range;if(g.contains(n,o)){if(l==1&&g.isEnd(n,o)&&!g.isEmpty())continue;if(l==-1&&g.isStart(n,o)&&!g.isEmpty())continue;return c[u]}}},this.getFoldsInRange=function(n){var o=n.start,l=n.end,h=this.$foldData,c=[];o.column+=1,l.column-=1;for(var u=0;u<h.length;u++){var g=h[u].range.compareRange(n);if(g!=2){if(g==-2)break;for(var w=h[u].folds,d=0;d<w.length;d++){var m=w[d];if(g=m.range.compareRange(n),g==-2)break;if(g==2)continue;if(g==42)break;c.push(m)}}}return o.column-=1,l.column+=1,c},this.getFoldsInRangeList=function(n){if(Array.isArray(n)){var o=[];n.forEach(function(l){o=o.concat(this.getFoldsInRange(l))},this)}else var o=this.getFoldsInRange(n);return o},this.getAllFolds=function(){for(var n=[],o=this.$foldData,l=0;l<o.length;l++)for(var h=0;h<o[l].folds.length;h++)n.push(o[l].folds[h]);return n},this.getFoldStringAt=function(n,o,l,h){if(h=h||this.getFoldLine(n),!h)return null;for(var c={end:{column:0}},u,g,w=0;w<h.folds.length;w++){g=h.folds[w];var d=g.range.compareEnd(n,o);if(d==-1){u=this.getLine(g.start.row).substring(c.end.column,g.start.column);break}else if(d===0)return null;c=g}return u||(u=this.getLine(g.start.row).substring(c.end.column)),l==-1?u.substring(0,o-c.end.column):l==1?u.substring(o-c.end.column):u},this.getFoldLine=function(n,o){var l=this.$foldData,h=0;for(o&&(h=l.indexOf(o)),h==-1&&(h=0),h;h<l.length;h++){var c=l[h];if(c.start.row<=n&&c.end.row>=n)return c;if(c.end.row>n)return null}return null},this.getNextFoldLine=function(n,o){var l=this.$foldData,h=0;for(o&&(h=l.indexOf(o)),h==-1&&(h=0),h;h<l.length;h++){var c=l[h];if(c.end.row>=n)return c}return null},this.getFoldedRowCount=function(n,o){for(var l=this.$foldData,h=o-n+1,c=0;c<l.length;c++){var u=l[c],g=u.end.row,w=u.start.row;if(g>=o){w<o&&(w>=n?h-=o-w:h=0);break}else g>=n&&(w>=n?h-=g-w:h-=g-n+1)}return h},this.$addFoldLine=function(n){return this.$foldData.push(n),this.$foldData.sort(function(o,l){return o.start.row-l.start.row}),n},this.addFold=function(n,o){var l=this.$foldData,h=!1,c;n instanceof t?c=n:(c=new t(o,n),c.collapseChildren=o.collapseChildren),this.$clipRangeToDocument(c.range);var u=c.start.row,g=c.start.column,w=c.end.row,d=c.end.column,m=this.getFoldAt(u,g,1),f=this.getFoldAt(w,d,-1);if(m&&f==m)return m.addSubFold(c);m&&!m.range.isStart(u,g)&&this.removeFold(m),f&&!f.range.isEnd(w,d)&&this.removeFold(f);var v=this.getFoldsInRange(c.range);v.length>0&&(this.removeFolds(v),c.collapseChildren||v.forEach(function(y){c.addSubFold(y)}));for(var p=0;p<l.length;p++){var $=l[p];if(w==$.start.row){$.addFold(c),h=!0;break}else if(u==$.end.row){if($.addFold(c),h=!0,!c.sameRow){var C=l[p+1];if(C&&C.start.row==w){$.merge(C);break}}break}else if(w<=$.start.row)break}return h||($=this.$addFoldLine(new e(this.$foldData,c))),this.$useWrapMode?this.$updateWrapData($.start.row,$.start.row):this.$updateRowLengthCache($.start.row,$.start.row),this.$modified=!0,this._signal("changeFold",{data:c,action:"add"}),c},this.addFolds=function(n){n.forEach(function(o){this.addFold(o)},this)},this.removeFold=function(n){var o=n.foldLine,l=o.start.row,h=o.end.row,c=this.$foldData,u=o.folds;if(u.length==1)c.splice(c.indexOf(o),1);else if(o.range.isEnd(n.end.row,n.end.column))u.pop(),o.end.row=u[u.length-1].end.row,o.end.column=u[u.length-1].end.column;else if(o.range.isStart(n.start.row,n.start.column))u.shift(),o.start.row=u[0].start.row,o.start.column=u[0].start.column;else if(n.sameRow)u.splice(u.indexOf(n),1);else{var g=o.split(n.start.row,n.start.column);u=g.folds,u.shift(),g.start.row=u[0].start.row,g.start.column=u[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(l,h):this.$updateRowLengthCache(l,h)),this.$modified=!0,this._signal("changeFold",{data:n,action:"remove"})},this.removeFolds=function(n){for(var o=[],l=0;l<n.length;l++)o.push(n[l]);o.forEach(function(h){this.removeFold(h)},this),this.$modified=!0},this.expandFold=function(n){this.removeFold(n),n.subFolds.forEach(function(o){n.restoreRange(o),this.addFold(o)},this),n.collapseChildren>0&&this.foldAll(n.start.row+1,n.end.row,n.collapseChildren-1),n.subFolds=[]},this.expandFolds=function(n){n.forEach(function(o){this.expandFold(o)},this)},this.unfold=function(n,o){var l,h;if(n==null)l=new a(0,0,this.getLength(),0),o==null&&(o=!0);else if(typeof n=="number")l=new a(n,0,n,this.getLine(n).length);else if("row"in n)l=a.fromPoints(n,n);else{if(Array.isArray(n))return h=[],n.forEach(function(u){h=h.concat(this.unfold(u))},this),h;l=n}h=this.getFoldsInRangeList(l);for(var c=h;h.length==1&&a.comparePoints(h[0].start,l.start)<0&&a.comparePoints(h[0].end,l.end)>0;)this.expandFolds(h),h=this.getFoldsInRangeList(l);if(o!=!1?this.removeFolds(h):this.expandFolds(h),c.length)return c},this.isRowFolded=function(n,o){return!!this.getFoldLine(n,o)},this.getRowFoldEnd=function(n,o){var l=this.getFoldLine(n,o);return l?l.end.row:n},this.getRowFoldStart=function(n,o){var l=this.getFoldLine(n,o);return l?l.start.row:n},this.getFoldDisplayLine=function(n,o,l,h,c){h==null&&(h=n.start.row),c==null&&(c=0),o==null&&(o=n.end.row),l==null&&(l=this.getLine(o).length);var u=this.doc,g="";return n.walk(function(w,d,m,f){if(!(d<h)){if(d==h){if(m<c)return;f=Math.max(c,f)}w!=null?g+=w:g+=u.getLine(d).substring(f,m)}},o,l),g},this.getDisplayLine=function(n,o,l,h){var c=this.getFoldLine(n);if(c)return this.getFoldDisplayLine(c,n,o,l,h);var u;return u=this.doc.getLine(n),u.substring(h||0,o||u.length)},this.$cloneFoldData=function(){var n=[];return n=this.$foldData.map(function(o){var l=o.folds.map(function(h){return h.clone()});return new e(n,l)}),n},this.toggleFold=function(n){var o=this.selection,l=o.getRange(),h,c;if(l.isEmpty()){var u=l.start;if(h=this.getFoldAt(u.row,u.column),h){this.expandFold(h);return}else(c=this.findMatchingBracket(u))?l.comparePoint(c)==1?l.end=c:(l.start=c,l.start.column++,l.end.column--):(c=this.findMatchingBracket({row:u.row,column:u.column+1}))?(l.comparePoint(c)==1?l.end=c:l.start=c,l.start.column++):l=this.getCommentFoldRange(u.row,u.column)||l}else{var g=this.getFoldsInRange(l);if(n&&g.length){this.expandFolds(g);return}else g.length==1&&(h=g[0])}if(h||(h=this.getFoldAt(l.start.row,l.start.column)),h&&h.range.toString()==l.toString()){this.expandFold(h);return}var w="...";if(!l.isMultiLine()){if(w=this.getTextRange(l),w.length<4)return;w=w.trim().substring(0,2)+".."}this.addFold(w,l)},this.getCommentFoldRange=function(n,o,l){var h=new i(this,n,o),c=h.getCurrentToken(),u=c&&c.type;if(c&&/^comment|string/.test(u)){u=u.match(/comment|string/)[0],u=="comment"&&(u+="|doc-start|\\.doc");var g=new RegExp(u),w=new a;if(l!=1){do c=h.stepBackward();while(c&&g.test(c.type));c=h.stepForward()}w.start.row=h.getCurrentTokenRow(),w.start.column=h.getCurrentTokenColumn()+c.value.length,h=new i(this,n,o);var d=this.getState(h.$row);if(l!=-1){var m=-1;do if(c=h.stepForward(),m==-1){var f=this.getState(h.$row);d.toString()!==f.toString()&&(m=h.$row)}else if(h.$row>m)break;while(c&&g.test(c.type));c=h.stepBackward()}else c=h.getCurrentToken();return w.end.row=h.getCurrentTokenRow(),w.end.column=h.getCurrentTokenColumn(),w}},this.foldAll=function(n,o,l,h){l==null&&(l=1e5);var c=this.foldWidgets;if(c){o=o||this.getLength(),n=n||0;for(var u=n;u<o;u++)if(c[u]==null&&(c[u]=this.getFoldWidget(u)),c[u]=="start"&&!(h&&!h(u))){var g=this.getFoldWidgetRange(u);g&&g.isMultiLine()&&g.end.row<=o&&g.start.row>=n&&(u=g.end.row,g.collapseChildren=l,this.addFold("...",g))}}},this.foldToLevel=function(n){for(this.foldAll();n-- >0;)this.unfold(null,!1)},this.foldAllComments=function(){var n=this;this.foldAll(null,null,null,function(o){for(var l=n.getTokens(o),h=0;h<l.length;h++){var c=l[h];if(!(c.type=="text"&&/^\s+$/.test(c.value)))return!!/comment/.test(c.type)}})},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(n){if(!this.$foldStyles[n])throw new Error("invalid fold style: "+n+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=n){this.$foldStyle=n,n=="manual"&&this.unfold();var o=this.$foldMode;this.$setFolding(null),this.$setFolding(o)}},this.$setFolding=function(n){if(this.$foldMode!=n){if(this.$foldMode=n,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._signal("changeAnnotation"),!n||this.$foldStyle=="manual"){this.foldWidgets=null;return}this.foldWidgets=[],this.getFoldWidget=n.getFoldWidget.bind(n,this,this.$foldStyle),this.getFoldWidgetRange=n.getFoldWidgetRange.bind(n,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)}},this.getParentFoldRangeData=function(n,o){var l=this.foldWidgets;if(!l||o&&l[n])return{};for(var h=n-1,c;h>=0;){var u=l[h];if(u==null&&(u=l[h]=this.getFoldWidget(h)),u=="start"){var g=this.getFoldWidgetRange(h);if(c||(c=g),g&&g.end.row>=n)break}h--}return{range:h!==-1&&g,firstRange:c}},this.onFoldWidgetClick=function(n,o){o instanceof r&&(o=o.domEvent);var l={children:o.shiftKey,all:o.ctrlKey||o.metaKey,siblings:o.altKey},h=this.$toggleFoldWidget(n,l);if(!h){var c=o.target||o.srcElement;c&&/ace_fold-widget/.test(c.className)&&(c.className+=" ace_invalid")}},this.$toggleFoldWidget=function(n,o){if(this.getFoldWidget){var l=this.getFoldWidget(n),h=this.getLine(n),c=l==="end"?-1:1,u=this.getFoldAt(n,c===-1?0:h.length,c);if(u)return o.children||o.all?this.removeFold(u):this.expandFold(u),u;var g=this.getFoldWidgetRange(n,!0);if(g&&!g.isMultiLine()&&(u=this.getFoldAt(g.start.row,g.start.column,1),u&&g.isEqual(u.range)))return this.removeFold(u),u;if(o.siblings){var w=this.getParentFoldRangeData(n);if(w.range)var d=w.range.start.row+1,m=w.range.end.row;this.foldAll(d,m,o.all?1e4:0)}else o.children?(m=g?g.end.row:this.getLength(),this.foldAll(n+1,m,o.all?1e4:0)):g&&(o.all&&(g.collapseChildren=1e4),this.addFold("...",g));return g}},this.toggleFoldWidget=function(n){var o=this.selection.getCursor().row;o=this.getRowFoldStart(o);var l=this.$toggleFoldWidget(o,{});if(!l){var h=this.getParentFoldRangeData(o,!0);if(l=h.range||h.firstRange,l){o=l.start.row;var c=this.getFoldAt(o,this.getLine(o).length,1);c?this.removeFold(c):this.addFold("...",l)}}},this.updateFoldWidgets=function(n){var o=n.start.row,l=n.end.row-o;if(l===0)this.foldWidgets[o]=null;else if(n.action=="remove")this.foldWidgets.splice(o,l+1,null);else{var h=Array(l+1);h.unshift(o,1),this.foldWidgets.splice.apply(this.foldWidgets,h)}},this.tokenizerUpdateFoldWidgets=function(n){var o=n.data;o.first!=o.last&&this.foldWidgets.length>o.first&&this.foldWidgets.splice(o.first,this.foldWidgets.length)}}return qt.Folding=s,qt}var ii={},lr;function qs(){if(lr)return ii;lr=1;var a=Ye.TokenIterator,e=ne.Range;function t(){this.findMatchingBracket=function(i,r){if(i.column==0)return null;var s=r||this.getLine(i.row).charAt(i.column-1);if(s=="")return null;var n=s.match(/([\(\[\{])|([\)\]\}])/);return n?n[1]?this.$findClosingBracket(n[1],i):this.$findOpeningBracket(n[2],i):null},this.getBracketRange=function(i){var r=this.getLine(i.row),s=!0,n,o=r.charAt(i.column-1),l=o&&o.match(/([\(\[\{])|([\)\]\}])/);if(l||(o=r.charAt(i.column),i={row:i.row,column:i.column+1},l=o&&o.match(/([\(\[\{])|([\)\]\}])/),s=!1),!l)return null;if(l[1]){var h=this.$findClosingBracket(l[1],i);if(!h)return null;n=e.fromPoints(i,h),s||(n.end.column++,n.start.column--),n.cursor=n.end}else{var h=this.$findOpeningBracket(l[2],i);if(!h)return null;n=e.fromPoints(h,i),s||(n.start.column++,n.end.column--),n.cursor=n.start}return n},this.getMatchingBracketRanges=function(i,r){var s=this.getLine(i.row),n=/([\(\[\{])|([\)\]\}])/,o=!r&&s.charAt(i.column-1),l=o&&o.match(n);if(l||(o=(r===void 0||r)&&s.charAt(i.column),i={row:i.row,column:i.column+1},l=o&&o.match(n)),!l)return null;var h=new e(i.row,i.column-1,i.row,i.column),c=l[1]?this.$findClosingBracket(l[1],i):this.$findOpeningBracket(l[2],i);if(!c)return[h];var u=new e(c.row,c.column,c.row,c.column+1);return[h,u]},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{","<":">",">":"<"},this.$findOpeningBracket=function(i,r,s){var n=this.$brackets[i],o=1,l=new a(this,r.row,r.column),h=l.getCurrentToken();if(h||(h=l.stepForward()),!!h){s||(s=new RegExp("(\\.?"+h.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)").replace(/-close\b/,"-(close|open)")+")+"));for(var c=r.column-l.getCurrentTokenColumn()-2,u=h.value;;){for(;c>=0;){var g=u.charAt(c);if(g==n){if(o-=1,o==0)return{row:l.getCurrentTokenRow(),column:c+l.getCurrentTokenColumn()}}else g==i&&(o+=1);c-=1}do h=l.stepBackward();while(h&&!s.test(h.type));if(h==null)break;u=h.value,c=u.length-1}return null}},this.$findClosingBracket=function(i,r,s){var n=this.$brackets[i],o=1,l=new a(this,r.row,r.column),h=l.getCurrentToken();if(h||(h=l.stepForward()),!!h){s||(s=new RegExp("(\\.?"+h.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)").replace(/-open\b/,"-(close|open)")+")+"));for(var c=r.column-l.getCurrentTokenColumn();;){for(var u=h.value,g=u.length;c<g;){var w=u.charAt(c);if(w==n){if(o-=1,o==0)return{row:l.getCurrentTokenRow(),column:c+l.getCurrentTokenColumn()}}else w==i&&(o+=1);c+=1}do h=l.stepForward();while(h&&!s.test(h.type));if(h==null)break;c=0}return null}},this.getMatchingTags=function(i){var r=new a(this,i.row,i.column),s=this.$findTagName(r);if(s){var n=r.stepBackward();return n.value==="<"?this.$findClosingTag(r,s):this.$findOpeningTag(r,s)}},this.$findTagName=function(i){var r=i.getCurrentToken(),s=!1,n=!1;if(r&&r.type.indexOf("tag-name")===-1)do n?r=i.stepBackward():r=i.stepForward(),r&&(r.value==="/>"?n=!0:r.type.indexOf("tag-name")!==-1&&(s=!0));while(r&&!s);return r},this.$findClosingTag=function(i,r){var s,n=r.value,o=r.value,l=0,h=new e(i.getCurrentTokenRow(),i.getCurrentTokenColumn(),i.getCurrentTokenRow(),i.getCurrentTokenColumn()+1);r=i.stepForward();var c=new e(i.getCurrentTokenRow(),i.getCurrentTokenColumn(),i.getCurrentTokenRow(),i.getCurrentTokenColumn()+r.value.length),u=!1;do{if(s=r,s.type.indexOf("tag-close")!==-1&&!u){var g=new e(i.getCurrentTokenRow(),i.getCurrentTokenColumn(),i.getCurrentTokenRow(),i.getCurrentTokenColumn()+1);u=!0}if(r=i.stepForward(),r){if(r.value===">"&&!u){var g=new e(i.getCurrentTokenRow(),i.getCurrentTokenColumn(),i.getCurrentTokenRow(),i.getCurrentTokenColumn()+1);u=!0}if(r.type.indexOf("tag-name")!==-1){if(n=r.value,o===n){if(s.value==="<")l++;else if(s.value==="</"&&(l--,l<0)){i.stepBackward();var w=new e(i.getCurrentTokenRow(),i.getCurrentTokenColumn(),i.getCurrentTokenRow(),i.getCurrentTokenColumn()+2);r=i.stepForward();var d=new e(i.getCurrentTokenRow(),i.getCurrentTokenColumn(),i.getCurrentTokenRow(),i.getCurrentTokenColumn()+r.value.length);if(r.type.indexOf("tag-close")===-1&&(r=i.stepForward()),r&&r.value===">")var m=new e(i.getCurrentTokenRow(),i.getCurrentTokenColumn(),i.getCurrentTokenRow(),i.getCurrentTokenColumn()+1);else return}}}else if(o===n&&r.value==="/>"&&(l--,l<0))var w=new e(i.getCurrentTokenRow(),i.getCurrentTokenColumn(),i.getCurrentTokenRow(),i.getCurrentTokenColumn()+2),d=w,m=d,g=new e(c.end.row,c.end.column,c.end.row,c.end.column+1)}}while(r&&l>=0);if(h&&g&&w&&m&&c&&d)return{openTag:new e(h.start.row,h.start.column,g.end.row,g.end.column),closeTag:new e(w.start.row,w.start.column,m.end.row,m.end.column),openTagName:c,closeTagName:d}},this.$findOpeningTag=function(i,r){var s=i.getCurrentToken(),n=r.value,o=0,l=i.getCurrentTokenRow(),h=i.getCurrentTokenColumn(),c=h+2,u=new e(l,h,l,c);i.stepForward();var g=new e(i.getCurrentTokenRow(),i.getCurrentTokenColumn(),i.getCurrentTokenRow(),i.getCurrentTokenColumn()+r.value.length);if(r.type.indexOf("tag-close")===-1&&(r=i.stepForward()),!(!r||r.value!==">")){var w=new e(i.getCurrentTokenRow(),i.getCurrentTokenColumn(),i.getCurrentTokenRow(),i.getCurrentTokenColumn()+1);i.stepBackward(),i.stepBackward();do if(r=s,l=i.getCurrentTokenRow(),h=i.getCurrentTokenColumn(),c=h+r.value.length,s=i.stepBackward(),r){if(r.type.indexOf("tag-name")!==-1){if(n===r.value)if(s.value==="<"){if(o++,o>0){var d=new e(l,h,l,c),m=new e(i.getCurrentTokenRow(),i.getCurrentTokenColumn(),i.getCurrentTokenRow(),i.getCurrentTokenColumn()+1);do r=i.stepForward();while(r&&r.value!==">");var f=new e(i.getCurrentTokenRow(),i.getCurrentTokenColumn(),i.getCurrentTokenRow(),i.getCurrentTokenColumn()+1)}}else s.value==="</"&&o--}else if(r.value==="/>"){for(var v=0,p=s;p;){if(p.type.indexOf("tag-name")!==-1&&p.value===n){o--;break}else if(p.value==="<")break;p=i.stepBackward(),v++}for(var $=0;$<v;$++)i.stepForward()}}while(s&&o<=0);if(m&&f&&u&&w&&d&&g)return{openTag:new e(m.start.row,m.start.column,f.end.row,f.end.column),closeTag:new e(u.start.row,u.start.column,w.end.row,w.end.column),openTagName:d,closeTagName:g}}}}return ii.BracketMatch=t,ii}var eo=ae,ri=V,to=Pr.BidiHandler,Ke=we,io=fe.EventEmitter,ro=Si.Selection,hr=Vr.Mode,ke=ne.Range,no=Xr.LineWidgets,so=Jr.Document,oo=tn.BackgroundTokenizer,ao=nn.SearchHighlight,lo=xi.UndoManager;let oe=class fi{constructor(e,t){this.doc,this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$editor=null,this.prevOp={},this.$foldData=[],this.id="session"+ ++fi.$uid,this.$foldData.toString=function(){return this.join(`
`)},this.bgTokenizer=new oo(new hr().getTokenizer(),this);var i=this;this.bgTokenizer.on("update",function(r){i._signal("tokenizerUpdate",r)}),this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),(typeof e!="object"||!e.getLine)&&(e=new so(e)),this.setDocument(e),this.selection=new ro(this),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.selection.on("changeCursor",this.$onSelectionChange),this.$bidiHandler=new to(this),Ke.resetOptions(this),this.setMode(t),Ke._signal("session",this),this.destroyed=!1,this.$initOperationListeners()}$initOperationListeners(){this.curOp=null,this.on("change",()=>{this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.docChanged=!0},!0),this.on("changeSelection",()=>{this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.selectionChanged=!0},!0),this.$operationResetTimer=ri.delayedCall(this.endOperation.bind(this,!0))}startOperation(e){if(this.curOp){if(!e||this.curOp.command)return;this.prevOp=this.curOp}e||(e={}),this.$operationResetTimer.schedule(),this.curOp={command:e.command||{},args:e.args},this.curOp.selectionBefore=this.selection.toJSON(),this._signal("startOperation",e)}endOperation(e){if(this.curOp){if(e&&e.returnValue===!1){this.curOp=null,this._signal("endOperation",e);return}if(e==!0&&this.curOp.command&&this.curOp.command.name=="mouse")return;const t=this.selection.toJSON();this.curOp.selectionAfter=t,this.$lastSel=this.selection.toJSON(),this.getUndoManager().addSelection(t),this._signal("beforeEndOperation"),this.prevOp=this.curOp,this.curOp=null,this._signal("endOperation",e)}}setDocument(e){this.doc&&this.doc.off("change",this.$onChange),this.doc=e,e.on("change",this.$onChange,!0),this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()}getDocument(){return this.doc}get widgetManager(){const e=new no(this);return this.widgetManager=e,this.$editor&&e.attach(this.$editor),e}set widgetManager(e){Object.defineProperty(this,"widgetManager",{writable:!0,enumerable:!0,configurable:!0,value:e})}$resetRowCache(e){if(!e){this.$docRowCache=[],this.$screenRowCache=[];return}var t=this.$docRowCache.length,i=this.$getRowCacheIndex(this.$docRowCache,e)+1;t>i&&(this.$docRowCache.splice(i,t),this.$screenRowCache.splice(i,t))}$getRowCacheIndex(e,t){for(var i=0,r=e.length-1;i<=r;){var s=i+r>>1,n=e[s];if(t>n)i=s+1;else if(t<n)r=s-1;else return s}return i-1}resetCaches(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.destroyed||this.bgTokenizer.start(0)}onChangeFold(e){var t=e.data;this.$resetRowCache(t.start.row)}onChange(e){this.$modified=!0,this.$bidiHandler.onChange(e),this.$resetRowCache(e.start.row);var t=this.$updateInternalDataOnChange(e);!this.$fromUndo&&this.$undoManager&&(t&&t.length&&(this.$undoManager.add({action:"removeFolds",folds:t},this.mergeUndoDeltas),this.mergeUndoDeltas=!0),this.$undoManager.add(e,this.mergeUndoDeltas),this.mergeUndoDeltas=!0,this.$informUndoManager.schedule()),this.bgTokenizer.$updateOnChange(e),this._signal("change",e)}onSelectionChange(){this._signal("changeSelection")}setValue(e){this.doc.setValue(e),this.selection.moveTo(0,0),this.$resetRowCache(0),this.setUndoManager(this.$undoManager),this.getUndoManager().reset()}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const t=new lo;t.$undoStack=e.history.undo,t.$redoStack=e.history.redo,t.mark=e.history.mark,t.$rev=e.history.rev;const i=new fi(e.value);return e.folds.forEach(function(r){i.addFold("...",ke.fromPoints(r.start,r.end))}),i.setAnnotations(e.annotations),i.setBreakpoints(e.breakpoints),i.setMode(e.mode),i.setScrollLeft(e.scrollLeft),i.setScrollTop(e.scrollTop),i.setUndoManager(t),i.selection.fromJSON(e.selection),i}toJSON(){return{annotations:this.$annotations,breakpoints:this.$breakpoints,folds:this.getAllFolds().map(function(e){return e.range}),history:this.getUndoManager(),mode:this.$mode.$id,scrollLeft:this.$scrollLeft,scrollTop:this.$scrollTop,selection:this.selection.toJSON(),value:this.doc.getValue()}}toString(){return this.doc.getValue()}getSelection(){return this.selection}getState(e){return this.bgTokenizer.getState(e)}getTokens(e){return this.bgTokenizer.getTokens(e)}getTokenAt(e,t){var i=this.bgTokenizer.getTokens(e),r,s=0;if(t==null){var n=i.length-1;s=this.getLine(e).length}else for(var n=0;n<i.length&&(s+=i[n].value.length,!(s>=t));n++);return r=i[n],r?(r.index=n,r.start=s-r.value.length,r):null}setUndoManager(e){if(this.$undoManager=e,this.$informUndoManager&&this.$informUndoManager.cancel(),e){var t=this;e.addSession(this),this.$syncInformUndoManager=function(){t.$informUndoManager.cancel(),t.mergeUndoDeltas=!1},this.$informUndoManager=ri.delayedCall(this.$syncInformUndoManager)}else this.$syncInformUndoManager=function(){}}markUndoGroup(){this.$syncInformUndoManager&&this.$syncInformUndoManager()}getUndoManager(){return this.$undoManager||this.$defaultUndoManager}getTabString(){return this.getUseSoftTabs()?ri.stringRepeat(" ",this.getTabSize()):"	"}setUseSoftTabs(e){this.setOption("useSoftTabs",e)}getUseSoftTabs(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs}setTabSize(e){this.setOption("tabSize",e)}getTabSize(){return this.$tabSize}isTabStop(e){return this.$useSoftTabs&&e.column%this.$tabSize===0}setNavigateWithinSoftTabs(e){this.setOption("navigateWithinSoftTabs",e)}getNavigateWithinSoftTabs(){return this.$navigateWithinSoftTabs}setOverwrite(e){this.setOption("overwrite",e)}getOverwrite(){return this.$overwrite}toggleOverwrite(){this.setOverwrite(!this.$overwrite)}addGutterDecoration(e,t){this.$decorations[e]||(this.$decorations[e]=""),this.$decorations[e]+=" "+t,this._signal("changeBreakpoint",{})}removeGutterDecoration(e,t){this.$decorations[e]=(this.$decorations[e]||"").replace(" "+t,""),this._signal("changeBreakpoint",{})}getBreakpoints(){return this.$breakpoints}setBreakpoints(e){this.$breakpoints=[];for(var t=0;t<e.length;t++)this.$breakpoints[e[t]]="ace_breakpoint";this._signal("changeBreakpoint",{})}clearBreakpoints(){this.$breakpoints=[],this._signal("changeBreakpoint",{})}setBreakpoint(e,t){t===void 0&&(t="ace_breakpoint"),t?this.$breakpoints[e]=t:delete this.$breakpoints[e],this._signal("changeBreakpoint",{})}clearBreakpoint(e){delete this.$breakpoints[e],this._signal("changeBreakpoint",{})}addMarker(e,t,i,r){var s=this.$markerId++,n={range:e,type:i||"line",renderer:typeof i=="function"?i:null,clazz:t,inFront:!!r,id:s};return r?(this.$frontMarkers[s]=n,this._signal("changeFrontMarker")):(this.$backMarkers[s]=n,this._signal("changeBackMarker")),s}addDynamicMarker(e,t){if(e.update){var i=this.$markerId++;return e.id=i,e.inFront=!!t,t?(this.$frontMarkers[i]=e,this._signal("changeFrontMarker")):(this.$backMarkers[i]=e,this._signal("changeBackMarker")),e}}removeMarker(e){var t=this.$frontMarkers[e]||this.$backMarkers[e];if(t){var i=t.inFront?this.$frontMarkers:this.$backMarkers;delete i[e],this._signal(t.inFront?"changeFrontMarker":"changeBackMarker")}}getMarkers(e){return e?this.$frontMarkers:this.$backMarkers}highlight(e){if(!this.$searchHighlight){var t=new ao(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(t)}this.$searchHighlight.setRegexp(e)}highlightLines(e,t,i,r){typeof t!="number"&&(i=t,t=e),i||(i="ace_step");var s=new ke(e,0,t,1/0);return s.id=this.addMarker(s,i,"fullLine",r),s}setAnnotations(e){this.$annotations=e,this._signal("changeAnnotation",{})}getAnnotations(){return this.$annotations||[]}clearAnnotations(){this.setAnnotations([])}$detectNewLine(e){var t=e.match(/^.*?(\r?\n)/m);t?this.$autoNewLine=t[1]:this.$autoNewLine=`
`}getWordRange(e,t){var i=this.getLine(e),r=!1;if(t>0&&(r=!!i.charAt(t-1).match(this.tokenRe)),r||(r=!!i.charAt(t).match(this.tokenRe)),r)var s=this.tokenRe;else if(/^\s+$/.test(i.slice(t-1,t+1)))var s=/\s/;else var s=this.nonTokenRe;var n=t;if(n>0){do n--;while(n>=0&&i.charAt(n).match(s));n++}for(var o=t;o<i.length&&i.charAt(o).match(s);)o++;return new ke(e,n,e,o)}getAWordRange(e,t){for(var i=this.getWordRange(e,t),r=this.getLine(i.end.row);r.charAt(i.end.column).match(/[ \t]/);)i.end.column+=1;return i}setNewLineMode(e){this.doc.setNewLineMode(e)}getNewLineMode(){return this.doc.getNewLineMode()}setUseWorker(e){this.setOption("useWorker",e)}getUseWorker(){return this.$useWorker}onReloadTokenizer(e){var t=e.data;this.bgTokenizer.start(t.first),this._signal("tokenizerUpdate",e)}setMode(e,t){if(e&&typeof e=="object"){if(e.getTokenizer)return this.$onChangeMode(e);var i=e,r=i.path}else r=e||"ace/mode/text";if(this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new hr),this.$modes[r]&&!i){this.$onChangeMode(this.$modes[r]),t&&t();return}this.$modeId=r,Ke.loadModule(["mode",r],(function(s){if(this.$modeId!==r)return t&&t();this.$modes[r]&&!i?this.$onChangeMode(this.$modes[r]):s&&s.Mode&&(s=new s.Mode(i),i||(this.$modes[r]=s,s.$id=r),this.$onChangeMode(s)),t&&t()}).bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)}$onChangeMode(e,t){if(t||(this.$modeId=e.$id),this.$mode!==e){var i=this.$mode;this.$mode=e,this.$stopWorker(),this.$useWorker&&this.$startWorker();var r=e.getTokenizer();if(r.on!==void 0){var s=this.onReloadTokenizer.bind(this);r.on("update",s)}this.bgTokenizer.setTokenizer(r),this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=e.tokenRe,this.nonTokenRe=e.nonTokenRe,t||(e.attachToSession&&e.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(e.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode",{oldMode:i,mode:e}))}}$stopWorker(){this.$worker&&(this.$worker.terminate(),this.$worker=null)}$startWorker(){try{this.$worker=this.$mode.createWorker(this)}catch(e){Ke.warn("Could not load worker",e),this.$worker=null}}getMode(){return this.$mode}setScrollTop(e){this.$scrollTop===e||isNaN(e)||(this.$scrollTop=e,this._signal("changeScrollTop",e))}getScrollTop(){return this.$scrollTop}setScrollLeft(e){this.$scrollLeft===e||isNaN(e)||(this.$scrollLeft=e,this._signal("changeScrollLeft",e))}getScrollLeft(){return this.$scrollLeft}getScreenWidth(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth}getLineWidgetMaxWidth(){if(this.lineWidgetsWidth!=null)return this.lineWidgetsWidth;var e=0;return this.lineWidgets.forEach(function(t){t&&t.screenWidth>e&&(e=t.screenWidth)}),this.lineWidgetWidth=e}$computeWidth(e){if(this.$modified||e){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var t=this.doc.getAllLines(),i=this.$rowLengthCache,r=0,s=0,n=this.$foldData[s],o=n?n.start.row:1/0,l=t.length,h=0;h<l;h++){if(h>o){if(h=n.end.row+1,h>=l)break;n=this.$foldData[s++],o=n?n.start.row:1/0}i[h]==null&&(i[h]=this.$getStringScreenWidth(t[h])[0]),i[h]>r&&(r=i[h])}this.screenWidth=r}}getLine(e){return this.doc.getLine(e)}getLines(e,t){return this.doc.getLines(e,t)}getLength(){return this.doc.getLength()}getTextRange(e){return this.doc.getTextRange(e||this.selection.getRange())}insert(e,t){return this.doc.insert(e,t)}remove(e){return this.doc.remove(e)}removeFullLines(e,t){return this.doc.removeFullLines(e,t)}undoChanges(e,t){if(e.length){this.$fromUndo=!0;for(var i=e.length-1;i!=-1;i--){var r=e[i];r.action=="insert"||r.action=="remove"?this.doc.revertDelta(r):r.folds&&this.addFolds(r.folds)}!t&&this.$undoSelect&&(e.selectionBefore?this.selection.fromJSON(e.selectionBefore):this.selection.setRange(this.$getUndoSelection(e,!0))),this.$fromUndo=!1}}redoChanges(e,t){if(e.length){this.$fromUndo=!0;for(var i=0;i<e.length;i++){var r=e[i];(r.action=="insert"||r.action=="remove")&&this.doc.$safeApplyDelta(r)}!t&&this.$undoSelect&&(e.selectionAfter?this.selection.fromJSON(e.selectionAfter):this.selection.setRange(this.$getUndoSelection(e,!1))),this.$fromUndo=!1}}setUndoSelect(e){this.$undoSelect=e}$getUndoSelection(e,t){function i(l){return t?l.action!=="insert":l.action==="insert"}for(var r,s,n=0;n<e.length;n++){var o=e[n];if(o.start){if(!r){i(o)?r=ke.fromPoints(o.start,o.end):r=ke.fromPoints(o.start,o.start);continue}i(o)?(s=o.start,r.compare(s.row,s.column)==-1&&r.setStart(s),s=o.end,r.compare(s.row,s.column)==1&&r.setEnd(s)):(s=o.start,r.compare(s.row,s.column)==-1&&(r=ke.fromPoints(o.start,o.start)))}}return r}replace(e,t){return this.doc.replace(e,t)}moveText(e,t,i){var r=this.getTextRange(e),s=this.getFoldsInRange(e),n=ke.fromPoints(t,t);if(!i){this.remove(e);var o=e.start.row-e.end.row,l=o?-e.end.column:e.start.column-e.end.column;l&&(n.start.row==e.end.row&&n.start.column>e.end.column&&(n.start.column+=l),n.end.row==e.end.row&&n.end.column>e.end.column&&(n.end.column+=l)),o&&n.start.row>=e.end.row&&(n.start.row+=o,n.end.row+=o)}if(n.end=this.insert(n.start,r),s.length){var h=e.start,c=n.start,o=c.row-h.row,l=c.column-h.column;this.addFolds(s.map(function(w){return w=w.clone(),w.start.row==h.row&&(w.start.column+=l),w.end.row==h.row&&(w.end.column+=l),w.start.row+=o,w.end.row+=o,w}))}return n}indentRows(e,t,i){i=i.replace(/\t/g,this.getTabString());for(var r=e;r<=t;r++)this.doc.insertInLine({row:r,column:0},i)}outdentRows(e){for(var t=e.collapseRows(),i=new ke(0,0,0,0),r=this.getTabSize(),s=t.start.row;s<=t.end.row;++s){var n=this.getLine(s);i.start.row=s,i.end.row=s;for(var o=0;o<r&&n.charAt(o)==" ";++o);o<r&&n.charAt(o)=="	"?(i.start.column=o,i.end.column=o+1):(i.start.column=0,i.end.column=o),this.remove(i)}}$moveLines(e,t,i){if(e=this.getRowFoldStart(e),t=this.getRowFoldEnd(t),i<0){var r=this.getRowFoldStart(e+i);if(r<0)return 0;var s=r-e}else if(i>0){var r=this.getRowFoldEnd(t+i);if(r>this.doc.getLength()-1)return 0;var s=r-t}else{e=this.$clipRowToDocument(e),t=this.$clipRowToDocument(t);var s=t-e+1}var n=new ke(e,0,t,Number.MAX_VALUE),o=this.getFoldsInRange(n).map(function(h){return h=h.clone(),h.start.row+=s,h.end.row+=s,h}),l=i==0?this.doc.getLines(e,t):this.doc.removeFullLines(e,t);return this.doc.insertFullLines(e+s,l),o.length&&this.addFolds(o),s}moveLinesUp(e,t){return this.$moveLines(e,t,-1)}moveLinesDown(e,t){return this.$moveLines(e,t,1)}duplicateLines(e,t){return this.$moveLines(e,t,0)}$clipRowToDocument(e){return Math.max(0,Math.min(e,this.doc.getLength()-1))}$clipColumnToRow(e,t){return t<0?0:Math.min(this.doc.getLine(e).length,t)}$clipPositionToDocument(e,t){if(t=Math.max(0,t),e<0)e=0,t=0;else{var i=this.doc.getLength();e>=i?(e=i-1,t=this.doc.getLine(i-1).length):t=Math.min(this.doc.getLine(e).length,t)}return{row:e,column:t}}$clipRangeToDocument(e){e.start.row<0?(e.start.row=0,e.start.column=0):e.start.column=this.$clipColumnToRow(e.start.row,e.start.column);var t=this.doc.getLength()-1;return e.end.row>t?(e.end.row=t,e.end.column=this.doc.getLine(t).length):e.end.column=this.$clipColumnToRow(e.end.row,e.end.column),e}setUseWrapMode(e){if(e!=this.$useWrapMode){if(this.$useWrapMode=e,this.$modified=!0,this.$resetRowCache(0),e){var t=this.getLength();this.$wrapData=Array(t),this.$updateWrapData(0,t-1)}this._signal("changeWrapMode")}}getUseWrapMode(){return this.$useWrapMode}setWrapLimitRange(e,t){(this.$wrapLimitRange.min!==e||this.$wrapLimitRange.max!==t)&&(this.$wrapLimitRange={min:e,max:t},this.$modified=!0,this.$bidiHandler.markAsDirty(),this.$useWrapMode&&this._signal("changeWrapMode"))}adjustWrapLimit(e,t){var i=this.$wrapLimitRange;i.max<0&&(i={min:t,max:t});var r=this.$constrainWrapLimit(e,i.min,i.max);return r!=this.$wrapLimit&&r>1?(this.$wrapLimit=r,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0):!1}$constrainWrapLimit(e,t,i){return t&&(e=Math.max(t,e)),i&&(e=Math.min(i,e)),e}getWrapLimit(){return this.$wrapLimit}setWrapLimit(e){this.setWrapLimitRange(e,e)}getWrapLimitRange(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}}$updateInternalDataOnChange(e){var t=this.$useWrapMode,i=e.action,r=e.start,s=e.end,n=r.row,o=s.row,l=o-n,h=null;if(this.$updating=!0,l!=0)if(i==="remove"){this[t?"$wrapData":"$rowLengthCache"].splice(n,l);var c=this.$foldData;h=this.getFoldsInRange(e),this.removeFolds(h);var u=this.getFoldLine(s.row),g=0;if(u){u.addRemoveChars(s.row,s.column,r.column-s.column),u.shiftRow(-l);var w=this.getFoldLine(n);w&&w!==u&&(w.merge(u),u=w),g=c.indexOf(u)+1}for(g;g<c.length;g++){var u=c[g];u.start.row>=s.row&&u.shiftRow(-l)}o=n}else{var d=Array(l);d.unshift(n,0);var m=t?this.$wrapData:this.$rowLengthCache;m.splice.apply(m,d);var c=this.$foldData,u=this.getFoldLine(n),g=0;if(u){var f=u.range.compareInside(r.row,r.column);f==0?(u=u.split(r.row,r.column),u&&(u.shiftRow(l),u.addRemoveChars(o,0,s.column-r.column))):f==-1&&(u.addRemoveChars(n,0,s.column-r.column),u.shiftRow(l)),g=c.indexOf(u)+1}for(g;g<c.length;g++){var u=c[g];u.start.row>=n&&u.shiftRow(l)}}else{l=Math.abs(e.start.column-e.end.column),i==="remove"&&(h=this.getFoldsInRange(e),this.removeFolds(h),l=-l);var u=this.getFoldLine(n);u&&u.addRemoveChars(n,r.column,l)}return t&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,t?this.$updateWrapData(n,o):this.$updateRowLengthCache(n,o),h}$updateRowLengthCache(e,t){this.$rowLengthCache[e]=null,this.$rowLengthCache[t]=null}$updateWrapData(e,t){var i=this.doc.getAllLines(),r=this.getTabSize(),s=this.$wrapData,n=this.$wrapLimit,o,l,h=e;for(t=Math.min(t,i.length-1);h<=t;)l=this.getFoldLine(h,l),l?(o=[],l.walk((function(c,u,g,w){var d;if(c!=null){d=this.$getDisplayTokens(c,o.length),d[0]=et;for(var m=1;m<d.length;m++)d[m]=ni}else d=this.$getDisplayTokens(i[u].substring(w,g),o.length);o=o.concat(d)}).bind(this),l.end.row,i[l.end.row].length+1),s[l.start.row]=this.$computeWrapSplits(o,n,r),h=l.end.row+1):(o=this.$getDisplayTokens(i[h]),s[h]=this.$computeWrapSplits(o,n,r),h++)}$computeWrapSplits(e,t,i){if(e.length==0)return[];var r=[],s=e.length,n=0,o=0,l=this.$wrapAsCode,h=this.$indentedSoftWrap,c=t<=Math.max(2*i,8)||h===!1?0:Math.floor(t/2);function u(){var f=0;if(c===0)return f;if(h)for(var v=0;v<e.length;v++){var p=e[v];if(p==tt)f+=1;else if(p==gr)f+=i;else{if(p==fr)continue;break}}return l&&h!==!1&&(f+=i),Math.min(f,c)}function g(f){for(var v=f-n,p=n;p<f;p++){var $=e[p];($===12||$===2)&&(v-=1)}r.length||(w=u(),r.indent=w),o+=v,r.push(o),n=f}for(var w=0;s-n>t-w;){var d=n+t-w;if(e[d-1]>=tt&&e[d]>=tt){g(d);continue}if(e[d]==et||e[d]==ni){for(d;d!=n-1&&e[d]!=et;d--);if(d>n){g(d);continue}for(d=n+t,d;d<e.length&&e[d]==ni;d++);if(d==e.length)break;g(d);continue}for(var m=Math.max(d-(t-(t>>2)),n-1);d>m&&e[d]<et;)d--;if(l){for(;d>m&&e[d]<et;)d--;for(;d>m&&e[d]==dr;)d--}else for(;d>m&&e[d]<tt;)d--;if(d>m){g(++d);continue}d=n+t,e[d]==ur&&d--,g(d-w)}return r}$getDisplayTokens(e,t){var i=[],r;t=t||0;for(var s=0;s<e.length;s++){var n=e.charCodeAt(s);if(n==9){r=this.getScreenTabSize(i.length+t),i.push(gr);for(var o=1;o<r;o++)i.push(fr)}else n==32?i.push(tt):n>39&&n<48||n>57&&n<64?i.push(dr):n>=4352&&vi(n)?i.push(cr,ur):i.push(cr)}return i}$getStringScreenWidth(e,t,i){if(t==0)return[0,0];t==null&&(t=1/0),i=i||0;var r,s;for(s=0;s<e.length&&(r=e.charCodeAt(s),r==9?i+=this.getScreenTabSize(i):r>=4352&&vi(r)?i+=2:i+=1,!(i>t));s++);return[i,s]}getRowLength(e){var t=1;return this.lineWidgets&&(t+=this.lineWidgets[e]&&this.lineWidgets[e].rowCount||0),!this.$useWrapMode||!this.$wrapData[e]?t:this.$wrapData[e].length+t}getRowLineCount(e){return!this.$useWrapMode||!this.$wrapData[e]?1:this.$wrapData[e].length+1}getRowWrapIndent(e){if(this.$useWrapMode){var t=this.screenToDocumentPosition(e,Number.MAX_VALUE),i=this.$wrapData[t.row];return i.length&&i[0]<t.column?i.indent:0}else return 0}getScreenLastRowColumn(e){var t=this.screenToDocumentPosition(e,Number.MAX_VALUE);return this.documentToScreenColumn(t.row,t.column)}getDocumentLastRowColumn(e,t){var i=this.documentToScreenRow(e,t);return this.getScreenLastRowColumn(i)}getDocumentLastRowColumnPosition(e,t){var i=this.documentToScreenRow(e,t);return this.screenToDocumentPosition(i,Number.MAX_VALUE/10)}getRowSplitData(e){if(this.$useWrapMode)return this.$wrapData[e]}getScreenTabSize(e){return this.$tabSize-(e%this.$tabSize|0)}screenToDocumentRow(e,t){return this.screenToDocumentPosition(e,t).row}screenToDocumentColumn(e,t){return this.screenToDocumentPosition(e,t).column}screenToDocumentPosition(e,t,i){if(e<0)return{row:0,column:0};var r,s=0,n=0,o,l=0,h=0,c=this.$screenRowCache,u=this.$getRowCacheIndex(c,e),g=c.length;if(g&&u>=0)var l=c[u],s=this.$docRowCache[u],w=e>c[g-1];else var w=!g;for(var d=this.getLength()-1,m=this.getNextFoldLine(s),f=m?m.start.row:1/0;l<=e&&(h=this.getRowLength(s),!(l+h>e||s>=d));)l+=h,s++,s>f&&(s=m.end.row+1,m=this.getNextFoldLine(s,m),f=m?m.start.row:1/0),w&&(this.$docRowCache.push(s),this.$screenRowCache.push(l));if(m&&m.start.row<=s)r=this.getFoldDisplayLine(m),s=m.start.row;else{if(l+h<=e||s>d)return{row:d,column:this.getLine(d).length};r=this.getLine(s),m=null}var v=0,p=Math.floor(e-l);if(this.$useWrapMode){var $=this.$wrapData[s];$&&(o=$[p],p>0&&$.length&&(v=$.indent,n=$[p-1]||$[$.length-1],r=r.substring(n)))}return i!==void 0&&this.$bidiHandler.isBidiRow(l+p,s,p)&&(t=this.$bidiHandler.offsetToCol(i)),n+=this.$getStringScreenWidth(r,t-v)[1],this.$useWrapMode&&n>=o&&(n=o-1),m?m.idxToPosition(n):{row:s,column:n}}documentToScreenPosition(e,t){if(typeof t>"u")var i=this.$clipPositionToDocument(e.row,e.column);else i=this.$clipPositionToDocument(e,t);e=i.row,t=i.column;var r=0,s=null,n=null;n=this.getFoldAt(e,t,1),n&&(e=n.start.row,t=n.start.column);var o,l=0,h=this.$docRowCache,c=this.$getRowCacheIndex(h,e),u=h.length;if(u&&c>=0)var l=h[c],r=this.$screenRowCache[c],g=e>h[u-1];else var g=!u;for(var w=this.getNextFoldLine(l),d=w?w.start.row:1/0;l<e;){if(l>=d){if(o=w.end.row+1,o>e)break;w=this.getNextFoldLine(o,w),d=w?w.start.row:1/0}else o=l+1;r+=this.getRowLength(l),l=o,g&&(this.$docRowCache.push(l),this.$screenRowCache.push(r))}var m="";w&&l>=d?(m=this.getFoldDisplayLine(w,e,t),s=w.start.row):(m=this.getLine(e).substring(0,t),s=e);var f=0;if(this.$useWrapMode){var v=this.$wrapData[s];if(v){for(var p=0;m.length>=v[p];)r++,p++;m=m.substring(v[p-1]||0,m.length),f=p>0?v.indent:0}}return this.lineWidgets&&this.lineWidgets[l]&&this.lineWidgets[l].rowsAbove&&(r+=this.lineWidgets[l].rowsAbove),{row:r,column:f+this.$getStringScreenWidth(m)[0]}}documentToScreenColumn(e,t){return this.documentToScreenPosition(e,t).column}documentToScreenRow(e,t){return this.documentToScreenPosition(e,t).row}getScreenLength(){var e=0,t=null;if(this.$useWrapMode)for(var s=this.$wrapData.length,n=0,r=0,t=this.$foldData[r++],o=t?t.start.row:1/0;n<s;){var l=this.$wrapData[n];e+=l?l.length+1:1,n++,n>o&&(n=t.end.row+1,t=this.$foldData[r++],o=t?t.start.row:1/0)}else{e=this.getLength();for(var i=this.$foldData,r=0;r<i.length;r++)t=i[r],e-=t.end.row-t.start.row}return this.lineWidgets&&(e+=this.$getWidgetScreenLength()),e}$setFontMetrics(e){this.$enableVarChar&&(this.$getStringScreenWidth=function(t,i,r){if(i===0)return[0,0];i||(i=1/0),r=r||0;var s,n;for(n=0;n<t.length&&(s=t.charAt(n),s==="	"?r+=this.getScreenTabSize(r):r+=e.getCharacterWidth(s),!(r>i));n++);return[r,n]})}getPrecedingCharacter(){var e=this.selection.getCursor();if(e.column===0)return e.row===0?"":this.doc.getNewLineCharacter();var t=this.getLine(e.row);return t[e.column-1]}destroy(){this.destroyed||(this.bgTokenizer.setDocument(null),this.bgTokenizer.cleanup(),this.destroyed=!0),this.endOperation(),this.$stopWorker(),this.removeAllListeners(),this.doc&&this.doc.off("change",this.$onChange),this.selection&&(this.selection.off("changeCursor",this.$onSelectionChange),this.selection.off("changeSelection",this.$onSelectionChange)),this.selection.detach()}};oe.$uid=0;oe.prototype.$modes=Ke.$modes;oe.prototype.getValue=oe.prototype.toString;oe.prototype.$defaultUndoManager={undo:function(){},redo:function(){},hasUndo:function(){},hasRedo:function(){},reset:function(){},add:function(){},addSelection:function(){},startNewGroup:function(){},addSession:function(){}};oe.prototype.$overwrite=!1;oe.prototype.$mode=null;oe.prototype.$modeId=null;oe.prototype.$scrollTop=0;oe.prototype.$scrollLeft=0;oe.prototype.$wrapLimit=80;oe.prototype.$useWrapMode=!1;oe.prototype.$wrapLimitRange={min:null,max:null};oe.prototype.lineWidgets=null;oe.prototype.isFullWidth=vi;eo.implement(oe.prototype,io);var cr=1,ur=2,et=3,ni=4,dr=9,tt=10,gr=11,fr=12;function vi(a){return a<4352?!1:a>=4352&&a<=4447||a>=4515&&a<=4519||a>=4602&&a<=4607||a>=9001&&a<=9002||a>=11904&&a<=11929||a>=11931&&a<=12019||a>=12032&&a<=12245||a>=12272&&a<=12283||a>=12288&&a<=12350||a>=12353&&a<=12438||a>=12441&&a<=12543||a>=12549&&a<=12589||a>=12593&&a<=12686||a>=12688&&a<=12730||a>=12736&&a<=12771||a>=12784&&a<=12830||a>=12832&&a<=12871||a>=12880&&a<=13054||a>=13056&&a<=19903||a>=19968&&a<=42124||a>=42128&&a<=42182||a>=43360&&a<=43388||a>=44032&&a<=55203||a>=55216&&a<=55238||a>=55243&&a<=55291||a>=63744&&a<=64255||a>=65040&&a<=65049||a>=65072&&a<=65106||a>=65108&&a<=65126||a>=65128&&a<=65131||a>=65281&&a<=65376||a>=65504&&a<=65510}Js().Folding.call(oe.prototype);qs().BracketMatch.call(oe.prototype);Ke.defineOptions(oe.prototype,"session",{wrap:{set:function(a){if(!a||a=="off"?a=!1:a=="free"?a=!0:a=="printMargin"?a=-1:typeof a=="string"&&(a=parseInt(a,10)||!1),this.$wrap!=a)if(this.$wrap=a,!a)this.setUseWrapMode(!1);else{var e=typeof a=="number"?a:null;this.setWrapLimitRange(e,e),this.setUseWrapMode(!0)}},get:function(){return this.getUseWrapMode()?this.$wrap==-1?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(a){a=a=="auto"?this.$mode.type!="text":a!="text",a!=this.$wrapAsCode&&(this.$wrapAsCode=a,this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0)))},initialValue:"auto"},indentedSoftWrap:{set:function(){this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0))},initialValue:!0},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(a){this.$useWorker=a,this.$stopWorker(),a&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(a){a=parseInt(a),a>0&&this.$tabSize!==a&&(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=a,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},navigateWithinSoftTabs:{initialValue:!1},foldStyle:{set:function(a){this.setFoldStyle(a)},handlesSet:!0},overwrite:{set:function(a){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(a){this.doc.setNewLineMode(a)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(a){this.setMode(a)},get:function(){return this.$modeId},handlesSet:!0}});Vt.EditSession=oe;var ki={},Ge=V,ho=ae,si=ne.Range;let co=class{constructor(){this.$options={}}set(e){return ho.mixin(this.$options,e),this}getOptions(){return Ge.copyObject(this.$options)}setOptions(e){this.$options=e}find(e){var t=this.$options,i=this.$matchIterator(e,t);if(!i)return!1;var r=null;return i.forEach(function(s,n,o,l){return r=new si(s,n,o,l),n==l&&t.start&&t.start.start&&t.skipCurrent!=!1&&r.isEqual(t.start)?(r=null,!1):!0}),r}findAll(e){var t=this.$options;if(!t.needle)return[];this.$assembleRegExp(t);var i=t.range,r=i?e.getLines(i.start.row,i.end.row):e.doc.getAllLines(),s=[],n=t.re;if(t.$isMultiLine){var o=n.length,l=r.length-o,h;e:for(var c=n.offset||0;c<=l;c++){for(var u=0;u<o;u++)if(r[c+u].search(n[u])==-1)continue e;var g=r[c],w=r[c+o-1],d=g.length-g.match(n[0])[0].length,m=w.match(n[o-1])[0].length;h&&h.end.row===c&&h.end.column>d||(s.push(h=new si(c,d,c+o-1,m)),o>2&&(c=c+o-2))}}else for(var f=0;f<r.length;f++)for(var v=Ge.getMatchOffsets(r[f],n),u=0;u<v.length;u++){var p=v[u];s.push(new si(f,p.offset,f,p.offset+p.length))}if(i){for(var $=i.start.column,C=i.end.column,f=0,u=s.length-1;f<u&&s[f].start.column<$&&s[f].start.row==0;)f++;for(var y=i.end.row-i.start.row;f<u&&s[u].end.column>C&&s[u].end.row==y;)u--;for(s=s.slice(f,u+1),f=0,u=s.length;f<u;f++)s[f].start.row+=i.start.row,s[f].end.row+=i.start.row}return s}replace(e,t){var i=this.$options,r=this.$assembleRegExp(i);if(i.$isMultiLine)return t;if(r){var s=r.exec(e);if(!s||s[0].length!=e.length)return null;if(i.regExp||(t=t.replace(/\$/g,"$$$$")),t=e.replace(r,t),i.preserveCase){t=t.split("");for(var n=Math.min(e.length,e.length);n--;){var o=e[n];o&&o.toLowerCase()!=o?t[n]=t[n].toUpperCase():t[n]=t[n].toLowerCase()}t=t.join("")}return t}}$assembleRegExp(e,t){if(e.needle instanceof RegExp)return e.re=e.needle;var i=e.needle;if(!e.needle)return e.re=!1;e.regExp||(i=Ge.escapeRegExp(i));var r=e.caseSensitive?"gm":"gmi";try{new RegExp(i,"u"),e.$supportsUnicodeFlag=!0,r+="u"}catch{e.$supportsUnicodeFlag=!1}if(e.wholeWord&&(i=uo(i,e)),e.$isMultiLine=!t&&/[\n\r]/.test(i),e.$isMultiLine)return e.re=this.$assembleMultilineRegExp(i,r);try{var s=new RegExp(i,r)}catch{s=!1}return e.re=s}$assembleMultilineRegExp(e,t){for(var i=e.replace(/\r\n|\r|\n/g,`$
^`).split(`
`),r=[],s=0;s<i.length;s++)try{r.push(new RegExp(i[s],t))}catch{return!1}return r}$matchIterator(e,t){var i=this.$assembleRegExp(t);if(!i)return!1;var r=t.backwards==!0,s=t.skipCurrent!=!1,n=i.unicode,o=t.range,l=t.start;l||(l=o?o[r?"end":"start"]:e.selection.getRange()),l.start&&(l=l[s!=r?"end":"start"]);var h=o?o.start.row:0,c=o?o.end.row:e.getLength()-1;if(r)var u=function(d){var m=l.row;if(!w(m,l.column,d)){for(m--;m>=h;m--)if(w(m,Number.MAX_VALUE,d))return;if(t.wrap!=!1){for(m=c,h=l.row;m>=h;m--)if(w(m,Number.MAX_VALUE,d))return}}};else var u=function(m){var f=l.row;if(!w(f,l.column,m)){for(f=f+1;f<=c;f++)if(w(f,0,m))return;if(t.wrap!=!1){for(f=h,c=l.row;f<=c;f++)if(w(f,0,m))return}}};if(t.$isMultiLine)var g=i.length,w=function(d,m,f){var v=r?d-g+1:d;if(!(v<0||v+g>e.getLength())){var p=e.getLine(v),$=p.search(i[0]);if(!(!r&&$<m||$===-1)){for(var C=1;C<g;C++)if(p=e.getLine(v+C),p.search(i[C])==-1)return;var y=p.match(i[g-1])[0].length;if(!(r&&y>m)&&f(v,$,v+g-1,y))return!0}}};else if(r)var w=function(m,f,v){var p=e.getLine(m),$=[],C,y=0;for(i.lastIndex=0;C=i.exec(p);){var S=C[0].length;if(y=C.index,!S){if(y>=p.length)break;i.lastIndex=y+=Ge.skipEmptyMatch(p,y,n)}if(C.index+S>f)break;$.push(C.index,S)}for(var M=$.length-1;M>=0;M-=2){var E=$[M-1],S=$[M];if(v(m,E,m,E+S))return!0}};else var w=function(m,f,v){var p=e.getLine(m),$,C;for(i.lastIndex=f;C=i.exec(p);){var y=C[0].length;if($=C.index,v(m,$,m,$+y))return!0;if(!y&&(i.lastIndex=$+=Ge.skipEmptyMatch(p,$,n),$>=p.length))return!1}};return{forEach:u}}};function uo(a,e){let t=Ge.supportsLookbehind();function i(o,l=!0){return(t&&e.$supportsUnicodeFlag?new RegExp("[\\p{L}\\p{N}_]","u"):new RegExp("\\w")).test(o)||e.regExp?t&&e.$supportsUnicodeFlag?l?"(?<=^|[^\\p{L}\\p{N}_])":"(?=[^\\p{L}\\p{N}_]|$)":"\\b":""}let r=Array.from(a),s=r[0],n=r[r.length-1];return i(s)+a+i(n,!1)}ki.Search=co;var an={},jt={},st=He,go=be,St=st.KEY_MODS;let ut=class{constructor(e,t){this.$init(e,t,!1)}$init(e,t,i){this.platform=t||(go.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(e),this.$singleCommand=i}addCommand(e){this.commands[e.name]&&this.removeCommand(e),this.commands[e.name]=e,e.bindKey&&this._buildKeyHash(e)}removeCommand(e,t){var i=e&&(typeof e=="string"?e:e.name);e=this.commands[i],t||delete this.commands[i];var r=this.commandKeyBinding;for(var s in r){var n=r[s];if(n==e)delete r[s];else if(Array.isArray(n)){var o=n.indexOf(e);o!=-1&&(n.splice(o,1),n.length==1&&(r[s]=n[0]))}}}bindKey(e,t,i){if(typeof e=="object"&&e&&(i==null&&(i=e.position),e=e[this.platform]),!!e){if(typeof t=="function")return this.addCommand({exec:t,bindKey:e,name:t.name||e});e.split("|").forEach(function(r){var s="";if(r.indexOf(" ")!=-1){var n=r.split(/\s+/);r=n.pop(),n.forEach(function(h){var c=this.parseKeys(h),u=St[c.hashId]+c.key;s+=(s?" ":"")+u,this._addCommandToBinding(s,"chainKeys")},this),s+=" "}var o=this.parseKeys(r),l=St[o.hashId]+o.key;this._addCommandToBinding(s+l,t,i)},this)}}_addCommandToBinding(e,t,i){var r=this.commandKeyBinding,s;if(!t)delete r[e];else if(!r[e]||this.$singleCommand)r[e]=t;else{Array.isArray(r[e])?(s=r[e].indexOf(t))!=-1&&r[e].splice(s,1):r[e]=[r[e]],typeof i!="number"&&(i=vr(t));var n=r[e];for(s=0;s<n.length;s++){var o=n[s],l=vr(o);if(l>i)break}n.splice(s,0,t)}}addCommands(e){e&&Object.keys(e).forEach(function(t){var i=e[t];if(i){if(typeof i=="string")return this.bindKey(i,t);typeof i=="function"&&(i={exec:i}),typeof i=="object"&&(i.name||(i.name=t),this.addCommand(i))}},this)}removeCommands(e){Object.keys(e).forEach(function(t){this.removeCommand(e[t])},this)}bindKeys(e){Object.keys(e).forEach(function(t){this.bindKey(t,e[t])},this)}_buildKeyHash(e){this.bindKey(e.bindKey,e)}parseKeys(e){var t=e.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(l){return l}),i=t.pop(),r=st[i];if(st.FUNCTION_KEYS[r])i=st.FUNCTION_KEYS[r].toLowerCase();else if(t.length){if(t.length==1&&t[0]=="shift")return{key:i.toUpperCase(),hashId:-1}}else return{key:i,hashId:-1};for(var s=0,n=t.length;n--;){var o=st.KEY_MODS[t[n]];if(o==null)return typeof console<"u"&&console.error("invalid modifier "+t[n]+" in "+e),!1;s|=o}return{key:i,hashId:s}}findKeyCommand(e,t){var i=St[e]+t;return this.commandKeyBinding[i]}handleKeyboard(e,t,i,r){if(!(r<0)){var s=St[t]+i,n=this.commandKeyBinding[s];return e.$keyChain&&(e.$keyChain+=" "+s,n=this.commandKeyBinding[e.$keyChain]||n),n&&(n=="chainKeys"||n[n.length-1]=="chainKeys")?(e.$keyChain=e.$keyChain||s,{command:"null"}):(e.$keyChain&&((!t||t==4)&&i.length==1?e.$keyChain=e.$keyChain.slice(0,-s.length-1):(t==-1||r>0)&&(e.$keyChain="")),{command:n})}}getStatusText(e,t){return t.$keyChain||""}};function vr(a){return typeof a=="object"&&a.bindKey&&a.bindKey.position||(a.isDefault?-100:0)}class ln extends ut{constructor(e,t){super(e,t),this.$singleCommand=!0}}ln.call=function(a,e,t){ut.prototype.$init.call(a,e,t,!0)};ut.call=function(a,e,t){ut.prototype.$init.call(a,e,t,!1)};jt.HashHandler=ln;jt.MultiHashHandler=ut;var fo=ae,vo=jt.MultiHashHandler,mo=fe.EventEmitter;let hn=class extends vo{constructor(e,t){super(t,e),this.byName=this.commands,this.setDefaultHandler("exec",function(i){return i.args?i.command.exec(i.editor,i.args,i.event,!1):i.command.exec(i.editor,{},i.event,!0)})}exec(e,t,i){if(Array.isArray(e)){for(var r=e.length;r--;)if(this.exec(e[r],t,i))return!0;return!1}if(typeof e=="string"&&(e=this.commands[e]),!this.canExecute(e,t))return!1;var s={editor:t,command:e,args:i};return s.returnValue=this._emit("exec",s),this._signal("afterExec",s),s.returnValue!==!1}canExecute(e,t){return typeof e=="string"&&(e=this.commands[e]),!(!e||t&&t.$readOnly&&!e.readOnly||this.$checkCommandState!=!1&&e.isAvailable&&!e.isAvailable(t))}toggleRecording(e){if(!this.$inReplay)return e&&e._emit("changeStatus"),this.recording?(this.macro.pop(),this.off("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=(function(t){this.macro.push([t.command,t.args])}).bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)}replay(e){if(!(this.$inReplay||!this.macro)){if(this.recording)return this.toggleRecording(e);try{this.$inReplay=!0,this.macro.forEach(function(t){typeof t=="string"?this.exec(t,e):this.exec(t[0],e,t[1])},this)}finally{this.$inReplay=!1}}}trimMacro(e){return e.map(function(t){return typeof t[0]!="string"&&(t[0]=t[0].name),t[1]||(t=t[0]),t})}};fo.implement(hn.prototype,mo);an.CommandManager=hn;var cn={};(function(a){var e=V,t=we,i=ne.Range;function r(n,o){return{win:n,mac:o}}a.commands=[{name:"showSettingsMenu",description:"Show settings menu",bindKey:r("Ctrl-,","Command-,"),exec:function(n){t.loadModule("ace/ext/settings_menu",function(o){o.init(n),n.showSettingsMenu()})},readOnly:!0},{name:"goToNextError",description:"Go to next error",bindKey:r("Alt-E","F4"),exec:function(n){t.loadModule("ace/ext/error_marker",function(o){o.showErrorMarker(n,1)})},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",description:"Go to previous error",bindKey:r("Alt-Shift-E","Shift-F4"),exec:function(n){t.loadModule("ace/ext/error_marker",function(o){o.showErrorMarker(n,-1)})},scrollIntoView:"animate",readOnly:!0},{name:"selectall",description:"Select all",bindKey:r("Ctrl-A","Command-A"),exec:function(n){n.selectAll()},readOnly:!0},{name:"centerselection",description:"Center selection",bindKey:r(null,"Ctrl-L"),exec:function(n){n.centerSelection()},readOnly:!0},{name:"gotoline",description:"Go to line...",bindKey:r("Ctrl-L","Command-L"),exec:function(n,o){typeof o=="number"&&!isNaN(o)&&n.gotoLine(o),n.prompt({$type:"gotoLine"})},readOnly:!0},{name:"fold",bindKey:r("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(n){n.session.toggleFold(!1)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:r("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(n){n.session.toggleFold(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",description:"Toggle fold widget",bindKey:r("F2","F2"),exec:function(n){n.session.toggleFoldWidget()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",description:"Toggle parent fold widget",bindKey:r("Alt-F2","Alt-F2"),exec:function(n){n.session.toggleFoldWidget(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"foldall",description:"Fold all",bindKey:r(null,"Ctrl-Command-Option-0"),exec:function(n){n.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldAllComments",description:"Fold all comments",bindKey:r(null,"Ctrl-Command-Option-0"),exec:function(n){n.session.foldAllComments()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",description:"Fold other",bindKey:r("Alt-0","Command-Option-0"),exec:function(n){n.session.foldAll(),n.session.unfold(n.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",description:"Unfold all",bindKey:r("Alt-Shift-0","Command-Option-Shift-0"),exec:function(n){n.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",description:"Find next",bindKey:r("Ctrl-K","Command-G"),exec:function(n){n.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",description:"Find previous",bindKey:r("Ctrl-Shift-K","Command-Shift-G"),exec:function(n){n.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",description:"Select or find next",bindKey:r("Alt-K","Ctrl-G"),exec:function(n){n.selection.isEmpty()?n.selection.selectWord():n.findNext()},readOnly:!0},{name:"selectOrFindPrevious",description:"Select or find previous",bindKey:r("Alt-Shift-K","Ctrl-Shift-G"),exec:function(n){n.selection.isEmpty()?n.selection.selectWord():n.findPrevious()},readOnly:!0},{name:"find",description:"Find",bindKey:r("Ctrl-F","Command-F"),exec:function(n){t.loadModule("ace/ext/searchbox",function(o){o.Search(n)})},readOnly:!0},{name:"overwrite",description:"Overwrite",bindKey:"Insert",exec:function(n){n.toggleOverwrite()},readOnly:!0},{name:"selecttostart",description:"Select to start",bindKey:r("Ctrl-Shift-Home","Command-Shift-Home|Command-Shift-Up"),exec:function(n){n.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",description:"Go to start",bindKey:r("Ctrl-Home","Command-Home|Command-Up"),exec:function(n){n.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",description:"Select up",bindKey:r("Shift-Up","Shift-Up|Ctrl-Shift-P"),exec:function(n){n.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",description:"Go line up",bindKey:r("Up","Up|Ctrl-P"),exec:function(n,o){n.navigateUp(o.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",description:"Select to end",bindKey:r("Ctrl-Shift-End","Command-Shift-End|Command-Shift-Down"),exec:function(n){n.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",description:"Go to end",bindKey:r("Ctrl-End","Command-End|Command-Down"),exec:function(n){n.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",description:"Select down",bindKey:r("Shift-Down","Shift-Down|Ctrl-Shift-N"),exec:function(n){n.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",description:"Go line down",bindKey:r("Down","Down|Ctrl-N"),exec:function(n,o){n.navigateDown(o.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",description:"Select word left",bindKey:r("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(n){n.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",description:"Go to word left",bindKey:r("Ctrl-Left","Option-Left"),exec:function(n){n.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",description:"Select to line start",bindKey:r("Alt-Shift-Left","Command-Shift-Left|Ctrl-Shift-A"),exec:function(n){n.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",description:"Go to line start",bindKey:r("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(n){n.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",description:"Select left",bindKey:r("Shift-Left","Shift-Left|Ctrl-Shift-B"),exec:function(n){n.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",description:"Go to left",bindKey:r("Left","Left|Ctrl-B"),exec:function(n,o){n.navigateLeft(o.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",description:"Select word right",bindKey:r("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(n){n.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",description:"Go to word right",bindKey:r("Ctrl-Right","Option-Right"),exec:function(n){n.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",description:"Select to line end",bindKey:r("Alt-Shift-Right","Command-Shift-Right|Shift-End|Ctrl-Shift-E"),exec:function(n){n.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",description:"Go to line end",bindKey:r("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(n){n.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",description:"Select right",bindKey:r("Shift-Right","Shift-Right"),exec:function(n){n.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",description:"Go to right",bindKey:r("Right","Right|Ctrl-F"),exec:function(n,o){n.navigateRight(o.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",description:"Select page down",bindKey:"Shift-PageDown",exec:function(n){n.selectPageDown()},readOnly:!0},{name:"pagedown",description:"Page down",bindKey:r(null,"Option-PageDown"),exec:function(n){n.scrollPageDown()},readOnly:!0},{name:"gotopagedown",description:"Go to page down",bindKey:r("PageDown","PageDown|Ctrl-V"),exec:function(n){n.gotoPageDown()},readOnly:!0},{name:"selectpageup",description:"Select page up",bindKey:"Shift-PageUp",exec:function(n){n.selectPageUp()},readOnly:!0},{name:"pageup",description:"Page up",bindKey:r(null,"Option-PageUp"),exec:function(n){n.scrollPageUp()},readOnly:!0},{name:"gotopageup",description:"Go to page up",bindKey:"PageUp",exec:function(n){n.gotoPageUp()},readOnly:!0},{name:"scrollup",description:"Scroll up",bindKey:r("Ctrl-Up",null),exec:function(n){n.renderer.scrollBy(0,-2*n.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",description:"Scroll down",bindKey:r("Ctrl-Down",null),exec:function(n){n.renderer.scrollBy(0,2*n.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",description:"Select line start",bindKey:"Shift-Home",exec:function(n){n.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",description:"Select line end",bindKey:"Shift-End",exec:function(n){n.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",description:"Toggle recording",bindKey:r("Ctrl-Alt-E","Command-Option-E"),exec:function(n){n.commands.toggleRecording(n)},readOnly:!0},{name:"replaymacro",description:"Replay macro",bindKey:r("Ctrl-Shift-E","Command-Shift-E"),exec:function(n){n.commands.replay(n)},readOnly:!0},{name:"jumptomatching",description:"Jump to matching",bindKey:r("Ctrl-\\|Ctrl-P","Command-\\"),exec:function(n){n.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",description:"Select to matching",bindKey:r("Ctrl-Shift-\\|Ctrl-Shift-P","Command-Shift-\\"),exec:function(n){n.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",description:"Expand to matching",bindKey:r("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(n){n.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",description:"Pass keys to browser",bindKey:r(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:"copy",description:"Copy",exec:function(n){},readOnly:!0},{name:"cut",description:"Cut",exec:function(n){var o=n.$copyWithEmptySelection&&n.selection.isEmpty(),l=o?n.selection.getLineRange():n.selection.getRange();n._emit("cut",l),l.isEmpty()||n.session.remove(l),n.clearSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",description:"Paste",exec:function(n,o){n.$handlePaste(o)},scrollIntoView:"cursor"},{name:"removeline",description:"Remove line",bindKey:r("Ctrl-D","Command-D"),exec:function(n){n.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",description:"Duplicate selection",bindKey:r("Ctrl-Shift-D","Command-Shift-D"),exec:function(n){n.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",description:"Sort lines",bindKey:r("Ctrl-Alt-S","Command-Alt-S"),exec:function(n){n.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",description:"Toggle comment",bindKey:r("Ctrl-/","Command-/"),exec:function(n){n.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",description:"Toggle block comment",bindKey:r("Ctrl-Shift-/","Command-Shift-/"),exec:function(n){n.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",description:"Modify number up",bindKey:r("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(n){n.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",description:"Modify number down",bindKey:r("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(n){n.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",description:"Replace",bindKey:r("Ctrl-H","Command-Option-F"),exec:function(n){t.loadModule("ace/ext/searchbox",function(o){o.Search(n,!0)})}},{name:"undo",description:"Undo",bindKey:r("Ctrl-Z","Command-Z"),exec:function(n){n.undo()}},{name:"redo",description:"Redo",bindKey:r("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(n){n.redo()}},{name:"copylinesup",description:"Copy lines up",bindKey:r("Alt-Shift-Up","Command-Option-Up"),exec:function(n){n.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",description:"Move lines up",bindKey:r("Alt-Up","Option-Up"),exec:function(n){n.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",description:"Copy lines down",bindKey:r("Alt-Shift-Down","Command-Option-Down"),exec:function(n){n.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",description:"Move lines down",bindKey:r("Alt-Down","Option-Down"),exec:function(n){n.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",description:"Delete",bindKey:r("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(n){n.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",description:"Backspace",bindKey:r("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(n){n.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",description:"Cut or delete",bindKey:r("Shift-Delete",null),exec:function(n){if(n.selection.isEmpty())n.remove("left");else return!1},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",description:"Remove to line start",bindKey:r("Alt-Backspace","Command-Backspace"),exec:function(n){n.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",description:"Remove to line end",bindKey:r("Alt-Delete","Ctrl-K|Command-Delete"),exec:function(n){n.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestarthard",description:"Remove to line start hard",bindKey:r("Ctrl-Shift-Backspace",null),exec:function(n){var o=n.selection.getRange();o.start.column=0,n.session.remove(o)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineendhard",description:"Remove to line end hard",bindKey:r("Ctrl-Shift-Delete",null),exec:function(n){var o=n.selection.getRange();o.end.column=Number.MAX_VALUE,n.session.remove(o)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",description:"Remove word left",bindKey:r("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(n){n.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",description:"Remove word right",bindKey:r("Ctrl-Delete","Alt-Delete"),exec:function(n){n.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",description:"Outdent",bindKey:r("Shift-Tab","Shift-Tab"),exec:function(n){n.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",description:"Indent",bindKey:r("Tab","Tab"),exec:function(n){n.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",description:"Block outdent",bindKey:r("Ctrl-[","Ctrl-["),exec:function(n){n.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",description:"Block indent",bindKey:r("Ctrl-]","Ctrl-]"),exec:function(n){n.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",description:"Insert string",exec:function(n,o){n.insert(o)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",description:"Insert text",exec:function(n,o){n.insert(e.stringRepeat(o.text||"",o.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",description:"Split line",bindKey:r(null,"Ctrl-O"),exec:function(n){n.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",description:"Transpose letters",bindKey:r("Alt-Shift-X","Ctrl-T"),exec:function(n){n.transposeLetters()},multiSelectAction:function(n){n.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",description:"To uppercase",bindKey:r("Ctrl-U","Ctrl-U"),exec:function(n){n.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",description:"To lowercase",bindKey:r("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(n){n.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"autoindent",description:"Auto Indent",bindKey:r(null,null),exec:function(n){n.autoIndent()},scrollIntoView:"animate"},{name:"expandtoline",description:"Expand to line",bindKey:r("Ctrl-Shift-L","Command-Shift-L"),exec:function(n){var o=n.selection.getRange();o.start.column=o.end.column=0,o.end.row++,n.selection.setRange(o,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"openlink",bindKey:r("Ctrl+F3","F3"),exec:function(n){n.openLink()}},{name:"joinlines",description:"Join lines",bindKey:r(null,null),exec:function(n){for(var o=n.selection.isBackwards(),l=o?n.selection.getSelectionLead():n.selection.getSelectionAnchor(),h=o?n.selection.getSelectionAnchor():n.selection.getSelectionLead(),c=n.session.doc.getLine(l.row).length,u=n.session.doc.getTextRange(n.selection.getRange()),g=u.replace(/\n\s*/," ").length,w=n.session.doc.getLine(l.row),d=l.row+1;d<=h.row+1;d++){var m=e.stringTrimLeft(e.stringTrimRight(n.session.doc.getLine(d)));m.length!==0&&(m=" "+m),w+=m}h.row+1<n.session.doc.getLength()-1&&(w+=n.session.doc.getNewLineCharacter()),n.clearSelection(),n.session.doc.replace(new i(l.row,0,h.row+2,0),w),g>0?(n.selection.moveCursorTo(l.row,l.column),n.selection.selectTo(l.row,l.column+g)):(c=n.session.doc.getLine(l.row).length>c?c+1:c,n.selection.moveCursorTo(l.row,c))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",description:"Invert selection",bindKey:r(null,null),exec:function(n){var o=n.session.doc.getLength()-1,l=n.session.doc.getLine(o).length,h=n.selection.rangeList.ranges,c=[];h.length<1&&(h=[n.selection.getRange()]);for(var u=0;u<h.length;u++)u==h.length-1&&(h[u].end.row===o&&h[u].end.column===l||c.push(new i(h[u].end.row,h[u].end.column,o,l))),u===0?h[u].start.row===0&&h[u].start.column===0||c.push(new i(0,0,h[u].start.row,h[u].start.column)):c.push(new i(h[u-1].end.row,h[u-1].end.column,h[u].start.row,h[u].start.column));n.exitMultiSelectMode(),n.clearSelection();for(var u=0;u<c.length;u++)n.selection.addRange(c[u],!1)},readOnly:!0,scrollIntoView:"none"},{name:"addLineAfter",description:"Add new line after the current line",exec:function(n){n.selection.clearSelection(),n.navigateLineEnd(),n.insert(`
`)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"addLineBefore",description:"Add new line before the current line",exec:function(n){n.selection.clearSelection();var o=n.getCursorPosition();n.selection.moveTo(o.row-1,Number.MAX_VALUE),n.insert(`
`),o.row===0&&n.navigateUp()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"openCommandPallete",exec:function(n){console.warn("This is an obsolete command. Please use `openCommandPalette` instead."),n.prompt({$type:"commands"})},readOnly:!0},{name:"openCommandPalette",description:"Open command palette",bindKey:r("F1","F1"),exec:function(n){n.prompt({$type:"commands"})},readOnly:!0},{name:"modeSelect",description:"Change language mode...",bindKey:r(null,null),exec:function(n){n.prompt({$type:"modes"})},readOnly:!0}];for(var s=1;s<9;s++)a.commands.push({name:"foldToLevel"+s,description:"Fold To Level "+s,level:s,exec:function(n){n.session.foldToLevel(this.level)},scrollIntoView:"center",readOnly:!0})})(cn);var Ri={},Me=He,po=zt.GutterTooltip;let wo=class{constructor(e){this.editor=e,this.gutterLayer=e.renderer.$gutterLayer,this.element=e.renderer.$gutter,this.lines=e.renderer.$gutterLayer.$lines,this.activeRowIndex=null,this.activeLane=null,this.annotationTooltip=new po(this.editor)}addListener(){this.element.addEventListener("keydown",this.$onGutterKeyDown.bind(this)),this.element.addEventListener("focusout",this.$blurGutter.bind(this)),this.editor.on("mousewheel",this.$blurGutter.bind(this))}removeListener(){this.element.removeEventListener("keydown",this.$onGutterKeyDown.bind(this)),this.element.removeEventListener("focusout",this.$blurGutter.bind(this)),this.editor.off("mousewheel",this.$blurGutter.bind(this))}$onGutterKeyDown(e){if(this.annotationTooltip.isOpen){e.preventDefault(),e.keyCode===Me.escape&&this.annotationTooltip.hideTooltip();return}if(e.target===this.element){if(e.keyCode!=Me.enter)return;e.preventDefault();var t=this.editor.getCursorPosition().row;this.editor.isRowVisible(t)||this.editor.scrollToLine(t,!0,!0),setTimeout((function(){var i=this.$rowToRowIndex(this.gutterLayer.$cursorCell.row),r=this.$findNearestFoldWidget(i),s=this.$findNearestAnnotation(i);if(!(r===null&&s===null)){if(r===null&&s!==null){this.activeRowIndex=s,this.activeLane="annotation",this.$focusAnnotation(this.activeRowIndex);return}if(r!==null&&s===null){this.activeRowIndex=r,this.activeLane="fold",this.$focusFoldWidget(this.activeRowIndex);return}if(Math.abs(s-i)<Math.abs(r-i)){this.activeRowIndex=s,this.activeLane="annotation",this.$focusAnnotation(this.activeRowIndex);return}else{this.activeRowIndex=r,this.activeLane="fold",this.$focusFoldWidget(this.activeRowIndex);return}}}).bind(this),10);return}this.$handleGutterKeyboardInteraction(e),setTimeout((function(){this.editor._signal("gutterkeydown",new un(e,this))}).bind(this),10)}$handleGutterKeyboardInteraction(e){if(e.keyCode===Me.tab){e.preventDefault();return}if(e.keyCode===Me.escape){e.preventDefault(),this.$blurGutter(),this.element.focus(),this.lane=null;return}if(e.keyCode===Me.up){switch(e.preventDefault(),this.activeLane){case"fold":this.$moveFoldWidgetUp();break;case"annotation":this.$moveAnnotationUp();break}return}if(e.keyCode===Me.down){switch(e.preventDefault(),this.activeLane){case"fold":this.$moveFoldWidgetDown();break;case"annotation":this.$moveAnnotationDown();break}return}if(e.keyCode===Me.left){e.preventDefault(),this.$switchLane("annotation");return}if(e.keyCode===Me.right){e.preventDefault(),this.$switchLane("fold");return}if(e.keyCode===Me.enter||e.keyCode===Me.space){switch(e.preventDefault(),this.activeLane){case"fold":if(this.gutterLayer.session.foldWidgets[this.$rowIndexToRow(this.activeRowIndex)]==="start"){var t=this.$rowIndexToRow(this.activeRowIndex);this.editor.session.onFoldWidgetClick(this.$rowIndexToRow(this.activeRowIndex),e),setTimeout((function(){this.$rowIndexToRow(this.activeRowIndex)!==t&&(this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=this.$rowToRowIndex(t),this.$focusFoldWidget(this.activeRowIndex))}).bind(this),10);break}else if(this.gutterLayer.session.foldWidgets[this.$rowIndexToRow(this.activeRowIndex)]==="end")break;return;case"annotation":var i=this.lines.cells[this.activeRowIndex].element.childNodes[2],r=i.getBoundingClientRect(),s=this.annotationTooltip.getElement().style;s.left=r.right+"px",s.top=r.bottom+"px",this.annotationTooltip.showTooltip(this.$rowIndexToRow(this.activeRowIndex));break}return}}$blurGutter(){if(this.activeRowIndex!==null)switch(this.activeLane){case"fold":this.$blurFoldWidget(this.activeRowIndex);break;case"annotation":this.$blurAnnotation(this.activeRowIndex);break}this.annotationTooltip.isOpen&&this.annotationTooltip.hideTooltip()}$isFoldWidgetVisible(e){var t=this.editor.isRowFullyVisible(this.$rowIndexToRow(e)),i=this.$getFoldWidget(e).style.display!=="none";return t&&i}$isAnnotationVisible(e){var t=this.editor.isRowFullyVisible(this.$rowIndexToRow(e)),i=this.$getAnnotation(e).style.display!=="none";return t&&i}$getFoldWidget(e){var t=this.lines.get(e),i=t.element;return i.childNodes[1]}$getAnnotation(e){var t=this.lines.get(e),i=t.element;return i.childNodes[2]}$findNearestFoldWidget(e){if(this.$isFoldWidgetVisible(e))return e;for(var t=0;e-t>0||e+t<this.lines.getLength()-1;){if(t++,e-t>=0&&this.$isFoldWidgetVisible(e-t))return e-t;if(e+t<=this.lines.getLength()-1&&this.$isFoldWidgetVisible(e+t))return e+t}return null}$findNearestAnnotation(e){if(this.$isAnnotationVisible(e))return e;for(var t=0;e-t>0||e+t<this.lines.getLength()-1;){if(t++,e-t>=0&&this.$isAnnotationVisible(e-t))return e-t;if(e+t<=this.lines.getLength()-1&&this.$isAnnotationVisible(e+t))return e+t}return null}$focusFoldWidget(e){if(e!=null){var t=this.$getFoldWidget(e);t.classList.add(this.editor.renderer.keyboardFocusClassName),t.focus()}}$focusAnnotation(e){if(e!=null){var t=this.$getAnnotation(e);t.classList.add(this.editor.renderer.keyboardFocusClassName),t.focus()}}$blurFoldWidget(e){var t=this.$getFoldWidget(e);t.classList.remove(this.editor.renderer.keyboardFocusClassName),t.blur()}$blurAnnotation(e){var t=this.$getAnnotation(e);t.classList.remove(this.editor.renderer.keyboardFocusClassName),t.blur()}$moveFoldWidgetUp(){for(var e=this.activeRowIndex;e>0;)if(e--,this.$isFoldWidgetVisible(e)){this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=e,this.$focusFoldWidget(this.activeRowIndex);return}}$moveFoldWidgetDown(){for(var e=this.activeRowIndex;e<this.lines.getLength()-1;)if(e++,this.$isFoldWidgetVisible(e)){this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=e,this.$focusFoldWidget(this.activeRowIndex);return}}$moveAnnotationUp(){for(var e=this.activeRowIndex;e>0;)if(e--,this.$isAnnotationVisible(e)){this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=e,this.$focusAnnotation(this.activeRowIndex);return}}$moveAnnotationDown(){for(var e=this.activeRowIndex;e<this.lines.getLength()-1;)if(e++,this.$isAnnotationVisible(e)){this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=e,this.$focusAnnotation(this.activeRowIndex);return}}$switchLane(e){switch(e){case"annotation":if(this.activeLane==="annotation")break;var t=this.$findNearestAnnotation(this.activeRowIndex);if(t==null)break;this.activeLane="annotation",this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=t,this.$focusAnnotation(this.activeRowIndex);break;case"fold":if(this.activeLane==="fold")break;var i=this.$findNearestFoldWidget(this.activeRowIndex);if(i==null)break;this.activeLane="fold",this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=i,this.$focusFoldWidget(this.activeRowIndex);break}}$rowIndexToRow(e){var t=this.lines.get(e);return t?t.row:null}$rowToRowIndex(e){for(var t=0;t<this.lines.getLength();t++){var i=this.lines.get(t);if(i.row==e)return t}return null}};Ri.GutterKeyboardHandler=wo;class un{constructor(e,t){this.gutterKeyboardHandler=t,this.domEvent=e}getKey(){return Me.keyCodeToString(this.domEvent.keyCode)}getRow(){return this.gutterKeyboardHandler.$rowIndexToRow(this.gutterKeyboardHandler.activeRowIndex)}isInAnnotationLane(){return this.gutterKeyboardHandler.activeLane==="annotation"}isInFoldLane(){return this.gutterKeyboardHandler.activeLane==="fold"}}Ri.GutterKeyboardEvent=un;var dn=ae,lt=ee,it=V,gn=be,$o=yi.TextInput,yo=Ir.MouseHandler,bo=Br.FoldHandler,Co=zr.KeyBinding,So=Vt.EditSession,Ao=ki.Search,de=ne.Range,Mo=fe.EventEmitter,Lo=an.CommandManager,To=cn.commands,ot=we,mr=Ye.TokenIterator,xo=Ri.GutterKeyboardHandler,At=we.nls,pr=kr,Eo=He;class xe{constructor(e,t,i){this.session,this.$toDestroy=[];var r=e.getContainerElement();this.container=r,this.renderer=e,this.id="editor"+ ++xe.$uid,this.commands=new Lo(gn.isMac?"mac":"win",To),typeof document=="object"&&(this.textInput=new $o(e.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.$mouseHandler=new yo(this),new bo(this)),this.keyBinding=new Co(this),this.$search=new Ao().set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=it.delayedCall((function(){this._signal("input",{}),this.session&&!this.session.destroyed&&this.session.bgTokenizer.scheduleStart()}).bind(this)),this.on("change",function(s,n){n._$emitInputEvent.schedule(31)}),this.setSession(t||i&&i.session||new So("")),ot.resetOptions(this),i&&this.setOptions(i),ot._signal("editor",this)}$initOperationListeners(){this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0)}startOperation(e){this.session.startOperation(e)}endOperation(e){this.session.endOperation(e)}onStartOperation(e){this.curOp=this.session.curOp,this.curOp.scrollTop=this.renderer.scrollTop,this.prevOp=this.session.prevOp,e||(this.previousCommand=null)}onEndOperation(e){if(this.curOp&&this.session){if(e&&e.returnValue===!1){this.curOp=null;return}if(this._signal("beforeEndOperation"),!this.curOp)return;var t=this.curOp.command,i=t&&t.scrollIntoView;if(i){switch(i){case"center-animate":i="animate";case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var r=this.selection.getRange(),s=this.renderer.layerConfig;(r.start.row>=s.lastRow||r.end.row<=s.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead);break}i=="animate"&&this.renderer.animateScrolling(this.curOp.scrollTop)}this.$lastSel=this.session.selection.toJSON(),this.prevOp=this.curOp,this.curOp=null}}$historyTracker(e){if(this.$mergeUndoDeltas){var t=this.prevOp,i=this.$mergeableCommands,r=t.command&&e.command.name==t.command.name;if(e.command.name=="insertstring"){var s=e.args;this.mergeNextCommand===void 0&&(this.mergeNextCommand=!0),r=r&&this.mergeNextCommand&&(!/\s/.test(s)||/\s/.test(t.args)),this.mergeNextCommand=!0}else r=r&&i.indexOf(e.command.name)!==-1;this.$mergeUndoDeltas!="always"&&Date.now()-this.sequenceStartTime>2e3&&(r=!1),r?this.session.mergeUndoDeltas=!0:i.indexOf(e.command.name)!==-1&&(this.sequenceStartTime=Date.now())}}setKeyboardHandler(e,t){if(e&&typeof e=="string"&&e!="ace"){this.$keybindingId=e;var i=this;ot.loadModule(["keybinding",e],function(r){i.$keybindingId==e&&i.keyBinding.setKeyboardHandler(r&&r.handler),t&&t()})}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(e),t&&t()}getKeyboardHandler(){return this.keyBinding.getKeyboardHandler()}setSession(e){if(this.session!=e){this.curOp&&this.endOperation(),this.curOp={};var t=this.session;if(t){this.session.off("change",this.$onDocumentChange),this.session.off("changeMode",this.$onChangeMode),this.session.off("tokenizerUpdate",this.$onTokenizerUpdate),this.session.off("changeTabSize",this.$onChangeTabSize),this.session.off("changeWrapLimit",this.$onChangeWrapLimit),this.session.off("changeWrapMode",this.$onChangeWrapMode),this.session.off("changeFold",this.$onChangeFold),this.session.off("changeFrontMarker",this.$onChangeFrontMarker),this.session.off("changeBackMarker",this.$onChangeBackMarker),this.session.off("changeBreakpoint",this.$onChangeBreakpoint),this.session.off("changeAnnotation",this.$onChangeAnnotation),this.session.off("changeOverwrite",this.$onCursorChange),this.session.off("changeScrollTop",this.$onScrollTopChange),this.session.off("changeScrollLeft",this.$onScrollLeftChange),this.session.off("startOperation",this.$onStartOperation),this.session.off("endOperation",this.$onEndOperation);var i=this.session.getSelection();i.off("changeCursor",this.$onCursorChange),i.off("changeSelection",this.$onSelectionChange)}this.session=e,e?(this.$onDocumentChange=this.onDocumentChange.bind(this),e.on("change",this.$onDocumentChange),this.renderer.setSession(e),this.$onChangeMode=this.onChangeMode.bind(this),e.on("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),e.on("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),e.on("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),e.on("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),e.on("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),e.on("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.on("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.on("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.on("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.on("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.on("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.on("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.on("changeScrollLeft",this.$onScrollLeftChange),this.selection=e.getSelection(),this.selection.on("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.$onStartOperation=this.onStartOperation.bind(this),this.session.on("startOperation",this.$onStartOperation),this.$onEndOperation=this.onEndOperation.bind(this),this.session.on("endOperation",this.$onEndOperation),this.onChangeMode(),this.onCursorChange(),this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(e)),this._signal("changeSession",{session:e,oldSession:t}),this.curOp=null,t&&t._signal("changeEditor",{oldEditor:this}),t&&(t.$editor=null),e&&e._signal("changeEditor",{editor:this}),e&&(e.$editor=this),e&&!e.destroyed&&e.bgTokenizer.scheduleStart()}}getSession(){return this.session}setValue(e,t){return this.session.doc.setValue(e),t?t==1?this.navigateFileEnd():t==-1&&this.navigateFileStart():this.selectAll(),e}getValue(){return this.session.getValue()}getSelection(){return this.selection}resize(e){this.renderer.onResize(e)}setTheme(e,t){this.renderer.setTheme(e,t)}getTheme(){return this.renderer.getTheme()}setStyle(e){this.renderer.setStyle(e)}unsetStyle(e){this.renderer.unsetStyle(e)}getFontSize(){return this.getOption("fontSize")||lt.computedStyle(this.container).fontSize}setFontSize(e){this.setOption("fontSize",e)}$highlightBrackets(){if(!this.$highlightPending){var e=this;this.$highlightPending=!0,setTimeout(function(){e.$highlightPending=!1;var t=e.session;if(!(!t||t.destroyed)){t.$bracketHighlight&&(t.$bracketHighlight.markerIds.forEach(function(u){t.removeMarker(u)}),t.$bracketHighlight=null);var i=e.getCursorPosition(),r=e.getKeyboardHandler(),s=r&&r.$getDirectionForHighlight&&r.$getDirectionForHighlight(e),n=t.getMatchingBracketRanges(i,s);if(!n){var o=new mr(t,i.row,i.column),l=o.getCurrentToken();if(l&&/\b(?:tag-open|tag-name)/.test(l.type)){var h=t.getMatchingTags(i);h&&(n=[h.openTagName.isEmpty()?h.openTag:h.openTagName,h.closeTagName.isEmpty()?h.closeTag:h.closeTagName])}}if(!n&&t.$mode.getMatching&&(n=t.$mode.getMatching(e.session)),!n){e.getHighlightIndentGuides()&&e.renderer.$textLayer.$highlightIndentGuide();return}var c="ace_bracket";Array.isArray(n)?n.length==1&&(c="ace_error_bracket"):n=[n],n.length==2&&(de.comparePoints(n[0].end,n[1].start)==0?n=[de.fromPoints(n[0].start,n[1].end)]:de.comparePoints(n[0].start,n[1].end)==0&&(n=[de.fromPoints(n[1].start,n[0].end)])),t.$bracketHighlight={ranges:n,markerIds:n.map(function(u){return t.addMarker(u,c,"text")})},e.getHighlightIndentGuides()&&e.renderer.$textLayer.$highlightIndentGuide()}},50)}}focus(){this.textInput.focus()}isFocused(){return this.textInput.isFocused()}blur(){this.textInput.blur()}onFocus(e){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",e))}onBlur(e){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",e))}$cursorChange(){this.renderer.updateCursor(),this.$highlightBrackets(),this.$updateHighlightActiveLine()}onDocumentChange(e){var t=this.session.$useWrapMode,i=e.start.row==e.end.row?e.end.row:1/0;this.renderer.updateLines(e.start.row,i,t),this._signal("change",e),this.$cursorChange()}onTokenizerUpdate(e){var t=e.data;this.renderer.updateLines(t.first,t.last)}onScrollTopChange(){this.renderer.scrollToY(this.session.getScrollTop())}onScrollLeftChange(){this.renderer.scrollToX(this.session.getScrollLeft())}onCursorChange(){this.$cursorChange(),this._signal("changeSelection")}$updateHighlightActiveLine(){var e=this.getSession(),t;if(this.$highlightActiveLine&&((this.$selectionStyle!="line"||!this.selection.isMultiLine())&&(t=this.getCursorPosition()),this.renderer.theme&&this.renderer.theme.$selectionColorConflict&&!this.selection.isEmpty()&&(t=!1),this.renderer.$maxLines&&this.session.getLength()===1&&!(this.renderer.$minLines>1)&&(t=!1)),e.$highlightLineMarker&&!t)e.removeMarker(e.$highlightLineMarker.id),e.$highlightLineMarker=null;else if(!e.$highlightLineMarker&&t){var i=new de(t.row,t.column,t.row,1/0);i.id=e.addMarker(i,"ace_active-line","screenLine"),e.$highlightLineMarker=i}else t&&(e.$highlightLineMarker.start.row=t.row,e.$highlightLineMarker.end.row=t.row,e.$highlightLineMarker.start.column=t.column,e._signal("changeBackMarker"))}onSelectionChange(e){var t=this.session;if(t.$selectionMarker&&t.removeMarker(t.$selectionMarker),t.$selectionMarker=null,this.selection.isEmpty())this.$updateHighlightActiveLine();else{var i=this.selection.getRange(),r=this.getSelectionStyle();t.$selectionMarker=t.addMarker(i,"ace_selection",r)}var s=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(s),this._signal("changeSelection")}$getSelectionHighLightRegexp(){var e=this.session,t=this.getSelectionRange();if(!(t.isEmpty()||t.isMultiLine())){var i=t.start.column,r=t.end.column,s=e.getLine(t.start.row),n=s.substring(i,r);if(!(n.length>5e3||!/[\w\d]/.test(n))){var o=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:n}),l=s.substring(i-1,r+1);if(o.test(l))return o}}}onChangeFrontMarker(){this.renderer.updateFrontMarkers()}onChangeBackMarker(){this.renderer.updateBackMarkers()}onChangeBreakpoint(){this.renderer.updateBreakpoints()}onChangeAnnotation(){this.renderer.setAnnotations(this.session.getAnnotations())}onChangeMode(e){this.renderer.updateText(),this._emit("changeMode",e)}onChangeWrapLimit(){this.renderer.updateFull()}onChangeWrapMode(){this.renderer.onResize(!0)}onChangeFold(){this.$updateHighlightActiveLine(),this.renderer.updateFull()}getSelectedText(){return this.session.getTextRange(this.getSelectionRange())}getCopyText(){var e=this.getSelectedText(),t=this.session.doc.getNewLineCharacter(),i=!1;if(!e&&this.$copyWithEmptySelection){i=!0;for(var r=this.selection.getAllRanges(),s=0;s<r.length;s++){var n=r[s];s&&r[s-1].start.row==n.start.row||(e+=this.session.getLine(n.start.row)+t)}}var o={text:e};return this._signal("copy",o),pr.lineMode=i?o.text:!1,o.text}onCopy(){this.commands.exec("copy",this)}onCut(){this.commands.exec("cut",this)}onPaste(e,t){var i={text:e,event:t};this.commands.exec("paste",this,i)}$handlePaste(e){typeof e=="string"&&(e={text:e}),this._signal("paste",e);var t=e.text,i=t===pr.lineMode,r=this.session;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)i?r.insert({row:this.selection.lead.row,column:0},t):this.insert(t);else if(i)this.selection.rangeList.ranges.forEach(function(c){r.insert({row:c.start.row,column:0},t)});else{var s=t.split(/\r\n|\r|\n/),n=this.selection.rangeList.ranges,o=s.length==2&&(!s[0]||!s[1]);if(s.length!=n.length||o)return this.commands.exec("insertstring",this,t);for(var l=n.length;l--;){var h=n[l];h.isEmpty()||r.remove(h),r.insert(h.start,s[l])}}}execCommand(e,t){return this.commands.exec(e,this,t)}insert(e,t){var i=this.session,r=i.getMode(),s=this.getCursorPosition();if(this.getBehavioursEnabled()&&!t){var n=r.transformAction(i.getState(s.row),"insertion",this,i,e);n&&(e!==n.text&&(this.inVirtualSelectionMode||(this.session.mergeUndoDeltas=!1,this.mergeNextCommand=!1)),e=n.text)}if(e=="	"&&(e=this.session.getTabString()),this.selection.isEmpty()){if(this.session.getOverwrite()&&e.indexOf(`
`)==-1){var o=de.fromPoints(s,s);o.end.column+=e.length,this.session.remove(o)}}else{var o=this.getSelectionRange();s=this.session.remove(o),this.clearSelection()}if(e==`
`||e==`\r
`){var u=i.getLine(s.row);if(s.column>u.search(/\S|$/)){var l=u.substr(s.column).search(/\S|$/);i.doc.removeInLine(s.row,s.column,s.column+l)}}this.clearSelection();var h=s.column,c=i.getState(s.row),u=i.getLine(s.row),g=r.checkOutdent(c,u,e);if(i.insert(s,e),n&&n.selection&&(n.selection.length==2?this.selection.setSelectionRange(new de(s.row,h+n.selection[0],s.row,h+n.selection[1])):this.selection.setSelectionRange(new de(s.row+n.selection[0],n.selection[1],s.row+n.selection[2],n.selection[3]))),this.$enableAutoIndent){if(i.getDocument().isNewLine(e)){var w=r.getNextLineIndent(c,u.slice(0,s.column),i.getTabString());i.insert({row:s.row+1,column:0},w)}g&&r.autoOutdent(c,i,s.row)}}autoIndent(){for(var e=this.session,t=e.getMode(),i=this.selection.isEmpty()?[new de(0,0,e.doc.getLength()-1,0)]:this.selection.getAllRanges(),r="",s="",n="",o=e.getTabString(),l=0;l<i.length;l++)for(var h=i[l].start.row,c=i[l].end.row,u=h;u<=c;u++){u>0&&(r=e.getState(u-1),s=e.getLine(u-1),n=t.getNextLineIndent(r,s,o));var g=e.getLine(u),w=t.$getIndent(g);if(n!==w){if(w.length>0){var d=new de(u,0,u,w.length);e.remove(d)}n.length>0&&e.insert({row:u,column:0},n)}t.autoOutdent(r,e,u)}}onTextInput(e,t){if(!t)return this.keyBinding.onTextInput(e);this.startOperation({command:{name:"insertstring"}});var i=this.applyComposition.bind(this,e,t);this.selection.rangeCount?this.forEachSelection(i):i(),this.endOperation()}applyComposition(e,t){if(t.extendLeft||t.extendRight){var i=this.selection.getRange();i.start.column-=t.extendLeft,i.end.column+=t.extendRight,i.start.column<0&&(i.start.row--,i.start.column+=this.session.getLine(i.start.row).length+1),this.selection.setRange(i),!e&&!i.isEmpty()&&this.remove()}if((e||!this.selection.isEmpty())&&this.insert(e,!0),t.restoreStart||t.restoreEnd){var i=this.selection.getRange();i.start.column-=t.restoreStart,i.end.column-=t.restoreEnd,this.selection.setRange(i)}}onCommandKey(e,t,i){return this.keyBinding.onCommandKey(e,t,i)}setOverwrite(e){this.session.setOverwrite(e)}getOverwrite(){return this.session.getOverwrite()}toggleOverwrite(){this.session.toggleOverwrite()}setScrollSpeed(e){this.setOption("scrollSpeed",e)}getScrollSpeed(){return this.getOption("scrollSpeed")}setDragDelay(e){this.setOption("dragDelay",e)}getDragDelay(){return this.getOption("dragDelay")}setSelectionStyle(e){this.setOption("selectionStyle",e)}getSelectionStyle(){return this.getOption("selectionStyle")}setHighlightActiveLine(e){this.setOption("highlightActiveLine",e)}getHighlightActiveLine(){return this.getOption("highlightActiveLine")}setHighlightGutterLine(e){this.setOption("highlightGutterLine",e)}getHighlightGutterLine(){return this.getOption("highlightGutterLine")}setHighlightSelectedWord(e){this.setOption("highlightSelectedWord",e)}getHighlightSelectedWord(){return this.$highlightSelectedWord}setAnimatedScroll(e){this.renderer.setAnimatedScroll(e)}getAnimatedScroll(){return this.renderer.getAnimatedScroll()}setShowInvisibles(e){this.renderer.setShowInvisibles(e)}getShowInvisibles(){return this.renderer.getShowInvisibles()}setDisplayIndentGuides(e){this.renderer.setDisplayIndentGuides(e)}getDisplayIndentGuides(){return this.renderer.getDisplayIndentGuides()}setHighlightIndentGuides(e){this.renderer.setHighlightIndentGuides(e)}getHighlightIndentGuides(){return this.renderer.getHighlightIndentGuides()}setShowPrintMargin(e){this.renderer.setShowPrintMargin(e)}getShowPrintMargin(){return this.renderer.getShowPrintMargin()}setPrintMarginColumn(e){this.renderer.setPrintMarginColumn(e)}getPrintMarginColumn(){return this.renderer.getPrintMarginColumn()}setReadOnly(e){this.setOption("readOnly",e)}getReadOnly(){return this.getOption("readOnly")}setBehavioursEnabled(e){this.setOption("behavioursEnabled",e)}getBehavioursEnabled(){return this.getOption("behavioursEnabled")}setWrapBehavioursEnabled(e){this.setOption("wrapBehavioursEnabled",e)}getWrapBehavioursEnabled(){return this.getOption("wrapBehavioursEnabled")}setShowFoldWidgets(e){this.setOption("showFoldWidgets",e)}getShowFoldWidgets(){return this.getOption("showFoldWidgets")}setFadeFoldWidgets(e){this.setOption("fadeFoldWidgets",e)}getFadeFoldWidgets(){return this.getOption("fadeFoldWidgets")}remove(e){this.selection.isEmpty()&&(e=="left"?this.selection.selectLeft():this.selection.selectRight());var t=this.getSelectionRange();if(this.getBehavioursEnabled()){var i=this.session,r=i.getState(t.start.row),s=i.getMode().transformAction(r,"deletion",this,i,t);if(t.end.column===0){var n=i.getTextRange(t);if(n[n.length-1]==`
`){var o=i.getLine(t.end.row);/^\s+$/.test(o)&&(t.end.column=o.length)}}s&&(t=s)}this.session.remove(t),this.clearSelection()}removeWordRight(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()}removeWordLeft(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()}removeToLineStart(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.selection.isEmpty()&&this.selection.selectLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()}removeToLineEnd(){this.selection.isEmpty()&&this.selection.selectLineEnd();var e=this.getSelectionRange();e.start.column==e.end.column&&e.start.row==e.end.row&&(e.end.column=0,e.end.row++),this.session.remove(e),this.clearSelection()}splitLine(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var e=this.getCursorPosition();this.insert(`
`),this.moveCursorToPosition(e)}setGhostText(e,t){this.renderer.setGhostText(e,t)}removeGhostText(){this.renderer.removeGhostText()}transposeLetters(){if(this.selection.isEmpty()){var e=this.getCursorPosition(),t=e.column;if(t!==0){var i=this.session.getLine(e.row),r,s;t<i.length?(r=i.charAt(t)+i.charAt(t-1),s=new de(e.row,t-1,e.row,t+1)):(r=i.charAt(t-1)+i.charAt(t-2),s=new de(e.row,t-2,e.row,t)),this.session.replace(s,r),this.session.selection.moveToPosition(s.end)}}}toLowerCase(){var e=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var t=this.getSelectionRange(),i=this.session.getTextRange(t);this.session.replace(t,i.toLowerCase()),this.selection.setSelectionRange(e)}toUpperCase(){var e=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var t=this.getSelectionRange(),i=this.session.getTextRange(t);this.session.replace(t,i.toUpperCase()),this.selection.setSelectionRange(e)}indent(){var e=this.session,t=this.getSelectionRange();if(t.start.row<t.end.row){var i=this.$getSelectedRows();e.indentRows(i.first,i.last,"	");return}else if(t.start.column<t.end.column){var r=e.getTextRange(t);if(!/^\s+$/.test(r)){var i=this.$getSelectedRows();e.indentRows(i.first,i.last,"	");return}}var s=e.getLine(t.start.row),n=t.start,o=e.getTabSize(),l=e.documentToScreenColumn(n.row,n.column);if(this.session.getUseSoftTabs())var h=o-l%o,c=it.stringRepeat(" ",h);else{for(var h=l%o;s[t.start.column-1]==" "&&h;)t.start.column--,h--;this.selection.setSelectionRange(t),c="	"}return this.insert(c)}blockIndent(){var e=this.$getSelectedRows();this.session.indentRows(e.first,e.last,"	")}blockOutdent(){var e=this.session.getSelection();this.session.outdentRows(e.getRange())}sortLines(){for(var e=this.$getSelectedRows(),t=this.session,i=[],r=e.first;r<=e.last;r++)i.push(t.getLine(r));i.sort(function(o,l){return o.toLowerCase()<l.toLowerCase()?-1:o.toLowerCase()>l.toLowerCase()?1:0});for(var s=new de(0,0,0,0),r=e.first;r<=e.last;r++){var n=t.getLine(r);s.start.row=r,s.end.row=r,s.end.column=n.length,t.replace(s,i[r-e.first])}}toggleCommentLines(){var e=this.session.getState(this.getCursorPosition().row),t=this.$getSelectedRows();this.session.getMode().toggleCommentLines(e,this.session,t.first,t.last)}toggleBlockComment(){var e=this.getCursorPosition(),t=this.session.getState(e.row),i=this.getSelectionRange();this.session.getMode().toggleBlockComment(t,this.session,i,e)}getNumberAt(e,t){var i=/[\-]?[0-9]+(?:\.[0-9]+)?/g;i.lastIndex=0;for(var r=this.session.getLine(e);i.lastIndex<t;){var s=i.exec(r);if(s.index<=t&&s.index+s[0].length>=t){var n={value:s[0],start:s.index,end:s.index+s[0].length};return n}}return null}modifyNumber(e){var t=this.selection.getCursor().row,i=this.selection.getCursor().column,r=new de(t,i-1,t,i),s=this.session.getTextRange(r);if(!isNaN(parseFloat(s))&&isFinite(s)){var n=this.getNumberAt(t,i);if(n){var o=n.value.indexOf(".")>=0?n.start+n.value.indexOf(".")+1:n.end,l=n.start+n.value.length-o,h=parseFloat(n.value);h*=Math.pow(10,l),o!==n.end&&i<o?e*=Math.pow(10,n.end-i-1):e*=Math.pow(10,n.end-i),h+=e,h/=Math.pow(10,l);var c=h.toFixed(l),u=new de(t,n.start,t,n.end);this.session.replace(u,c),this.moveCursorTo(t,Math.max(n.start+1,i+c.length-n.value.length))}}else this.toggleWord()}toggleWord(){var e=this.selection.getCursor().row,t=this.selection.getCursor().column;this.selection.selectWord();var i=this.getSelectedText(),r=this.selection.getWordRange().start.column,s=i.replace(/([a-z]+|[A-Z]+)(?=[A-Z_]|$)/g,"$1 ").split(/\s/),n=t-r-1;n<0&&(n=0);var o=0,l=0,h=this;i.match(/[A-Za-z0-9_]+/)&&s.forEach(function(p,$){l=o+p.length,n>=o&&n<=l&&(i=p,h.selection.clearSelection(),h.moveCursorTo(e,o+r),h.selection.selectTo(e,l+r)),o=l});for(var c=this.$toggleWordPairs,u,g=0;g<c.length;g++)for(var w=c[g],d=0;d<=1;d++){var m=+!d,f=i.match(new RegExp("^\\s?_?("+it.escapeRegExp(w[d])+")\\s?$","i"));if(f){var v=i.match(new RegExp("([_]|^|\\s)("+it.escapeRegExp(f[1])+")($|\\s)","g"));v&&(u=i.replace(new RegExp(it.escapeRegExp(w[d]),"i"),function(p){var $=w[m];return p.toUpperCase()==p?$=$.toUpperCase():p.charAt(0).toUpperCase()==p.charAt(0)&&($=$.substr(0,0)+w[m].charAt(0).toUpperCase()+$.substr(1)),$}),this.insert(u),u="")}}}findLinkAt(e,t){var i=this.session.getLine(e),r=i.split(/((?:https?|ftp):\/\/[\S]+)/),s=t;s<0&&(s=0);var n=0,o=0,l;for(let h of r){if(o=n+h.length,s>=n&&s<=o&&h.match(/((?:https?|ftp):\/\/[\S]+)/)){l=h.replace(/[\s:.,'";}\]]+$/,"");break}n=o}return l}openLink(){var e=this.selection.getCursor(),t=this.findLinkAt(e.row,e.column);return t&&window.open(t,"_blank"),t!=null}removeLines(){var e=this.$getSelectedRows();this.session.removeFullLines(e.first,e.last),this.clearSelection()}duplicateSelection(){var e=this.selection,t=this.session,i=e.getRange(),r=e.isBackwards();if(i.isEmpty()){var s=i.start.row;t.duplicateLines(s,s)}else{var n=r?i.start:i.end,o=t.insert(n,t.getTextRange(i));i.start=n,i.end=o,e.setSelectionRange(i,r)}}moveLinesDown(){this.$moveLines(1,!1)}moveLinesUp(){this.$moveLines(-1,!1)}moveText(e,t,i){return this.session.moveText(e,t,i)}copyLinesUp(){this.$moveLines(-1,!0)}copyLinesDown(){this.$moveLines(1,!0)}$moveLines(e,t){var i,r,s=this.selection;if(!s.inMultiSelectMode||this.inVirtualSelectionMode){var n=s.toOrientedRange();i=this.$getSelectedRows(n),r=this.session.$moveLines(i.first,i.last,t?0:e),t&&e==-1&&(r=0),n.moveBy(r,0),s.fromOrientedRange(n)}else{var o=s.rangeList.ranges;s.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;for(var l=0,h=0,c=o.length,u=0;u<c;u++){var g=u;o[u].moveBy(l,0),i=this.$getSelectedRows(o[u]);for(var w=i.first,d=i.last;++u<c;){h&&o[u].moveBy(h,0);var m=this.$getSelectedRows(o[u]);if(t&&m.first!=d)break;if(!t&&m.first>d+1)break;d=m.last}for(u--,l=this.session.$moveLines(w,d,t?0:e),t&&e==-1&&(g=u+1);g<=u;)o[g].moveBy(l,0),g++;t||(l=0),h+=l}s.fromOrientedRange(s.ranges[0]),s.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}}$getSelectedRows(e){return e=(e||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(e.start.row),last:this.session.getRowFoldEnd(e.end.row)}}onCompositionStart(e){this.renderer.showComposition(e)}onCompositionUpdate(e){this.renderer.setCompositionText(e)}onCompositionEnd(){this.renderer.hideComposition()}getFirstVisibleRow(){return this.renderer.getFirstVisibleRow()}getLastVisibleRow(){return this.renderer.getLastVisibleRow()}isRowVisible(e){return e>=this.getFirstVisibleRow()&&e<=this.getLastVisibleRow()}isRowFullyVisible(e){return e>=this.renderer.getFirstFullyVisibleRow()&&e<=this.renderer.getLastFullyVisibleRow()}$getVisibleRowCount(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1}$moveByPage(e,t){var i=this.renderer,r=this.renderer.layerConfig,s=e*Math.floor(r.height/r.lineHeight);t===!0?this.selection.$moveSelection(function(){this.moveCursorBy(s,0)}):t===!1&&(this.selection.moveCursorBy(s,0),this.selection.clearSelection());var n=i.scrollTop;i.scrollBy(0,s*r.lineHeight),t!=null&&i.scrollCursorIntoView(null,.5),i.animateScrolling(n)}selectPageDown(){this.$moveByPage(1,!0)}selectPageUp(){this.$moveByPage(-1,!0)}gotoPageDown(){this.$moveByPage(1,!1)}gotoPageUp(){this.$moveByPage(-1,!1)}scrollPageDown(){this.$moveByPage(1)}scrollPageUp(){this.$moveByPage(-1)}scrollToRow(e){this.renderer.scrollToRow(e)}scrollToLine(e,t,i,r){this.renderer.scrollToLine(e,t,i,r)}centerSelection(){var e=this.getSelectionRange(),t={row:Math.floor(e.start.row+(e.end.row-e.start.row)/2),column:Math.floor(e.start.column+(e.end.column-e.start.column)/2)};this.renderer.alignCursor(t,.5)}getCursorPosition(){return this.selection.getCursor()}getCursorPositionScreen(){return this.session.documentToScreenPosition(this.getCursorPosition())}getSelectionRange(){return this.selection.getRange()}selectAll(){this.selection.selectAll()}clearSelection(){this.selection.clearSelection()}moveCursorTo(e,t){this.selection.moveCursorTo(e,t)}moveCursorToPosition(e){this.selection.moveCursorToPosition(e)}jumpToMatching(e,t){var i=this.getCursorPosition(),r=new mr(this.session,i.row,i.column),s=r.getCurrentToken(),n=0;s&&s.type.indexOf("tag-name")!==-1&&(s=r.stepBackward());var o=s||r.stepForward();if(o){var l,h=!1,c={},u=i.column-o.start,g,w={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if(o.value.match(/[{}()\[\]]/g)){for(;u<o.value.length&&!h;u++)if(w[o.value[u]])switch(g=w[o.value[u]]+"."+o.type.replace("rparen","lparen"),isNaN(c[g])&&(c[g]=0),o.value[u]){case"(":case"[":case"{":c[g]++;break;case")":case"]":case"}":c[g]--,c[g]===-1&&(l="bracket",h=!0);break}}else o.type.indexOf("tag-name")!==-1&&(isNaN(c[o.value])&&(c[o.value]=0),s.value==="<"&&n>1?c[o.value]++:s.value==="</"&&c[o.value]--,c[o.value]===-1&&(l="tag",h=!0));h||(s=o,n++,o=r.stepForward(),u=0)}while(o&&!h);if(l){var d,m;if(l==="bracket")d=this.session.getBracketRange(i),d||(d=new de(r.getCurrentTokenRow(),r.getCurrentTokenColumn()+u-1,r.getCurrentTokenRow(),r.getCurrentTokenColumn()+u-1),m=d.start,(t||m.row===i.row&&Math.abs(m.column-i.column)<2)&&(d=this.session.getBracketRange(m)));else if(l==="tag"){if(!o||o.type.indexOf("tag-name")===-1)return;if(d=new de(r.getCurrentTokenRow(),r.getCurrentTokenColumn()-2,r.getCurrentTokenRow(),r.getCurrentTokenColumn()-2),d.compare(i.row,i.column)===0){var f=this.session.getMatchingTags(i);f&&(f.openTag.contains(i.row,i.column)?(d=f.closeTag,m=d.start):(d=f.openTag,f.closeTag.start.row===i.row&&f.closeTag.start.column===i.column?m=d.end:m=d.start))}m=m||d.start}m=d&&d.cursor||m,m&&(e?d&&t?this.selection.setRange(d):d&&d.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(m.row,m.column):this.selection.moveTo(m.row,m.column))}}}gotoLine(e,t,i){this.selection.clearSelection(),this.session.unfold({row:e-1,column:t||0}),this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(e-1,t||0),this.isRowFullyVisible(e-1)||this.scrollToLine(e-1,!0,i)}navigateTo(e,t){this.selection.moveTo(e,t)}navigateUp(e){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var t=this.selection.anchor.getPosition();return this.moveCursorToPosition(t)}this.selection.clearSelection(),this.selection.moveCursorBy(-e||-1,0)}navigateDown(e){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var t=this.selection.anchor.getPosition();return this.moveCursorToPosition(t)}this.selection.clearSelection(),this.selection.moveCursorBy(e||1,0)}navigateLeft(e){if(this.selection.isEmpty())for(e=e||1;e--;)this.selection.moveCursorLeft();else{var t=this.getSelectionRange().start;this.moveCursorToPosition(t)}this.clearSelection()}navigateRight(e){if(this.selection.isEmpty())for(e=e||1;e--;)this.selection.moveCursorRight();else{var t=this.getSelectionRange().end;this.moveCursorToPosition(t)}this.clearSelection()}navigateLineStart(){this.selection.moveCursorLineStart(),this.clearSelection()}navigateLineEnd(){this.selection.moveCursorLineEnd(),this.clearSelection()}navigateFileEnd(){this.selection.moveCursorFileEnd(),this.clearSelection()}navigateFileStart(){this.selection.moveCursorFileStart(),this.clearSelection()}navigateWordRight(){this.selection.moveCursorWordRight(),this.clearSelection()}navigateWordLeft(){this.selection.moveCursorWordLeft(),this.clearSelection()}replace(e,t){t&&this.$search.set(t);var i=this.$search.find(this.session),r=0;return i&&(this.$tryReplace(i,e)&&(r=1),this.selection.setSelectionRange(i),this.renderer.scrollSelectionIntoView(i.start,i.end)),r}replaceAll(e,t){t&&this.$search.set(t);var i=this.$search.findAll(this.session),r=0;if(!i.length)return r;var s=this.getSelectionRange();this.selection.moveTo(0,0);for(var n=i.length-1;n>=0;--n)this.$tryReplace(i[n],e)&&r++;return this.selection.setSelectionRange(s),r}$tryReplace(e,t){var i=this.session.getTextRange(e);return t=this.$search.replace(i,t),t!==null?(e.end=this.session.replace(e,t),e):null}getLastSearchOptions(){return this.$search.getOptions()}find(e,t,i){t||(t={}),typeof e=="string"||e instanceof RegExp?t.needle=e:typeof e=="object"&&dn.mixin(t,e);var r=this.selection.getRange();t.needle==null&&(e=this.session.getTextRange(r)||this.$search.$options.needle,e||(r=this.session.getWordRange(r.start.row,r.start.column),e=this.session.getTextRange(r)),this.$search.set({needle:e})),this.$search.set(t),t.start||this.$search.set({start:r});var s=this.$search.find(this.session);if(t.preventScroll)return s;if(s)return this.revealRange(s,i),s;t.backwards?r.start=r.end:r.end=r.start,this.selection.setRange(r)}findNext(e,t){this.find({skipCurrent:!0,backwards:!1},e,t)}findPrevious(e,t){this.find(e,{skipCurrent:!0,backwards:!0},t)}revealRange(e,t){this.session.unfold(e),this.selection.setSelectionRange(e);var i=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(e.start,e.end,.5),t!==!1&&this.renderer.animateScrolling(i)}undo(){this.session.getUndoManager().undo(this.session),this.renderer.scrollCursorIntoView(null,.5)}redo(){this.session.getUndoManager().redo(this.session),this.renderer.scrollCursorIntoView(null,.5)}destroy(){this.$toDestroy&&(this.$toDestroy.forEach(function(e){e.destroy()}),this.$toDestroy=null),this.$mouseHandler&&this.$mouseHandler.destroy(),this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy(),this._$emitInputEvent&&this._$emitInputEvent.cancel(),this.removeAllListeners()}setAutoScrollEditorIntoView(e){if(e){var t,i=this,r=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var s=this.$scrollAnchor;s.style.cssText="position:absolute",this.container.insertBefore(s,this.container.firstChild);var n=this.on("changeSelection",function(){r=!0}),o=this.renderer.on("beforeRender",function(){r&&(t=i.renderer.container.getBoundingClientRect())}),l=this.renderer.on("afterRender",function(){if(r&&t&&(i.isFocused()||i.searchBox&&i.searchBox.isFocused())){var h=i.renderer,c=h.$cursorLayer.$pixelPos,u=h.layerConfig,g=c.top-u.offset;c.top>=0&&g+t.top<0?r=!0:c.top<u.height&&c.top+t.top+u.lineHeight>window.innerHeight?r=!1:r=null,r!=null&&(s.style.top=g+"px",s.style.left=c.left+"px",s.style.height=u.lineHeight+"px",s.scrollIntoView(r)),r=t=null}});this.setAutoScrollEditorIntoView=function(h){h||(delete this.setAutoScrollEditorIntoView,this.off("changeSelection",n),this.renderer.off("afterRender",l),this.renderer.off("beforeRender",o))}}}$resetCursorStyle(){var e=this.$cursorStyle||"ace",t=this.renderer.$cursorLayer;t&&(t.setSmoothBlinking(/smooth/.test(e)),t.isBlinking=!this.$readOnly&&e!="wide",lt.setCssClass(t.element,"ace_slim-cursors",/slim/.test(e)))}prompt(e,t,i){var r=this;ot.loadModule("ace/ext/prompt",function(s){s.prompt(r,e,t,i)})}}xe.$uid=0;xe.prototype.curOp=null;xe.prototype.prevOp={};xe.prototype.$mergeableCommands=["backspace","del","insertstring"];xe.prototype.$toggleWordPairs=[["first","last"],["true","false"],["yes","no"],["width","height"],["top","bottom"],["right","left"],["on","off"],["x","y"],["get","set"],["max","min"],["horizontal","vertical"],["show","hide"],["add","remove"],["up","down"],["before","after"],["even","odd"],["in","out"],["inside","outside"],["next","previous"],["increase","decrease"],["attach","detach"],["&&","||"],["==","!="]];dn.implement(xe.prototype,Mo);ot.defineOptions(xe.prototype,"editor",{selectionStyle:{set:function(a){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:a})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(a){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(a){this.textInput.setReadOnly(a),this.$resetCursorStyle()},initialValue:!1},copyWithEmptySelection:{set:function(a){this.textInput.setCopyWithEmptySelection(a)},initialValue:!1},cursorStyle:{set:function(a){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},enableAutoIndent:{initialValue:!0},autoScrollEditorIntoView:{set:function(a){this.setAutoScrollEditorIntoView(a)}},keyboardHandler:{set:function(a){this.setKeyboardHandler(a)},get:function(){return this.$keybindingId},handlesSet:!0},value:{set:function(a){this.session.setValue(a)},get:function(){return this.getValue()},handlesSet:!0,hidden:!0},session:{set:function(a){this.setSession(a)},get:function(){return this.session},handlesSet:!0,hidden:!0},showLineNumbers:{set:function(a){this.renderer.$gutterLayer.setShowLineNumbers(a),this.renderer.$loop.schedule(this.renderer.CHANGE_GUTTER),a&&this.$relativeLineNumbers?Mt.attach(this):Mt.detach(this)},initialValue:!0},relativeLineNumbers:{set:function(a){this.$showLineNumbers&&a?Mt.attach(this):Mt.detach(this)}},placeholder:{set:function(a){this.$updatePlaceholder||(this.$updatePlaceholder=(function(){var e=this.session&&(this.renderer.$composition||this.session.getLength()>1||this.session.getLine(0).length>0);if(e&&this.renderer.placeholderNode)this.renderer.off("afterRender",this.$updatePlaceholder),lt.removeCssClass(this.container,"ace_hasPlaceholder"),this.renderer.placeholderNode.remove(),this.renderer.placeholderNode=null;else if(!e&&!this.renderer.placeholderNode){this.renderer.on("afterRender",this.$updatePlaceholder),lt.addCssClass(this.container,"ace_hasPlaceholder");var t=lt.createElement("div");t.className="ace_placeholder",t.textContent=this.$placeholder||"",this.renderer.placeholderNode=t,this.renderer.content.appendChild(this.renderer.placeholderNode)}else!e&&this.renderer.placeholderNode&&(this.renderer.placeholderNode.textContent=this.$placeholder||"")}).bind(this),this.on("input",this.$updatePlaceholder)),this.$updatePlaceholder()}},enableKeyboardAccessibility:{set:function(a){var e={name:"blurTextInput",description:"Set focus to the editor content div to allow tabbing through the page",bindKey:"Esc",exec:function(r){r.blur(),r.renderer.scroller.focus()},readOnly:!0},t=function(r){if(r.target==this.renderer.scroller&&r.keyCode===Eo.enter){r.preventDefault();var s=this.getCursorPosition().row;this.isRowVisible(s)||this.scrollToLine(s,!0,!0),this.focus()}},i;a?(this.renderer.enableKeyboardAccessibility=!0,this.renderer.keyboardFocusClassName="ace_keyboard-focus",this.textInput.getElement().setAttribute("tabindex",-1),this.textInput.setNumberOfExtraLines(gn.isWin?3:0),this.renderer.scroller.setAttribute("tabindex",0),this.renderer.scroller.setAttribute("role","group"),this.renderer.scroller.setAttribute("aria-roledescription",At("editor.scroller.aria-roledescription","editor")),this.renderer.scroller.classList.add(this.renderer.keyboardFocusClassName),this.renderer.scroller.setAttribute("aria-label",At("editor.scroller.aria-label","Editor content, press Enter to start editing, press Escape to exit")),this.renderer.scroller.addEventListener("keyup",t.bind(this)),this.commands.addCommand(e),this.renderer.$gutter.setAttribute("tabindex",0),this.renderer.$gutter.setAttribute("aria-hidden",!1),this.renderer.$gutter.setAttribute("role","group"),this.renderer.$gutter.setAttribute("aria-roledescription",At("editor.gutter.aria-roledescription","editor")),this.renderer.$gutter.setAttribute("aria-label",At("editor.gutter.aria-label","Editor gutter, press Enter to interact with controls using arrow keys, press Escape to exit")),this.renderer.$gutter.classList.add(this.renderer.keyboardFocusClassName),this.renderer.content.setAttribute("aria-hidden",!0),i||(i=new xo(this)),i.addListener(),this.textInput.setAriaOptions({setLabel:!0})):(this.renderer.enableKeyboardAccessibility=!1,this.textInput.getElement().setAttribute("tabindex",0),this.textInput.setNumberOfExtraLines(0),this.renderer.scroller.setAttribute("tabindex",-1),this.renderer.scroller.removeAttribute("role"),this.renderer.scroller.removeAttribute("aria-roledescription"),this.renderer.scroller.classList.remove(this.renderer.keyboardFocusClassName),this.renderer.scroller.removeAttribute("aria-label"),this.renderer.scroller.removeEventListener("keyup",t.bind(this)),this.commands.removeCommand(e),this.renderer.content.removeAttribute("aria-hidden"),this.renderer.$gutter.setAttribute("tabindex",-1),this.renderer.$gutter.setAttribute("aria-hidden",!0),this.renderer.$gutter.removeAttribute("role"),this.renderer.$gutter.removeAttribute("aria-roledescription"),this.renderer.$gutter.removeAttribute("aria-label"),this.renderer.$gutter.classList.remove(this.renderer.keyboardFocusClassName),i&&i.removeListener())},initialValue:!1},textInputAriaLabel:{set:function(a){this.$textInputAriaLabel=a},initialValue:""},enableMobileMenu:{set:function(a){this.$enableMobileMenu=a},initialValue:!0},customScrollbar:"renderer",hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",displayIndentGuides:"renderer",highlightIndentGuides:"renderer",showGutter:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",hasCssTransforms:"renderer",maxPixelHeight:"renderer",useTextareaForIME:"renderer",useResizeObserver:"renderer",useSvgGutterIcons:"renderer",showFoldedAnnotations:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimeout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",navigateWithinSoftTabs:"session",tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"});var Mt={getText:function(a,e){return(Math.abs(a.selection.lead.row-e)||e+1+(e<9?"":""))+""},getWidth:function(a,e,t){return Math.max(e.toString().length,(t.lastRow+1).toString().length,2)*t.characterWidth},update:function(a,e){e.renderer.$loop.schedule(e.renderer.CHANGE_GUTTER)},attach:function(a){a.renderer.$gutterLayer.$renderer=this,a.on("changeSelection",this.update),this.update(null,a)},detach:function(a){a.renderer.$gutterLayer.$renderer==this&&(a.renderer.$gutterLayer.$renderer=null),a.off("changeSelection",this.update),this.update(null,a)}};wi.Editor=xe;var fn={},vn={},Ii={},Lt=ee;let ko=class{constructor(e,t){this.element=e,this.canvasHeight=t||5e5,this.element.style.height=this.canvasHeight*2+"px",this.cells=[],this.cellCache=[],this.$offsetCoefficient=0}moveContainer(e){Lt.translate(this.element,0,-(e.firstRowScreen*e.lineHeight%this.canvasHeight)-e.offset*this.$offsetCoefficient)}pageChanged(e,t){return Math.floor(e.firstRowScreen*e.lineHeight/this.canvasHeight)!==Math.floor(t.firstRowScreen*t.lineHeight/this.canvasHeight)}computeLineTop(e,t,i){var r=t.firstRowScreen*t.lineHeight,s=Math.floor(r/this.canvasHeight),n=i.documentToScreenRow(e,0)*t.lineHeight;return n-s*this.canvasHeight}computeLineHeight(e,t,i){return t.lineHeight*i.getRowLineCount(e)}getLength(){return this.cells.length}get(e){return this.cells[e]}shift(){this.$cacheCell(this.cells.shift())}pop(){this.$cacheCell(this.cells.pop())}push(e){if(Array.isArray(e)){this.cells.push.apply(this.cells,e);for(var t=Lt.createFragment(this.element),i=0;i<e.length;i++)t.appendChild(e[i].element);this.element.appendChild(t)}else this.cells.push(e),this.element.appendChild(e.element)}unshift(e){if(Array.isArray(e)){this.cells.unshift.apply(this.cells,e);for(var t=Lt.createFragment(this.element),i=0;i<e.length;i++)t.appendChild(e[i].element);this.element.firstChild?this.element.insertBefore(t,this.element.firstChild):this.element.appendChild(t)}else this.cells.unshift(e),this.element.insertAdjacentElement("afterbegin",e.element)}last(){return this.cells.length?this.cells[this.cells.length-1]:null}$cacheCell(e){e&&(e.element.remove(),this.cellCache.push(e))}createCell(e,t,i,r){var s=this.cellCache.pop();if(!s){var n=Lt.createElement("div");r&&r(n),this.element.appendChild(n),s={element:n,text:"",row:e}}return s.row=e,s}};Ii.Lines=ko;var he=ee,Ro=ae,Io=V,Do=fe.EventEmitter,_o=Ii.Lines,$e=we.nls;class Be{constructor(e){this.element=he.createElement("div"),this.element.className="ace_layer ace_gutter-layer",e.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$lines=new _o(this.element),this.$lines.$offsetCoefficient=1}setSession(e){this.session&&this.session.off("change",this.$updateAnnotations),this.session=e,e&&e.on("change",this.$updateAnnotations)}addGutterDecoration(e,t){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(e,t)}removeGutterDecoration(e,t){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(e,t)}setAnnotations(e){this.$annotations=[];for(var t=0;t<e.length;t++){var i=e[t],r=i.row,s=this.$annotations[r];s||(s=this.$annotations[r]={text:[],type:[],displayText:[]});var n=i.text,o=i.text,l=i.type;n=n?Io.escapeHTML(n):i.html||"",o=o||i.html||"",s.text.indexOf(n)===-1&&(s.text.push(n),s.type.push(l),s.displayText.push(o));var h=i.className;h?s.className=h:l==="error"?s.className=" ace_error":l==="security"&&!/\bace_error\b/.test(s.className)?s.className=" ace_security":l==="warning"&&!/\bace_(error|security)\b/.test(s.className)?s.className=" ace_warning":l==="info"&&!s.className?s.className=" ace_info":l==="hint"&&!s.className&&(s.className=" ace_hint")}}$updateAnnotations(e){if(this.$annotations.length){var t=e.start.row,i=e.end.row-t;if(i!==0)if(e.action=="remove")this.$annotations.splice(t,i+1,null);else{var r=new Array(i+1);r.unshift(t,1),this.$annotations.splice.apply(this.$annotations,r)}}}update(e){this.config=e;var t=this.session,i=e.firstRow,r=Math.min(e.lastRow+e.gutterOffset,t.getLength()-1);this.oldLastRow=r,this.config=e,this.$lines.moveContainer(e),this.$updateCursorRow();for(var s=t.getNextFoldLine(i),n=s?s.start.row:1/0,o=null,l=-1,h=i;;){if(h>n&&(h=s.end.row+1,s=t.getNextFoldLine(h,s),n=s?s.start.row:1/0),h>r){for(;this.$lines.getLength()>l+1;)this.$lines.pop();break}o=this.$lines.get(++l),o?o.row=h:(o=this.$lines.createCell(h,e,this.session,wr),this.$lines.push(o)),this.$renderCell(o,e,s,h),h++}this._signal("afterRender"),this.$updateGutterWidth(e)}$updateGutterWidth(e){var t=this.session,i=t.gutterRenderer||this.$renderer,r=t.$firstLineNumber,s=this.$lines.last()?this.$lines.last().text:"";(this.$fixedWidth||t.$useWrapMode)&&(s=t.getLength()+r-1);var n=i?i.getWidth(t,s,e):s.toString().length*e.characterWidth,o=this.$padding||this.$computePadding();n+=o.left+o.right,n!==this.gutterWidth&&!isNaN(n)&&(this.gutterWidth=n,this.element.parentNode.style.width=this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._signal("changeGutterWidth",n))}$updateCursorRow(){if(this.$highlightGutterLine){var e=this.session.selection.getCursor();this.$cursorRow!==e.row&&(this.$cursorRow=e.row)}}updateLineHighlight(){if(this.$highlightGutterLine){var e=this.session.selection.cursor.row;if(this.$cursorRow=e,!(this.$cursorCell&&this.$cursorCell.row==e)){this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ",""));var t=this.$lines.cells;this.$cursorCell=null;for(var i=0;i<t.length;i++){var r=t[i];if(r.row>=this.$cursorRow){if(r.row>this.$cursorRow){var s=this.session.getFoldLine(this.$cursorRow);if(i>0&&s&&s.start.row==t[i-1].row)r=t[i-1];else break}r.element.className="ace_gutter-active-line "+r.element.className,this.$cursorCell=r;break}}}}}scrollLines(e){var t=this.config;if(this.config=e,this.$updateCursorRow(),this.$lines.pageChanged(t,e))return this.update(e);this.$lines.moveContainer(e);var i=Math.min(e.lastRow+e.gutterOffset,this.session.getLength()-1),r=this.oldLastRow;if(this.oldLastRow=i,!t||r<e.firstRow)return this.update(e);if(i<t.firstRow)return this.update(e);if(t.firstRow<e.firstRow)for(var s=this.session.getFoldedRowCount(t.firstRow,e.firstRow-1);s>0;s--)this.$lines.shift();if(r>i)for(var s=this.session.getFoldedRowCount(i+1,r);s>0;s--)this.$lines.pop();e.firstRow<t.firstRow&&this.$lines.unshift(this.$renderLines(e,e.firstRow,t.firstRow-1)),i>r&&this.$lines.push(this.$renderLines(e,r+1,i)),this.updateLineHighlight(),this._signal("afterRender"),this.$updateGutterWidth(e)}$renderLines(e,t,i){for(var r=[],s=t,n=this.session.getNextFoldLine(s),o=n?n.start.row:1/0;s>o&&(s=n.end.row+1,n=this.session.getNextFoldLine(s,n),o=n?n.start.row:1/0),!(s>i);){var l=this.$lines.createCell(s,e,this.session,wr);this.$renderCell(l,e,n,s),r.push(l),s++}return r}$renderCell(e,t,i,r){var s=e.element,n=this.session,o=s.childNodes[0],l=s.childNodes[1],h=s.childNodes[2],c=h.firstChild,u=n.$firstLineNumber,g=n.$breakpoints,w=n.$decorations,d=n.gutterRenderer||this.$renderer,m=this.$showFoldWidgets&&n.foldWidgets,f=i?i.start.row:Number.MAX_VALUE,v=t.lineHeight+"px",p=this.$useSvgGutterIcons?"ace_gutter-cell_svg-icons ":"ace_gutter-cell ",$=this.$useSvgGutterIcons?"ace_icon_svg":"ace_icon",C=(d?d.getText(n,r):r+u).toString();if(this.$highlightGutterLine&&(r==this.$cursorRow||i&&r<this.$cursorRow&&r>=f&&this.$cursorRow<=i.end.row)&&(p+="ace_gutter-active-line ",this.$cursorCell!=e&&(this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ","")),this.$cursorCell=e)),g[r]&&(p+=g[r]),w[r]&&(p+=w[r]),this.$annotations[r]&&r!==f&&(p+=this.$annotations[r].className),m){var y=m[r];y==null&&(y=m[r]=n.getFoldWidget(r))}if(y){var S="ace_fold-widget ace_"+y,M=y=="start"&&r==f&&r<i.end.row;if(M){S+=" ace_closed";for(var E="",R=!1,L=r+1;L<=i.end.row;L++)if(this.$annotations[L]){if(this.$annotations[L].className===" ace_error"){R=!0,E=" ace_error_fold";break}this.$annotations[L].className===" ace_security"?(R=!0,E=" ace_security_fold"):this.$annotations[L].className===" ace_warning"&&E!==" ace_security_fold"&&(R=!0,E=" ace_warning_fold")}p+=E}else S+=" ace_open";l.className!=S&&(l.className=S),he.setStyle(l.style,"height",v),he.setStyle(l.style,"display","inline-block"),l.setAttribute("role","button"),l.setAttribute("tabindex","-1");var x=n.getFoldWidgetRange(r);x?l.setAttribute("aria-label",$e("gutter.code-folding.range.aria-label","Toggle code folding, rows $0 through $1",[x.start.row+1,x.end.row+1])):i?l.setAttribute("aria-label",$e("gutter.code-folding.closed.aria-label","Toggle code folding, rows $0 through $1",[i.start.row+1,i.end.row+1])):l.setAttribute("aria-label",$e("gutter.code-folding.open.aria-label","Toggle code folding, row $0",[r+1])),M?(l.setAttribute("aria-expanded","false"),l.setAttribute("title",$e("gutter.code-folding.closed.title","Unfold code"))):(l.setAttribute("aria-expanded","true"),l.setAttribute("title",$e("gutter.code-folding.open.title","Fold code")))}else l&&(he.setStyle(l.style,"display","none"),l.setAttribute("tabindex","0"),l.removeAttribute("role"),l.removeAttribute("aria-label"));if(R&&this.$showFoldedAnnotations){h.className="ace_gutter_annotation",c.className=$,c.className+=E,he.setStyle(c.style,"height",v),he.setStyle(h.style,"display","block"),he.setStyle(h.style,"height",v);var b;switch(E){case" ace_error_fold":b=$e("gutter.annotation.aria-label.error","Error, read annotations row $0",[C]);break;case" ace_security_fold":b=$e("gutter.annotation.aria-label.security","Security finding, read annotations row $0",[C]);break;case" ace_warning_fold":b=$e("gutter.annotation.aria-label.warning","Warning, read annotations row $0",[C]);break}h.setAttribute("aria-label",b),h.setAttribute("tabindex","-1"),h.setAttribute("role","button")}else if(this.$annotations[r]){h.className="ace_gutter_annotation",c.className=$,this.$useSvgGutterIcons?c.className+=this.$annotations[r].className:s.classList.add(this.$annotations[r].className.replace(" ","")),he.setStyle(c.style,"height",v),he.setStyle(h.style,"display","block"),he.setStyle(h.style,"height",v);var b;switch(this.$annotations[r].className){case" ace_error":b=$e("gutter.annotation.aria-label.error","Error, read annotations row $0",[C]);break;case" ace_security":b=$e("gutter.annotation.aria-label.security","Security finding, read annotations row $0",[C]);break;case" ace_warning":b=$e("gutter.annotation.aria-label.warning","Warning, read annotations row $0",[C]);break;case" ace_info":b=$e("gutter.annotation.aria-label.info","Info, read annotations row $0",[C]);break;case" ace_hint":b=$e("gutter.annotation.aria-label.hint","Suggestion, read annotations row $0",[C]);break}h.setAttribute("aria-label",b),h.setAttribute("tabindex","-1"),h.setAttribute("role","button")}else he.setStyle(h.style,"display","none"),h.removeAttribute("aria-label"),h.removeAttribute("role"),h.setAttribute("tabindex","0");return C!==o.data&&(o.data=C),s.className!=p&&(s.className=p),he.setStyle(e.element.style,"height",this.$lines.computeLineHeight(r,t,n)+"px"),he.setStyle(e.element.style,"top",this.$lines.computeLineTop(r,t,n)+"px"),e.text=C,h.style.display==="none"&&l.style.display==="none"?e.element.setAttribute("aria-hidden",!0):e.element.setAttribute("aria-hidden",!1),e}setHighlightGutterLine(e){this.$highlightGutterLine=e}setShowLineNumbers(e){this.$renderer=!e&&{getWidth:function(){return 0},getText:function(){return""}}}getShowLineNumbers(){return this.$showLineNumbers}setShowFoldWidgets(e){e?he.addCssClass(this.element,"ace_folding-enabled"):he.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=e,this.$padding=null}getShowFoldWidgets(){return this.$showFoldWidgets}$computePadding(){if(!this.element.firstChild)return{left:0,right:0};var e=he.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=(parseInt(e.borderLeftWidth)||0)+(parseInt(e.paddingLeft)||0)+1,this.$padding.right=(parseInt(e.borderRightWidth)||0)+(parseInt(e.paddingRight)||0),this.$padding}getRegion(e){var t=this.$padding||this.$computePadding(),i=this.element.getBoundingClientRect();if(e.x<t.left+i.left)return"markers";if(this.$showFoldWidgets&&e.x>i.right-t.right)return"foldWidgets"}}Be.prototype.$fixedWidth=!1;Be.prototype.$highlightGutterLine=!0;Be.prototype.$renderer="";Be.prototype.$showLineNumbers=!0;Be.prototype.$showFoldWidgets=!0;Ro.implement(Be.prototype,Do);function wr(a){var e=document.createTextNode("");a.appendChild(e);var t=he.createElement("span");a.appendChild(t);var i=he.createElement("span");a.appendChild(i);var r=he.createElement("span");return i.appendChild(r),a}vn.Gutter=Be;var mn={},No=ne.Range,Oo=ee;class pn{constructor(e){this.element=Oo.createElement("div"),this.element.className="ace_layer ace_marker-layer",e.appendChild(this.element)}setPadding(e){this.$padding=e}setSession(e){this.session=e}setMarkers(e){this.markers=e}elt(e,t){var i=this.i!=-1&&this.element.childNodes[this.i];i?this.i++:(i=document.createElement("div"),this.element.appendChild(i),this.i=-1),i.style.cssText=t,i.className=e}update(e){if(e){this.config=e,this.i=0;var t;for(var i in this.markers){var r=this.markers[i];if(!r.range){r.update(t,this,this.session,e);continue}var s=r.range.clipRows(e.firstRow,e.lastRow);if(!s.isEmpty())if(s=s.toScreenRange(this.session),r.renderer){var n=this.$getTop(s.start.row,e),o=this.$padding+s.start.column*e.characterWidth;r.renderer(t,s,o,n,e)}else r.type=="fullLine"?this.drawFullLineMarker(t,s,r.clazz,e):r.type=="screenLine"?this.drawScreenLineMarker(t,s,r.clazz,e):s.isMultiLine()?r.type=="text"?this.drawTextMarker(t,s,r.clazz,e):this.drawMultiLineMarker(t,s,r.clazz,e):this.drawSingleLineMarker(t,s,r.clazz+" ace_start ace_br15",e)}if(this.i!=-1)for(;this.i<this.element.childElementCount;)this.element.removeChild(this.element.lastChild)}}$getTop(e,t){return(e-t.firstRowScreen)*t.lineHeight}drawTextMarker(e,t,i,r,s){for(var n=this.session,o=t.start.row,l=t.end.row,h=o,c=0,u=0,g=n.getScreenLastRowColumn(h),w=new No(h,t.start.column,h,u);h<=l;h++)w.start.row=w.end.row=h,w.start.column=h==o?t.start.column:n.getRowWrapIndent(h),w.end.column=g,c=u,u=g,g=h+1<l?n.getScreenLastRowColumn(h+1):h==l?0:t.end.column,this.drawSingleLineMarker(e,w,i+(h==o?" ace_start":"")+" ace_br"+Fo(h==o||h==o+1&&t.start.column,c<u,u>g,h==l),r,h==l?0:1,s)}drawMultiLineMarker(e,t,i,r,s){var n=this.$padding,o=r.lineHeight,l=this.$getTop(t.start.row,r),h=n+t.start.column*r.characterWidth;if(s=s||"",this.session.$bidiHandler.isBidiRow(t.start.row)){var c=t.clone();c.end.row=c.start.row,c.end.column=this.session.getLine(c.start.row).length,this.drawBidiSingleLineMarker(e,c,i+" ace_br1 ace_start",r,null,s)}else this.elt(i+" ace_br1 ace_start","height:"+o+"px;right:"+n+"px;top:"+l+"px;left:"+h+"px;"+(s||""));if(this.session.$bidiHandler.isBidiRow(t.end.row)){var c=t.clone();c.start.row=c.end.row,c.start.column=0,this.drawBidiSingleLineMarker(e,c,i+" ace_br12",r,null,s)}else{l=this.$getTop(t.end.row,r);var u=t.end.column*r.characterWidth;this.elt(i+" ace_br12","height:"+o+"px;width:"+u+"px;top:"+l+"px;left:"+n+"px;"+(s||""))}if(o=(t.end.row-t.start.row-1)*r.lineHeight,!(o<=0)){l=this.$getTop(t.start.row+1,r);var g=(t.start.column?1:0)|(t.end.column?0:8);this.elt(i+(g?" ace_br"+g:""),"height:"+o+"px;right:"+n+"px;top:"+l+"px;left:"+n+"px;"+(s||""))}}drawSingleLineMarker(e,t,i,r,s,n){if(this.session.$bidiHandler.isBidiRow(t.start.row))return this.drawBidiSingleLineMarker(e,t,i,r,s,n);var o=r.lineHeight,l=(t.end.column+(s||0)-t.start.column)*r.characterWidth,h=this.$getTop(t.start.row,r),c=this.$padding+t.start.column*r.characterWidth;this.elt(i,"height:"+o+"px;width:"+l+"px;top:"+h+"px;left:"+c+"px;"+(n||""))}drawBidiSingleLineMarker(e,t,i,r,s,n){var o=r.lineHeight,l=this.$getTop(t.start.row,r),h=this.$padding,c=this.session.$bidiHandler.getSelections(t.start.column,t.end.column);c.forEach(function(u){this.elt(i,"height:"+o+"px;width:"+(u.width+(s||0))+"px;top:"+l+"px;left:"+(h+u.left)+"px;"+(n||""))},this)}drawFullLineMarker(e,t,i,r,s){var n=this.$getTop(t.start.row,r),o=r.lineHeight;t.start.row!=t.end.row&&(o+=this.$getTop(t.end.row,r)-n),this.elt(i,"height:"+o+"px;top:"+n+"px;left:0;right:0;"+(s||""))}drawScreenLineMarker(e,t,i,r,s){var n=this.$getTop(t.start.row,r),o=r.lineHeight;this.elt(i,"height:"+o+"px;top:"+n+"px;left:0;right:0;"+(s||""))}}pn.prototype.$padding=0;function Fo(a,e,t,i){return(a?1:0)|(e?2:0)|(t?4:0)|(i?8:0)}mn.Marker=pn;var wn={},Di={};const Wo=new Set(["text","rparen","lparen"]);Di.isTextToken=function(a){return Wo.has(a)};var Ho=ae,oi=ee,De=V,Bo=Ii.Lines,zo=fe.EventEmitter,Po=we.nls;const Uo=Di.isTextToken;class re{constructor(e){this.dom=oi,this.element=this.dom.createElement("div"),this.element.className="ace_layer ace_text-layer",e.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this),this.$lines=new Bo(this.element)}$updateEolChar(){var e=this.session.doc,t=e.getNewLineCharacter()==`
`&&e.getNewLineMode()!="windows",i=t?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=i)return this.EOL_CHAR=i,!0}setPadding(e){this.$padding=e,this.element.style.margin="0 "+e+"px"}getLineHeight(){return this.$fontMetrics.$characterSize.height||0}getCharacterWidth(){return this.$fontMetrics.$characterSize.width||0}$setFontMetrics(e){this.$fontMetrics=e,this.$fontMetrics.on("changeCharacterSize",(function(t){this._signal("changeCharacterSize",t)}).bind(this)),this.$pollSizeChanges()}checkForSizeChanges(){this.$fontMetrics.checkForSizeChanges()}$pollSizeChanges(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()}setSession(e){this.session=e,e&&this.$computeTabString()}setShowInvisibles(e){return this.showInvisibles==e?!1:(this.showInvisibles=e,typeof e=="string"?(this.showSpaces=/tab/i.test(e),this.showTabs=/space/i.test(e),this.showEOL=/eol/i.test(e)):this.showSpaces=this.showTabs=this.showEOL=e,this.$computeTabString(),!0)}setDisplayIndentGuides(e){return this.displayIndentGuides==e?!1:(this.displayIndentGuides=e,this.$computeTabString(),!0)}setHighlightIndentGuides(e){return this.$highlightIndentGuides===e?!1:(this.$highlightIndentGuides=e,e)}$computeTabString(){var e=this.session.getTabSize();this.tabSize=e;for(var t=this.$tabStrings=[0],i=1;i<e+1;i++)if(this.showTabs){var r=this.dom.createElement("span");r.className="ace_invisible ace_invisible_tab",r.textContent=De.stringRepeat(this.TAB_CHAR,i),t.push(r)}else t.push(this.dom.createTextNode(De.stringRepeat(" ",i),this.element));if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var s="ace_indent-guide",n=this.showSpaces?" ace_invisible ace_invisible_space":"",o=this.showSpaces?De.stringRepeat(this.SPACE_CHAR,this.tabSize):De.stringRepeat(" ",this.tabSize),l=this.showTabs?" ace_invisible ace_invisible_tab":"",h=this.showTabs?De.stringRepeat(this.TAB_CHAR,this.tabSize):o,r=this.dom.createElement("span");r.className=s+n,r.textContent=o,this.$tabStrings[" "]=r;var r=this.dom.createElement("span");r.className=s+l,r.textContent=h,this.$tabStrings["	"]=r}}updateLines(e,t,i){if(this.config.lastRow!=e.lastRow||this.config.firstRow!=e.firstRow)return this.update(e);this.config=e;for(var r=Math.max(t,e.firstRow),s=Math.min(i,e.lastRow),n=this.element.childNodes,o=0,h=e.firstRow;h<r;h++){var c=this.session.getFoldLine(h);if(c)if(c.containsRow(r)){r=c.start.row;break}else h=c.end.row;o++}for(var l=!1,h=r,c=this.session.getNextFoldLine(h),u=c?c.start.row:1/0;h>u&&(h=c.end.row+1,c=this.session.getNextFoldLine(h,c),u=c?c.start.row:1/0),!(h>s);){var g=n[o++];if(g){this.dom.removeChildren(g),this.$renderLine(g,h,h==u?c:!1),l&&(g.style.top=this.$lines.computeLineTop(h,e,this.session)+"px");var w=e.lineHeight*this.session.getRowLength(h)+"px";g.style.height!=w&&(l=!0,g.style.height=w)}h++}if(l)for(;o<this.$lines.cells.length;){var d=this.$lines.cells[o++];d.element.style.top=this.$lines.computeLineTop(d.row,e,this.session)+"px"}}scrollLines(e){var t=this.config;if(this.config=e,this.$lines.pageChanged(t,e))return this.update(e);this.$lines.moveContainer(e);var i=e.lastRow,r=t?t.lastRow:-1;if(!t||r<e.firstRow)return this.update(e);if(i<t.firstRow)return this.update(e);if(!t||t.lastRow<e.firstRow)return this.update(e);if(e.lastRow<t.firstRow)return this.update(e);if(t.firstRow<e.firstRow)for(var s=this.session.getFoldedRowCount(t.firstRow,e.firstRow-1);s>0;s--)this.$lines.shift();if(t.lastRow>e.lastRow)for(var s=this.session.getFoldedRowCount(e.lastRow+1,t.lastRow);s>0;s--)this.$lines.pop();e.firstRow<t.firstRow&&this.$lines.unshift(this.$renderLinesFragment(e,e.firstRow,t.firstRow-1)),e.lastRow>t.lastRow&&this.$lines.push(this.$renderLinesFragment(e,t.lastRow+1,e.lastRow)),this.$highlightIndentGuide()}$renderLinesFragment(e,t,i){for(var r=[],s=t,n=this.session.getNextFoldLine(s),o=n?n.start.row:1/0;s>o&&(s=n.end.row+1,n=this.session.getNextFoldLine(s,n),o=n?n.start.row:1/0),!(s>i);){var l=this.$lines.createCell(s,e,this.session),h=l.element;this.dom.removeChildren(h),oi.setStyle(h.style,"height",this.$lines.computeLineHeight(s,e,this.session)+"px"),oi.setStyle(h.style,"top",this.$lines.computeLineTop(s,e,this.session)+"px"),this.$renderLine(h,s,s==o?n:!1),this.$useLineGroups()?h.className="ace_line_group":h.className="ace_line",r.push(l),s++}return r}update(e){this.$lines.moveContainer(e),this.config=e;for(var t=e.firstRow,i=e.lastRow,r=this.$lines;r.getLength();)r.pop();r.push(this.$renderLinesFragment(e,t,i))}$renderToken(e,t,i,r){for(var s=this,n=/(\t)|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\uFEFF\uFFF9-\uFFFC\u2066\u2067\u2068\u202A\u202B\u202D\u202E\u202C\u2069\u2060\u2061\u2062\u2063\u2064\u206A\u206B\u206B\u206C\u206D\u206E\u206F]+)|(\u3000)|([\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]|[\uD800-\uDBFF][\uDC00-\uDFFF])/g,o=this.dom.createFragment(this.element),l,h=0;l=n.exec(r);){var c=l[1],u=l[2],g=l[3],w=l[4],d=l[5];if(!(!s.showSpaces&&u)){var m=h!=l.index?r.slice(h,l.index):"";if(h=l.index+l[0].length,m&&o.appendChild(this.dom.createTextNode(m,this.element)),c){var f=s.session.getScreenTabSize(t+l.index);o.appendChild(s.$tabStrings[f].cloneNode(!0)),t+=f-1}else if(u)if(s.showSpaces){var v=this.dom.createElement("span");v.className="ace_invisible ace_invisible_space",v.textContent=De.stringRepeat(s.SPACE_CHAR,u.length),o.appendChild(v)}else o.appendChild(this.dom.createTextNode(u,this.element));else if(g){var v=this.dom.createElement("span");v.className="ace_invisible ace_invisible_space ace_invalid",v.textContent=De.stringRepeat(s.SPACE_CHAR,g.length),o.appendChild(v)}else if(w){t+=1;var v=this.dom.createElement("span");v.style.width=s.config.characterWidth*2+"px",v.className=s.showSpaces?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",v.textContent=s.showSpaces?s.SPACE_CHAR:w,o.appendChild(v)}else if(d){t+=1;var v=this.dom.createElement("span");v.style.width=s.config.characterWidth*2+"px",v.className="ace_cjk",v.textContent=d,o.appendChild(v)}}}if(o.appendChild(this.dom.createTextNode(h?r.slice(h):r,this.element)),Uo(i.type))e.appendChild(o);else{var p="ace_"+i.type.replace(/\./g," ace_"),v=this.dom.createElement("span");i.type=="fold"&&(v.style.width=i.value.length*this.config.characterWidth+"px",v.setAttribute("title",Po("inline-fold.closed.title","Unfold code"))),v.className=p,v.appendChild(o),e.appendChild(v)}return t+r.length}renderIndentGuide(e,t,i){var r=t.search(this.$indentGuideRe);if(r<=0||r>=i)return t;if(t[0]==" "){r-=r%this.tabSize;for(var s=r/this.tabSize,n=0;n<s;n++)e.appendChild(this.$tabStrings[" "].cloneNode(!0));return this.$highlightIndentGuide(),t.substr(r)}else if(t[0]=="	"){for(var n=0;n<r;n++)e.appendChild(this.$tabStrings["	"].cloneNode(!0));return this.$highlightIndentGuide(),t.substr(r)}return this.$highlightIndentGuide(),t}$highlightIndentGuide(){if(!(!this.$highlightIndentGuides||!this.displayIndentGuides)){this.$highlightIndentGuideMarker={indentLevel:void 0,start:void 0,end:void 0,dir:void 0};var e=this.session.doc.$lines;if(e){var t=this.session.selection.getCursor(),i=/^\s*/.exec(this.session.doc.getLine(t.row))[0].length,r=Math.floor(i/this.tabSize);this.$highlightIndentGuideMarker={indentLevel:r,start:t.row};var s=this.session.$bracketHighlight;if(s){for(var n=this.session.$bracketHighlight.ranges,o=0;o<n.length;o++)if(t.row!==n[o].start.row){this.$highlightIndentGuideMarker.end=n[o].start.row,t.row>n[o].start.row?this.$highlightIndentGuideMarker.dir=-1:this.$highlightIndentGuideMarker.dir=1;break}}if(!this.$highlightIndentGuideMarker.end&&e[t.row]!==""&&t.column===e[t.row].length){this.$highlightIndentGuideMarker.dir=1;for(var o=t.row+1;o<e.length;o++){var l=e[o],h=/^\s*/.exec(l)[0].length;if(l!==""&&(this.$highlightIndentGuideMarker.end=o,h<=i))break}}this.$renderHighlightIndentGuide()}}}$clearActiveIndentGuide(){for(var e=this.$lines.cells,t=0;t<e.length;t++){var i=e[t],r=i.element.childNodes;if(r.length>0){for(var s=0;s<r.length;s++)if(r[s].classList&&r[s].classList.contains("ace_indent-guide-active")){r[s].classList.remove("ace_indent-guide-active");break}}}}$setIndentGuideActive(e,t){var i=this.session.doc.getLine(e.row);if(i!==""){var r=e.element.childNodes;if(r){let s=r[t-1];s&&s.classList&&s.classList.contains("ace_indent-guide")&&s.classList.add("ace_indent-guide-active")}}}$renderHighlightIndentGuide(){if(this.$lines){var e=this.$lines.cells;this.$clearActiveIndentGuide();var t=this.$highlightIndentGuideMarker.indentLevel;if(t!==0)if(this.$highlightIndentGuideMarker.dir===1)for(var i=0;i<e.length;i++){var r=e[i];if(this.$highlightIndentGuideMarker.end&&r.row>=this.$highlightIndentGuideMarker.start+1){if(r.row>=this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(r,t)}}else for(var i=e.length-1;i>=0;i--){var r=e[i];if(this.$highlightIndentGuideMarker.end&&r.row<this.$highlightIndentGuideMarker.start){if(r.row<=this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(r,t)}}}}$createLineElement(e){var t=this.dom.createElement("div");return t.className="ace_line",t.style.height=this.config.lineHeight+"px",t}$renderWrappedLine(e,t,i){var r=0,s=0,n=i[0],o=0,l=this.$createLineElement();e.appendChild(l);for(var h=0;h<t.length;h++){var c=t[h],u=c.value;if(h==0&&this.displayIndentGuides){if(r=u.length,u=this.renderIndentGuide(l,u,n),!u)continue;r-=u.length}if(r+u.length<n)o=this.$renderToken(l,o,c,u),r+=u.length;else{for(;r+u.length>=n;)o=this.$renderToken(l,o,c,u.substring(0,n-r)),u=u.substring(n-r),r=n,l=this.$createLineElement(),e.appendChild(l),l.appendChild(this.dom.createTextNode(De.stringRepeat("",i.indent),this.element)),s++,o=0,n=i[s]||Number.MAX_VALUE;u.length!=0&&(r+=u.length,o=this.$renderToken(l,o,c,u))}}i[i.length-1]>this.MAX_LINE_LENGTH&&this.$renderOverflowMessage(l,o,null,"",!0)}$renderSimpleLine(e,t){for(var i=0,r=0;r<t.length;r++){var s=t[r],n=s.value;if(!(r==0&&this.displayIndentGuides&&(n=this.renderIndentGuide(e,n),!n))){if(i+n.length>this.MAX_LINE_LENGTH)return this.$renderOverflowMessage(e,i,s,n);i=this.$renderToken(e,i,s,n)}}}$renderOverflowMessage(e,t,i,r,s){i&&this.$renderToken(e,t,i,r.slice(0,this.MAX_LINE_LENGTH-t));var n=this.dom.createElement("span");n.className="ace_inline_button ace_keyword ace_toggle_wrap",n.textContent=s?"<hide>":"<click to see more...>",e.appendChild(n)}$renderLine(e,t,i){if(!i&&i!=!1&&(i=this.session.getFoldLine(t)),i)var r=this.$getFoldLineTokens(t,i);else var r=this.session.getTokens(t);var s=e;if(r.length){var n=this.session.getRowSplitData(t);if(n&&n.length){this.$renderWrappedLine(e,r,n);var s=e.lastChild}else{var s=e;this.$useLineGroups()&&(s=this.$createLineElement(),e.appendChild(s)),this.$renderSimpleLine(s,r)}}else this.$useLineGroups()&&(s=this.$createLineElement(),e.appendChild(s));if(this.showEOL&&s){i&&(t=i.end.row);var o=this.dom.createElement("span");o.className="ace_invisible ace_invisible_eol",o.textContent=t==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,s.appendChild(o)}}$getFoldLineTokens(e,t){var i=this.session,r=[];function s(o,l,h){for(var c=0,u=0;u+o[c].value.length<l;)if(u+=o[c].value.length,c++,c==o.length)return;if(u!=l){var g=o[c].value.substring(l-u);g.length>h-l&&(g=g.substring(0,h-l)),r.push({type:o[c].type,value:g}),u=l+g.length,c+=1}for(;u<h&&c<o.length;){var g=o[c].value;g.length+u>h?r.push({type:o[c].type,value:g.substring(0,h-u)}):r.push(o[c]),u+=g.length,c+=1}}var n=i.getTokens(e);return t.walk(function(o,l,h,c,u){o!=null?r.push({type:"fold",value:o}):(u&&(n=i.getTokens(l)),n.length&&s(n,c,h))},t.end.row,this.session.getLine(t.end.row).length),r}$useLineGroups(){return this.session.getUseWrapMode()}}re.prototype.EOF_CHAR="";re.prototype.EOL_CHAR_LF="";re.prototype.EOL_CHAR_CRLF="";re.prototype.EOL_CHAR=re.prototype.EOL_CHAR_LF;re.prototype.TAB_CHAR="";re.prototype.SPACE_CHAR="";re.prototype.$padding=0;re.prototype.MAX_LINE_LENGTH=1e4;re.prototype.showInvisibles=!1;re.prototype.showSpaces=!1;re.prototype.showTabs=!1;re.prototype.showEOL=!1;re.prototype.displayIndentGuides=!0;re.prototype.$highlightIndentGuides=!0;re.prototype.$tabStrings=[];re.prototype.destroy={};re.prototype.onChangeTabSize=re.prototype.$computeTabString;Ho.implement(re.prototype,zo);wn.Text=re;var $n={},le=ee;class _i{constructor(e){this.element=le.createElement("div"),this.element.className="ace_layer ace_cursor-layer",e.appendChild(this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),le.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=this.$updateOpacity.bind(this)}$updateOpacity(e){for(var t=this.cursors,i=t.length;i--;)le.setStyle(t[i].style,"opacity",e?"":"0")}$startCssAnimation(){for(var e=this.cursors,t=e.length;t--;)e[t].style.animationDuration=this.blinkInterval+"ms";this.$isAnimating=!0,setTimeout((function(){this.$isAnimating&&le.addCssClass(this.element,"ace_animate-blinking")}).bind(this))}$stopCssAnimation(){this.$isAnimating=!1,le.removeCssClass(this.element,"ace_animate-blinking")}setPadding(e){this.$padding=e}setSession(e){this.session=e}setBlinking(e){e!=this.isBlinking&&(this.isBlinking=e,this.restartTimer())}setBlinkInterval(e){e!=this.blinkInterval&&(this.blinkInterval=e,this.restartTimer())}setSmoothBlinking(e){e!=this.smoothBlinking&&(this.smoothBlinking=e,le.setCssClass(this.element,"ace_smooth-blinking",e),this.$updateCursors(!0),this.restartTimer())}addCursor(){var e=le.createElement("div");return e.className="ace_cursor",this.element.appendChild(e),this.cursors.push(e),e}removeCursor(){if(this.cursors.length>1){var e=this.cursors.pop();return e.parentNode.removeChild(e),e}}hideCursor(){this.isVisible=!1,le.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()}showCursor(){this.isVisible=!0,le.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()}restartTimer(){var e=this.$updateCursors;if(clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.$stopCssAnimation(),this.smoothBlinking&&(this.$isSmoothBlinking=!1,le.removeCssClass(this.element,"ace_smooth-blinking")),e(!0),!this.isBlinking||!this.blinkInterval||!this.isVisible){this.$stopCssAnimation();return}if(this.smoothBlinking&&(this.$isSmoothBlinking=!0,setTimeout((function(){this.$isSmoothBlinking&&le.addCssClass(this.element,"ace_smooth-blinking")}).bind(this))),le.HAS_CSS_ANIMATION)this.$startCssAnimation();else{var t=(function(){this.timeoutId=setTimeout(function(){e(!1)},.6*this.blinkInterval)}).bind(this);this.intervalId=setInterval(function(){e(!0),t()},this.blinkInterval),t()}}getPixelPosition(e,t){if(!this.config||!this.session)return{left:0,top:0};e||(e=this.session.selection.getCursor());var i=this.session.documentToScreenPosition(e),r=this.$padding+(this.session.$bidiHandler.isBidiRow(i.row,e.row)?this.session.$bidiHandler.getPosLeft(i.column):i.column*this.config.characterWidth),s=(i.row-(t?this.config.firstRowScreen:0))*this.config.lineHeight;return{left:r,top:s}}isCursorInView(e,t){return e.top>=0&&e.top<t.maxHeight}update(e){this.config=e;var t=this.session.$selectionMarkers,i=0,r=0;(t===void 0||t.length===0)&&(t=[{cursor:null}]);for(var i=0,s=t.length;i<s;i++){var n=this.getPixelPosition(t[i].cursor,!0);if(!((n.top>e.height+e.offset||n.top<0)&&i>1)){var o=this.cursors[r++]||this.addCursor(),l=o.style;this.drawCursor?this.drawCursor(o,n,e,t[i],this.session):this.isCursorInView(n,e)?(le.setStyle(l,"display","block"),le.translate(o,n.left,n.top),le.setStyle(l,"width",Math.round(e.characterWidth)+"px"),le.setStyle(l,"height",e.lineHeight+"px")):le.setStyle(l,"display","none")}}for(;this.cursors.length>r;)this.removeCursor();var h=this.session.getOverwrite();this.$setOverwrite(h),this.$pixelPos=n,this.restartTimer()}$setOverwrite(e){e!=this.overwrite&&(this.overwrite=e,e?le.addCssClass(this.element,"ace_overwrite-cursors"):le.removeCssClass(this.element,"ace_overwrite-cursors"))}destroy(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)}}_i.prototype.$padding=0;_i.prototype.drawCursor=null;$n.Cursor=_i;var ze={},Vo=ae,mi=ee,ai=pe,Go=fe.EventEmitter,li=32768;class Ni{constructor(e,t){this.element=mi.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+t,this.inner=mi.createElement("div"),this.inner.className="ace_scrollbar-inner",this.inner.textContent="",this.element.appendChild(this.inner),e.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,ai.addListener(this.element,"scroll",this.onScroll.bind(this)),ai.addListener(this.element,"mousedown",ai.preventDefault)}setVisible(e){this.element.style.display=e?"":"none",this.isVisible=e,this.coeff=1}}Vo.implement(Ni.prototype,Go);let dt=class extends Ni{constructor(e,t){super(e,"-v"),this.scrollTop=0,this.scrollHeight=0,t.$scrollbarWidth=this.width=mi.scrollbarWidth(e.ownerDocument),this.inner.style.width=this.element.style.width=(this.width||15)+5+"px",this.$minWidth=0}onScroll(){if(!this.skipEvent){if(this.scrollTop=this.element.scrollTop,this.coeff!=1){var e=this.element.clientHeight/this.scrollHeight;this.scrollTop=this.scrollTop*(1-e)/(this.coeff-e)}this._emit("scroll",{data:this.scrollTop})}this.skipEvent=!1}getWidth(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)}setHeight(e){this.element.style.height=e+"px"}setScrollHeight(e){this.scrollHeight=e,e>li?(this.coeff=li/e,e=li):this.coeff!=1&&(this.coeff=1),this.inner.style.height=e+"px"}setScrollTop(e){this.scrollTop!=e&&(this.skipEvent=!0,this.scrollTop=e,this.element.scrollTop=e*this.coeff)}};dt.prototype.setInnerHeight=dt.prototype.setScrollHeight;let yn=class extends Ni{constructor(e,t){super(e,"-h"),this.scrollLeft=0,this.height=t.$scrollbarWidth,this.inner.style.height=this.element.style.height=(this.height||15)+5+"px"}onScroll(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1}getHeight(){return this.isVisible?this.height:0}setWidth(e){this.element.style.width=e+"px"}setInnerWidth(e){this.inner.style.width=e+"px"}setScrollWidth(e){this.inner.style.width=e+"px"}setScrollLeft(e){this.scrollLeft!=e&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=e)}};ze.ScrollBar=dt;ze.ScrollBarV=dt;ze.ScrollBarH=yn;ze.VScrollBar=dt;ze.HScrollBar=yn;var Pe={},jo=ae,pi=ee,Re=pe,Ko=fe.EventEmitter;pi.importCssString(`.ace_editor>.ace_sb-v div, .ace_editor>.ace_sb-h div{
  position: absolute;
  background: rgba(128, 128, 128, 0.6);
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  border: 1px solid #bbb;
  border-radius: 2px;
  z-index: 8;
}
.ace_editor>.ace_sb-v, .ace_editor>.ace_sb-h {
  position: absolute;
  z-index: 6;
  background: none;
  overflow: hidden!important;
}
.ace_editor>.ace_sb-v {
  z-index: 6;
  right: 0;
  top: 0;
  width: 12px;
}
.ace_editor>.ace_sb-v div {
  z-index: 8;
  right: 0;
  width: 100%;
}
.ace_editor>.ace_sb-h {
  bottom: 0;
  left: 0;
  height: 12px;
}
.ace_editor>.ace_sb-h div {
  bottom: 0;
  height: 100%;
}
.ace_editor>.ace_sb_grabbed {
  z-index: 8;
  background: #000;
}`,"ace_scrollbar.css",!1);class Oi{constructor(e,t){this.element=pi.createElement("div"),this.element.className="ace_sb"+t,this.inner=pi.createElement("div"),this.inner.className="",this.element.appendChild(this.inner),this.VScrollWidth=12,this.HScrollHeight=12,e.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,Re.addMultiMouseDownListener(this.element,[500,300,300],this,"onMouseDown")}setVisible(e){this.element.style.display=e?"":"none",this.isVisible=e,this.coeff=1}}jo.implement(Oi.prototype,Ko);let gt=class extends Oi{constructor(e,t){super(e,"-v"),this.scrollTop=0,this.scrollHeight=0,this.parent=e,this.width=this.VScrollWidth,this.renderer=t,this.inner.style.width=this.element.style.width=(this.width||15)+"px",this.$minWidth=0}onMouseDown(e,t){if(e==="mousedown"&&!(Re.getButton(t)!==0||t.detail===2)){if(t.target===this.inner){var i=this,r=t.clientY,s=function(g){r=g.clientY},n=function(){clearInterval(c)},o=t.clientY,l=this.thumbTop,h=function(){if(r!==void 0){var g=i.scrollTopFromThumbTop(l+r-o);g!==i.scrollTop&&i._emit("scroll",{data:g})}};Re.capture(this.inner,s,n);var c=setInterval(h,20);return Re.preventDefault(t)}var u=t.clientY-this.element.getBoundingClientRect().top-this.thumbHeight/2;return this._emit("scroll",{data:this.scrollTopFromThumbTop(u)}),Re.preventDefault(t)}}getHeight(){return this.height}scrollTopFromThumbTop(e){var t=e*(this.pageHeight-this.viewHeight)/(this.slideHeight-this.thumbHeight);return t=t>>0,t<0?t=0:t>this.pageHeight-this.viewHeight&&(t=this.pageHeight-this.viewHeight),t}getWidth(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)}setHeight(e){this.height=Math.max(0,e),this.slideHeight=this.height,this.viewHeight=this.height,this.setScrollHeight(this.pageHeight,!0)}setScrollHeight(e,t){this.pageHeight===e&&!t||(this.pageHeight=e,this.thumbHeight=this.slideHeight*this.viewHeight/this.pageHeight,this.thumbHeight>this.slideHeight&&(this.thumbHeight=this.slideHeight),this.thumbHeight<15&&(this.thumbHeight=15),this.inner.style.height=this.thumbHeight+"px",this.scrollTop>this.pageHeight-this.viewHeight&&(this.scrollTop=this.pageHeight-this.viewHeight,this.scrollTop<0&&(this.scrollTop=0),this._emit("scroll",{data:this.scrollTop})))}setScrollTop(e){this.scrollTop=e,e<0&&(e=0),this.thumbTop=e*(this.slideHeight-this.thumbHeight)/(this.pageHeight-this.viewHeight),this.inner.style.top=this.thumbTop+"px"}};gt.prototype.setInnerHeight=gt.prototype.setScrollHeight;let Wt=class extends Oi{constructor(e,t){super(e,"-h"),this.scrollLeft=0,this.scrollWidth=0,this.height=this.HScrollHeight,this.inner.style.height=this.element.style.height=(this.height||12)+"px",this.renderer=t}onMouseDown(e,t){if(e==="mousedown"&&!(Re.getButton(t)!==0||t.detail===2)){if(t.target===this.inner){var i=this,r=t.clientX,s=function(g){r=g.clientX},n=function(){clearInterval(c)},o=t.clientX,l=this.thumbLeft,h=function(){if(r!==void 0){var g=i.scrollLeftFromThumbLeft(l+r-o);g!==i.scrollLeft&&i._emit("scroll",{data:g})}};Re.capture(this.inner,s,n);var c=setInterval(h,20);return Re.preventDefault(t)}var u=t.clientX-this.element.getBoundingClientRect().left-this.thumbWidth/2;return this._emit("scroll",{data:this.scrollLeftFromThumbLeft(u)}),Re.preventDefault(t)}}getHeight(){return this.isVisible?this.height:0}scrollLeftFromThumbLeft(e){var t=e*(this.pageWidth-this.viewWidth)/(this.slideWidth-this.thumbWidth);return t=t>>0,t<0?t=0:t>this.pageWidth-this.viewWidth&&(t=this.pageWidth-this.viewWidth),t}setWidth(e){this.width=Math.max(0,e),this.element.style.width=this.width+"px",this.slideWidth=this.width,this.viewWidth=this.width,this.setScrollWidth(this.pageWidth,!0)}setScrollWidth(e,t){this.pageWidth===e&&!t||(this.pageWidth=e,this.thumbWidth=this.slideWidth*this.viewWidth/this.pageWidth,this.thumbWidth>this.slideWidth&&(this.thumbWidth=this.slideWidth),this.thumbWidth<15&&(this.thumbWidth=15),this.inner.style.width=this.thumbWidth+"px",this.scrollLeft>this.pageWidth-this.viewWidth&&(this.scrollLeft=this.pageWidth-this.viewWidth,this.scrollLeft<0&&(this.scrollLeft=0),this._emit("scroll",{data:this.scrollLeft})))}setScrollLeft(e){this.scrollLeft=e,e<0&&(e=0),this.thumbLeft=e*(this.slideWidth-this.thumbWidth)/(this.pageWidth-this.viewWidth),this.inner.style.left=this.thumbLeft+"px"}};Wt.prototype.setInnerWidth=Wt.prototype.setScrollWidth;Pe.ScrollBar=gt;Pe.ScrollBarV=gt;Pe.ScrollBarH=Wt;Pe.VScrollBar=gt;Pe.HScrollBar=Wt;var bn={},$r=pe;let Yo=class{constructor(e,t){this.onRender=e,this.pending=!1,this.changes=0,this.$recursionLimit=2,this.window=t||window;var i=this;this._flush=function(r){i.pending=!1;var s=i.changes;if(s&&($r.blockIdle(100),i.changes=0,i.onRender(s)),i.changes){if(i.$recursionLimit--<0)return;i.schedule()}else i.$recursionLimit=2}}schedule(e){this.changes=this.changes|e,this.changes&&!this.pending&&($r.nextFrame(this._flush),this.pending=!0)}clear(e){var t=this.changes;return this.changes=0,t}};bn.RenderLoop=Yo;var Cn={},Qo=ae,Tt=ee,yr=V,br=pe,Zo=be,Xo=fe.EventEmitter,xt=512,Jo=typeof ResizeObserver=="function",_e=200;let Fi=class{constructor(e){this.el=Tt.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=Tt.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=Tt.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),e.appendChild(this.el),this.$measureNode.textContent=yr.stringRepeat("X",xt),this.$characterSize={width:0,height:0},Jo?this.$addObserver():this.checkForSizeChanges()}$setMeasureNodeStyles(e,t){e.width=e.height="auto",e.left=e.top="0px",e.visibility="hidden",e.position="absolute",e.whiteSpace="pre",Zo.isIE<8?e["font-family"]="inherit":e.font="inherit",e.overflow=t?"hidden":"visible"}checkForSizeChanges(e){if(e===void 0&&(e=this.$measureSizes()),e&&(this.$characterSize.width!==e.width||this.$characterSize.height!==e.height)){this.$measureNode.style.fontWeight="bold";var t=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=e,this.charSizes=Object.create(null),this.allowBoldFonts=t&&t.width===e.width&&t.height===e.height,this._emit("changeCharacterSize",{data:e})}}$addObserver(){var e=this;this.$observer=new window.ResizeObserver(function(t){e.checkForSizeChanges()}),this.$observer.observe(this.$measureNode)}$pollSizeChanges(){if(this.$pollSizeChangesTimer||this.$observer)return this.$pollSizeChangesTimer;var e=this;return this.$pollSizeChangesTimer=br.onIdle(function t(){e.checkForSizeChanges(),br.onIdle(t,500)},500)}setPolling(e){e?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)}$measureSizes(e){var t={height:(e||this.$measureNode).clientHeight,width:(e||this.$measureNode).clientWidth/xt};return t.width===0||t.height===0?null:t}$measureCharWidth(e){this.$main.textContent=yr.stringRepeat(e,xt);var t=this.$main.getBoundingClientRect();return t.width/xt}getCharacterWidth(e){var t=this.charSizes[e];return t===void 0&&(t=this.charSizes[e]=this.$measureCharWidth(e)/this.$characterSize.width),t}destroy(){clearInterval(this.$pollSizeChangesTimer),this.$observer&&this.$observer.disconnect(),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)}$getZoom(e){return!e||!e.parentElement?1:(Number(window.getComputedStyle(e).zoom)||1)*this.$getZoom(e.parentElement)}$initTransformMeasureNodes(){var e=function(t,i){return["div",{style:"position: absolute;top:"+t+"px;left:"+i+"px;"}]};this.els=Tt.buildDom([e(0,0),e(_e,0),e(0,_e),e(_e,_e)],this.el)}transformCoordinates(e,t){if(e){var i=this.$getZoom(this.el);e=o(1/i,e)}function r(y,S,M){var E=y[1]*S[0]-y[0]*S[1];return[(-S[1]*M[0]+S[0]*M[1])/E,(+y[1]*M[0]-y[0]*M[1])/E]}function s(y,S){return[y[0]-S[0],y[1]-S[1]]}function n(y,S){return[y[0]+S[0],y[1]+S[1]]}function o(y,S){return[y*S[0],y*S[1]]}this.els||this.$initTransformMeasureNodes();function l(y){var S=y.getBoundingClientRect();return[S.left,S.top]}var h=l(this.els[0]),c=l(this.els[1]),u=l(this.els[2]),g=l(this.els[3]),w=r(s(g,c),s(g,u),s(n(c,u),n(g,h))),d=o(1+w[0],s(c,h)),m=o(1+w[1],s(u,h));if(t){var f=t,v=w[0]*f[0]/_e+w[1]*f[1]/_e+1,p=n(o(f[0],d),o(f[1],m));return n(o(1/v/_e,p),h)}var $=s(e,h),C=r(s(d,o(w[0],$)),s(m,o(w[1],$)),$);return o(_e,C)}};Fi.prototype.$characterSize={width:0,height:0};Qo.implement(Fi.prototype,Xo);Cn.FontMetrics=Fi;var qo=`
.ace_br1 {border-top-left-radius    : 3px;}
.ace_br2 {border-top-right-radius   : 3px;}
.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}
.ace_br4 {border-bottom-right-radius: 3px;}
.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}
.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}
.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}
.ace_br8 {border-bottom-left-radius : 3px;}
.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}
.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}
.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}
.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}


.ace_editor {
    position: relative;
    overflow: hidden;
    padding: 0;
    font: 12px/normal 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'Source Code Pro', 'source-code-pro', monospace;
    direction: ltr;
    text-align: left;
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
    forced-color-adjust: none;
}

.ace_scroller {
    position: absolute;
    overflow: hidden;
    top: 0;
    bottom: 0;
    background-color: inherit;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    cursor: text;
}

.ace_content {
    position: absolute;
    box-sizing: border-box;
    min-width: 100%;
    contain: style size layout;
    font-variant-ligatures: no-common-ligatures;
}

.ace_keyboard-focus:focus {
    box-shadow: inset 0 0 0 2px #5E9ED6;
    outline: none;
}

.ace_dragging .ace_scroller:before{
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    content: '';
    background: rgba(250, 250, 250, 0.01);
    z-index: 1000;
}
.ace_dragging.ace_dark .ace_scroller:before{
    background: rgba(0, 0, 0, 0.01);
}

.ace_gutter {
    position: absolute;
    overflow : hidden;
    width: auto;
    top: 0;
    bottom: 0;
    left: 0;
    cursor: default;
    z-index: 4;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    contain: style size layout;
}

.ace_gutter-active-line {
    position: absolute;
    left: 0;
    right: 0;
}

.ace_scroller.ace_scroll-left:after {
    content: "";
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;
    pointer-events: none;
}

.ace_gutter-cell, .ace_gutter-cell_svg-icons {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    padding-left: 19px;
    padding-right: 6px;
    background-repeat: no-repeat;
}

.ace_gutter-cell_svg-icons .ace_gutter_annotation {
    margin-left: -14px;
    float: left;
}

.ace_gutter-cell .ace_gutter_annotation {
    margin-left: -19px;
    float: left;
}

.ace_gutter-cell.ace_error, .ace_icon.ace_error, .ace_icon.ace_error_fold, .ace_gutter-cell.ace_security, .ace_icon.ace_security, .ace_icon.ace_security_fold {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_gutter-cell.ace_warning, .ace_icon.ace_warning, .ace_icon.ace_warning_fold {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_gutter-cell.ace_info, .ace_icon.ace_info, .ace_gutter-cell.ace_hint, .ace_icon.ace_hint {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_dark .ace_gutter-cell.ace_info, .ace_dark .ace_icon.ace_info, .ace_dark .ace_gutter-cell.ace_hint, .ace_dark .ace_icon.ace_hint {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");
}

.ace_icon_svg.ace_error {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJyZWQiIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIj4KPGNpcmNsZSBmaWxsPSJub25lIiBjeD0iOCIgY3k9IjgiIHI9IjciIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPGxpbmUgeDE9IjExIiB5MT0iNSIgeDI9IjUiIHkyPSIxMSIvPgo8bGluZSB4MT0iMTEiIHkxPSIxMSIgeDI9IjUiIHkyPSI1Ii8+CjwvZz4KPC9zdmc+");
    background-color: crimson;
}
.ace_icon_svg.ace_security {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjAgMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICA8ZyBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZT0iZGFya29yYW5nZSIgZmlsbD0ibm9uZSIgc2hhcGUtcmVuZGVyaW5nPSJnZW9tZXRyaWNQcmVjaXNpb24iPgogICAgICAgIDxwYXRoIGNsYXNzPSJzdHJva2UtbGluZWpvaW4tcm91bmQiIGQ9Ik04IDE0LjgzMDdDOCAxNC44MzA3IDIgMTIuOTA0NyAyIDguMDg5OTJWMy4yNjU0OEM1LjMxIDMuMjY1NDggNy45ODk5OSAxLjM0OTE4IDcuOTg5OTkgMS4zNDkxOEM3Ljk4OTk5IDEuMzQ5MTggMTAuNjkgMy4yNjU0OCAxNCAzLjI2NTQ4VjguMDg5OTJDMTQgMTIuOTA0NyA4IDE0LjgzMDcgOCAxNC44MzA3WiIvPgogICAgICAgIDxwYXRoIGQ9Ik0yIDguMDg5OTJWMy4yNjU0OEM1LjMxIDMuMjY1NDggNy45ODk5OSAxLjM0OTE4IDcuOTg5OTkgMS4zNDkxOCIvPgogICAgICAgIDxwYXRoIGQ9Ik0xMy45OSA4LjA4OTkyVjMuMjY1NDhDMTAuNjggMy4yNjU0OCA4IDEuMzQ5MTggOCAxLjM0OTE4Ii8+CiAgICAgICAgPHBhdGggY2xhc3M9InN0cm9rZS1saW5lam9pbi1yb3VuZCIgZD0iTTggNFY5Ii8+CiAgICAgICAgPHBhdGggY2xhc3M9InN0cm9rZS1saW5lam9pbi1yb3VuZCIgZD0iTTggMTBWMTIiLz4KICAgIDwvZz4KPC9zdmc+");
    background-color: crimson;
}
.ace_icon_svg.ace_warning {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJkYXJrb3JhbmdlIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+Cjxwb2x5Z29uIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGZpbGw9Im5vbmUiIHBvaW50cz0iOCAxIDE1IDE1IDEgMTUgOCAxIi8+CjxyZWN0IHg9IjgiIHk9IjEyIiB3aWR0aD0iMC4wMSIgaGVpZ2h0PSIwLjAxIi8+CjxsaW5lIHgxPSI4IiB5MT0iNiIgeDI9IjgiIHkyPSIxMCIvPgo8L2c+Cjwvc3ZnPg==");
    background-color: darkorange;
}
.ace_icon_svg.ace_info {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJibHVlIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+CjxjaXJjbGUgZmlsbD0ibm9uZSIgY3g9IjgiIGN5PSI4IiByPSI3IiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjxwb2x5bGluZSBwb2ludHM9IjggMTEgOCA4Ii8+Cjxwb2x5bGluZSBwb2ludHM9IjkgOCA2IDgiLz4KPGxpbmUgeDE9IjEwIiB5MT0iMTEiIHgyPSI2IiB5Mj0iMTEiLz4KPHJlY3QgeD0iOCIgeT0iNSIgd2lkdGg9IjAuMDEiIGhlaWdodD0iMC4wMSIvPgo8L2c+Cjwvc3ZnPg==");
    background-color: royalblue;
}
.ace_icon_svg.ace_hint {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjAgMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICA8ZyBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZT0ic2lsdmVyIiBmaWxsPSJub25lIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+CiAgICAgICAgPHBhdGggY2xhc3M9InN0cm9rZS1saW5lam9pbi1yb3VuZCIgZD0iTTYgMTRIMTAiLz4KICAgICAgICA8cGF0aCBkPSJNOCAxMUg5QzkgOS40NzAwMiAxMiA4LjU0MDAyIDEyIDUuNzYwMDJDMTIuMDIgNC40MDAwMiAxMS4zOSAzLjM2MDAyIDEwLjQzIDIuNjcwMDJDOSAxLjY0MDAyIDcuMDAwMDEgMS42NDAwMiA1LjU3MDAxIDIuNjcwMDJDNC42MTAwMSAzLjM2MDAyIDMuOTggNC40MDAwMiA0IDUuNzYwMDJDNCA4LjU0MDAyIDcuMDAwMDEgOS40NzAwMiA3LjAwMDAxIDExSDhaIi8+CiAgICA8L2c+Cjwvc3ZnPg==");
    background-color: silver;
}

.ace_icon_svg.ace_error_fold {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiIgZmlsbD0ibm9uZSI+CiAgPHBhdGggZD0ibSAxOC45Mjk4NTEsNy44Mjk4MDc2IGMgMC4xNDYzNTMsNi4zMzc0NjA0IC02LjMyMzE0Nyw3Ljc3Nzg0NDQgLTcuNDc3OTEyLDcuNzc3ODQ0NCAtMi4xMDcyNzI2LC0wLjEyODc1IDUuMTE3Njc4LDAuMzU2MjQ5IDUuMDUxNjk4LC03Ljg3MDA2MTggLTAuNjA0NjcyLC04LjAwMzk3MzQ5IC03LjA3NzI3MDYsLTcuNTYzMTE4OSAtNC44NTczLC03LjQzMDM5NTU2IDEuNjA2LC0wLjExNTE0MjI1IDYuODk3NDg1LDEuMjYyNTQ1OTYgNy4yODM1MTQsNy41MjI2MTI5NiB6IiBmaWxsPSJjcmltc29uIiBzdHJva2Utd2lkdGg9IjIiLz4KICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0ibSA4LjExNDc1NjIsMi4wNTI5ODI4IGMgMy4zNDkxNjk4LDAgNi4wNjQxMzI4LDIuNjc2ODYyNyA2LjA2NDEzMjgsNS45Nzg5NTMgMCwzLjMwMjExMjIgLTIuNzE0OTYzLDUuOTc4OTIwMiAtNi4wNjQxMzI4LDUuOTc4OTIwMiAtMy4zNDkxNDczLDAgLTYuMDY0MTc3MiwtMi42NzY4MDggLTYuMDY0MTc3MiwtNS45Nzg5MjAyIDAuMDA1MzksLTMuMjk5ODg2MSAyLjcxNzI2NTYsLTUuOTczNjQwOCA2LjA2NDE3NzIsLTUuOTc4OTUzIHogbSAwLC0xLjczNTgyNzE5IGMgLTQuMzIxNDgzNiwwIC03LjgyNDc0MDM4LDMuNDU0MDE4NDkgLTcuODI0NzQwMzgsNy43MTQ3ODAxOSAwLDQuMjYwNzI4MiAzLjUwMzI1Njc4LDcuNzE0NzQ1MiA3LjgyNDc0MDM4LDcuNzE0NzQ1MiA0LjMyMTQ0OTgsMCA3LjgyNDY5OTgsLTMuNDU0MDE3IDcuODI0Njk5OCwtNy43MTQ3NDUyIDAsLTIuMDQ2MDkxNCAtMC44MjQzOTIsLTQuMDA4MzY3MiAtMi4yOTE3NTYsLTUuNDU1MTc0NiBDIDEyLjE4MDIyNSwxLjEyOTk2NDggMTAuMTkwMDEzLDAuMzE3MTU1NjEgOC4xMTQ3NTYyLDAuMzE3MTU1NjEgWiBNIDYuOTM3NDU2Myw4LjI0MDU5ODUgNC42NzE4Njg1LDEwLjQ4NTg1MiA2LjAwODY4MTQsMTEuODc2NzI4IDguMzE3MDAzNSw5LjYwMDc5MTEgMTAuNjI1MzM3LDExLjg3NjcyOCAxMS45NjIxMzgsMTAuNDg1ODUyIDkuNjk2NTUwOCw4LjI0MDU5ODUgMTEuOTYyMTM4LDYuMDA2ODA2NiAxMC41NzMyNDYsNC42Mzc0MzM1IDguMzE3MDAzNSw2Ljg3MzQyOTcgNi4wNjA3NjA3LDQuNjM3NDMzNSA0LjY3MTg2ODUsNi4wMDY4MDY2IFoiIGZpbGw9ImNyaW1zb24iIHN0cm9rZS13aWR0aD0iMiIvPgo8L3N2Zz4=");
    background-color: crimson;
}
.ace_icon_svg.ace_security_fold {
    -webkit-mask-image: url("data:image/svg+xml;base64,CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMTcgMTQiIGZpbGw9Im5vbmUiPgogICAgPHBhdGggZD0iTTEwLjAwMDEgMTMuNjk5MkMxMC4wMDAxIDEzLjY5OTIgMTEuOTI0MSAxMy40NzYzIDEzIDEyLjY5OTJDMTQuNDEzOSAxMS42NzgxIDE2IDEwLjUgMTYuMTI1MSA2LjgxMTI2VjIuNTg5ODdDMTYuMTI1MSAyLjU0NzY4IDE2LjEyMjEgMi41MDYxOSAxNi4xMTY0IDIuNDY1NTlWMS43MTQ4NUgxNS4yNDE0TDE1LjIzMDcgMS43MTQ4NEwxNC42MjUxIDEuNjk5MjJWNi44MTEyM0MxNC42MjUxIDguNTEwNjEgMTQuNjI1MSA5LjQ2NDYxIDEyLjc4MjQgMTEuNzIxQzEyLjE1ODYgMTIuNDg0OCAxMC4wMDAxIDEzLjY5OTIgMTAuMDAwMSAxMy42OTkyWiIgZmlsbD0iY3JpbXNvbiIgc3Ryb2tlLXdpZHRoPSIyIi8+CiAgICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTcuMzM2MDkgMC4zNjc0NzVDNy4wMzIxNCAwLjE1MjY1MiA2LjYyNTQ4IDAuMTUzNjE0IDYuMzIyNTMgMC4zNjk5OTdMNi4zMDg2OSAwLjM3OTU1NEM2LjI5NTUzIDAuMzg4NTg4IDYuMjczODggMC40MDMyNjYgNi4yNDQxNyAwLjQyMjc4OUM2LjE4NDcxIDAuNDYxODYgNi4wOTMyMSAwLjUyMDE3MSA1Ljk3MzEzIDAuNTkxMzczQzUuNzMyNTEgMC43MzQwNTkgNS4zNzk5IDAuOTI2ODY0IDQuOTQyNzkgMS4xMjAwOUM0LjA2MTQ0IDEuNTA5NyAyLjg3NTQxIDEuODgzNzcgMS41ODk4NCAxLjg4Mzc3SDAuNzE0ODQ0VjIuNzU4NzdWNi45ODAxNUMwLjcxNDg0NCA5LjQ5Mzc0IDIuMjg4NjYgMTEuMTk3MyAzLjcwMjU0IDEyLjIxODVDNC40MTg0NSAxMi43MzU1IDUuMTI4NzQgMTMuMTA1MyA1LjY1NzMzIDEzLjM0NTdDNS45MjI4NCAxMy40NjY0IDYuMTQ1NjYgMTMuNTU1OSA2LjMwNDY1IDEzLjYxNjFDNi4zODQyMyAxMy42NDYyIDYuNDQ4MDUgMTMuNjY5IDYuNDkzNDkgMTMuNjg0OEM2LjUxNjIyIDEzLjY5MjcgNi41MzQzOCAxMy42OTg5IDYuNTQ3NjQgMTMuNzAzM0w2LjU2MzgyIDEzLjcwODdMNi41NjkwOCAxMy43MTA0TDYuNTcwOTkgMTMuNzExTDYuODM5ODQgMTMuNzUzM0w2LjU3MjQyIDEzLjcxMTVDNi43NDYzMyAxMy43NjczIDYuOTMzMzUgMTMuNzY3MyA3LjEwNzI3IDEzLjcxMTVMNy4xMDg3IDEzLjcxMUw3LjExMDYxIDEzLjcxMDRMNy4xMTU4NyAxMy43MDg3TDcuMTMyMDUgMTMuNzAzM0M3LjE0NTMxIDEzLjY5ODkgNy4xNjM0NiAxMy42OTI3IDcuMTg2MTkgMTMuNjg0OEM3LjIzMTY0IDEzLjY2OSA3LjI5NTQ2IDEzLjY0NjIgNy4zNzUwMyAxMy42MTYxQzcuNTM0MDMgMTMuNTU1OSA3Ljc1Njg1IDEzLjQ2NjQgOC4wMjIzNiAxMy4zNDU3QzguNTUwOTUgMTMuMTA1MyA5LjI2MTIzIDEyLjczNTUgOS45NzcxNSAxMi4yMTg1QzExLjM5MSAxMS4xOTczIDEyLjk2NDggOS40OTM3NyAxMi45NjQ4IDYuOTgwMThWMi43NTg4QzEyLjk2NDggMi43MTY2IDEyLjk2MTkgMi42NzUxMSAxMi45NTYxIDIuNjM0NTFWMS44ODM3N0gxMi4wODExQzEyLjA3NzUgMS44ODM3NyAxMi4wNzQgMS44ODM3NyAxMi4wNzA0IDEuODgzNzdDMTAuNzk3OSAxLjg4MDA0IDkuNjE5NjIgMS41MTEwMiA4LjczODk0IDEuMTI0ODZDOC43MzUzNCAxLjEyMzI3IDguNzMxNzQgMS4xMjE2OCA4LjcyODE0IDEuMTIwMDlDOC4yOTEwMyAwLjkyNjg2NCA3LjkzODQyIDAuNzM0MDU5IDcuNjk3NzkgMC41OTEzNzNDNy41Nzc3MiAwLjUyMDE3MSA3LjQ4NjIyIDAuNDYxODYgNy40MjY3NiAwLjQyMjc4OUM3LjM5NzA1IDAuNDAzMjY2IDcuMzc1MzkgMC4zODg1ODggNy4zNjIyNCAwLjM3OTU1NEw3LjM0ODk2IDAuMzcwMzVDNy4zNDg5NiAwLjM3MDM1IDcuMzQ4NDcgMC4zNzAwMiA3LjM0NTYzIDAuMzc0MDU0TDcuMzM3NzkgMC4zNjg2NTlMNy4zMzYwOSAwLjM2NzQ3NVpNOC4wMzQ3MSAyLjcyNjkxQzguODYwNCAzLjA5MDYzIDkuOTYwNjYgMy40NjMwOSAxMS4yMDYxIDMuNTg5MDdWNi45ODAxNUgxMS4yMTQ4QzExLjIxNDggOC42Nzk1MyAxMC4xNjM3IDkuOTI1MDcgOC45NTI1NCAxMC43OTk4QzguMzU1OTUgMTEuMjMwNiA3Ljc1Mzc0IDExLjU0NTQgNy4yOTc5NiAxMS43NTI3QzcuMTE2NzEgMTEuODM1MSA2Ljk2MDYyIDExLjg5OTYgNi44Mzk4NCAxMS45NDY5QzYuNzE5MDYgMTEuODk5NiA2LjU2Mjk3IDExLjgzNTEgNi4zODE3MyAxMS43NTI3QzUuOTI1OTUgMTEuNTQ1NCA1LjMyMzczIDExLjIzMDYgNC43MjcxNSAxMC43OTk4QzMuNTE2MDMgOS45MjUwNyAyLjQ2NDg0IDguNjc5NTUgMi40NjQ4NCA2Ljk4MDE4VjMuNTg5MDlDMy43MTczOCAzLjQ2MjM5IDQuODIzMDggMy4wODYzOSA1LjY1MDMzIDIuNzIwNzFDNi4xNDIyOCAyLjUwMzI0IDYuNTQ0ODUgMi4yODUzNyA2LjgzMjU0IDIuMTE2MjRDNy4xMjE4MSAyLjI4NTM1IDcuNTI3IDIuNTAzNTIgOC4wMjE5NiAyLjcyMTMxQzguMDI2MiAyLjcyMzE3IDguMDMwNDUgMi43MjUwNCA4LjAzNDcxIDIuNzI2OTFaTTUuOTY0ODQgMy40MDE0N1Y3Ljc3NjQ3SDcuNzE0ODRWMy40MDE0N0g1Ljk2NDg0Wk01Ljk2NDg0IDEwLjQwMTVWOC42NTE0N0g3LjcxNDg0VjEwLjQwMTVINS45NjQ4NFoiIGZpbGw9ImNyaW1zb24iIHN0cm9rZS13aWR0aD0iMiIvPgo8L3N2Zz4=");
    background-color: crimson;
}
.ace_icon_svg.ace_warning_fold {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAyMCAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNC43NzY5IDE0LjczMzdMOC42NTE5MiAyLjQ4MzY5QzguMzI5NDYgMS44Mzg3NyA3LjQwOTEzIDEuODM4NzcgNy4wODY2NyAyLjQ4MzY5TDAuOTYxNjY5IDE0LjczMzdDMC42NzA3NzUgMTUuMzE1NSAxLjA5MzgzIDE2IDEuNzQ0MjkgMTZIMTMuOTk0M0MxNC42NDQ4IDE2IDE1LjA2NzggMTUuMzE1NSAxNC43NzY5IDE0LjczMzdaTTMuMTYwMDcgMTQuMjVMNy44NjkyOSA0LjgzMTU2TDEyLjU3ODUgMTQuMjVIMy4xNjAwN1pNOC43NDQyOSAxMS42MjVWMTMuMzc1SDYuOTk0MjlWMTEuNjI1SDguNzQ0MjlaTTYuOTk0MjkgMTAuNzVWNy4yNUg4Ljc0NDI5VjEwLjc1SDYuOTk0MjlaIiBmaWxsPSIjRUM3MjExIi8+CjxwYXRoIGQ9Ik0xMS4xOTkxIDIuOTUyMzhDMTAuODgwOSAyLjMxNDY3IDEwLjM1MzcgMS44MDUyNiA5LjcwNTUgMS41MDlMMTEuMDQxIDEuMDY5NzhDMTEuNjg4MyAwLjk0OTgxNCAxMi4zMzcgMS4yNzI2MyAxMi42MzE3IDEuODYxNDFMMTcuNjEzNiAxMS44MTYxQzE4LjM1MjcgMTMuMjkyOSAxNy41OTM4IDE1LjA4MDQgMTYuMDE4IDE1LjU3NDVDMTYuNDA0NCAxNC40NTA3IDE2LjMyMzEgMTMuMjE4OCAxNS43OTI0IDEyLjE1NTVMMTEuMTk5MSAyLjk1MjM4WiIgZmlsbD0iI0VDNzIxMSIvPgo8L3N2Zz4=");
    background-color: darkorange;
}

.ace_scrollbar {
    contain: strict;
    position: absolute;
    right: 0;
    bottom: 0;
    z-index: 6;
}

.ace_scrollbar-inner {
    position: absolute;
    cursor: text;
    left: 0;
    top: 0;
}

.ace_scrollbar-v{
    overflow-x: hidden;
    overflow-y: scroll;
    top: 0;
}

.ace_scrollbar-h {
    overflow-x: scroll;
    overflow-y: hidden;
    left: 0;
}

.ace_print-margin {
    position: absolute;
    height: 100%;
}

.ace_text-input {
    position: absolute;
    z-index: 0;
    width: 0.5em;
    height: 1em;
    opacity: 0;
    background: transparent;
    -moz-appearance: none;
    appearance: none;
    border: none;
    resize: none;
    outline: none;
    overflow: hidden;
    font: inherit;
    padding: 0 1px;
    margin: 0 -1px;
    contain: strict;
    -ms-user-select: text;
    -moz-user-select: text;
    -webkit-user-select: text;
    user-select: text;
    /*with \`pre-line\` chrome inserts &nbsp; instead of space*/
    white-space: pre!important;
}
.ace_text-input.ace_composition {
    background: transparent;
    color: inherit;
    z-index: 1000;
    opacity: 1;
}
.ace_composition_placeholder { color: transparent }
.ace_composition_marker { 
    border-bottom: 1px solid;
    position: absolute;
    border-radius: 0;
    margin-top: 1px;
}

[ace_nocontext=true] {
    transform: none!important;
    filter: none!important;
    clip-path: none!important;
    mask : none!important;
    contain: none!important;
    perspective: none!important;
    mix-blend-mode: initial!important;
    z-index: auto;
}

.ace_layer {
    z-index: 1;
    position: absolute;
    overflow: hidden;
    /* workaround for chrome bug https://github.com/ajaxorg/ace/issues/2312*/
    word-wrap: normal;
    white-space: pre;
    height: 100%;
    width: 100%;
    box-sizing: border-box;
    /* setting pointer-events: auto; on node under the mouse, which changes
        during scroll, will break mouse wheel scrolling in Safari */
    pointer-events: none;
}

.ace_gutter-layer {
    position: relative;
    width: auto;
    text-align: right;
    pointer-events: auto;
    height: 1000000px;
    contain: style size layout;
}

.ace_text-layer {
    font: inherit !important;
    position: absolute;
    height: 1000000px;
    width: 1000000px;
    contain: style size layout;
}

.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {
    contain: style size layout;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
}

.ace_hidpi .ace_text-layer,
.ace_hidpi .ace_gutter-layer,
.ace_hidpi .ace_content,
.ace_hidpi .ace_gutter {
    contain: strict;
}
.ace_hidpi .ace_text-layer > .ace_line, 
.ace_hidpi .ace_text-layer > .ace_line_group {
    contain: strict;
}

.ace_cjk {
    display: inline-block;
    text-align: center;
}

.ace_cursor-layer {
    z-index: 4;
}

.ace_cursor {
    z-index: 4;
    position: absolute;
    box-sizing: border-box;
    border-left: 2px solid;
    /* workaround for smooth cursor repaintng whole screen in chrome */
    transform: translatez(0);
}

.ace_multiselect .ace_cursor {
    border-left-width: 1px;
}

.ace_slim-cursors .ace_cursor {
    border-left-width: 1px;
}

.ace_overwrite-cursors .ace_cursor {
    border-left-width: 0;
    border-bottom: 1px solid;
}

.ace_hidden-cursors .ace_cursor {
    opacity: 0.2;
}

.ace_hasPlaceholder .ace_hidden-cursors .ace_cursor {
    opacity: 0;
}

.ace_smooth-blinking .ace_cursor {
    transition: opacity 0.18s;
}

.ace_animate-blinking .ace_cursor {
    animation-duration: 1000ms;
    animation-timing-function: step-end;
    animation-name: blink-ace-animate;
    animation-iteration-count: infinite;
}

.ace_animate-blinking.ace_smooth-blinking .ace_cursor {
    animation-duration: 1000ms;
    animation-timing-function: ease-in-out;
    animation-name: blink-ace-animate-smooth;
}
    
@keyframes blink-ace-animate {
    from, to { opacity: 1; }
    60% { opacity: 0; }
}

@keyframes blink-ace-animate-smooth {
    from, to { opacity: 1; }
    45% { opacity: 1; }
    60% { opacity: 0; }
    85% { opacity: 0; }
}

.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {
    position: absolute;
    z-index: 3;
}

.ace_marker-layer .ace_selection {
    position: absolute;
    z-index: 5;
}

.ace_marker-layer .ace_bracket {
    position: absolute;
    z-index: 6;
}

.ace_marker-layer .ace_error_bracket {
    position: absolute;
    border-bottom: 1px solid #DE5555;
    border-radius: 0;
}

.ace_marker-layer .ace_active-line {
    position: absolute;
    z-index: 2;
}

.ace_marker-layer .ace_selected-word {
    position: absolute;
    z-index: 4;
    box-sizing: border-box;
}

.ace_line .ace_fold {
    box-sizing: border-box;

    display: inline-block;
    height: 11px;
    margin-top: -2px;
    vertical-align: middle;

    background-image:
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");
    background-repeat: no-repeat, repeat-x;
    background-position: center center, top left;
    color: transparent;

    border: 1px solid black;
    border-radius: 2px;

    cursor: pointer;
    pointer-events: auto;
}

.ace_dark .ace_fold {
}

.ace_fold:hover{
    background-image:
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");
}

.ace_tooltip {
    background-color: #f5f5f5;
    border: 1px solid gray;
    border-radius: 1px;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
    color: black;
    max-width: 100%;
    padding: 3px 4px;
    position: fixed;
    z-index: 999999;
    box-sizing: border-box;
    cursor: default;
    white-space: pre-wrap;
    word-wrap: break-word;
    line-height: normal;
    font-style: normal;
    font-weight: normal;
    letter-spacing: normal;
    pointer-events: none;
    overflow: auto;
    max-width: min(60em, 66vw);
    overscroll-behavior: contain;
}
.ace_tooltip pre {
    white-space: pre-wrap;
}

.ace_tooltip.ace_dark {
    background-color: #636363;
    color: #fff;
}

.ace_tooltip:focus {
    outline: 1px solid #5E9ED6;
}

.ace_icon {
    display: inline-block;
    width: 18px;
    vertical-align: top;
}

.ace_icon_svg {
    display: inline-block;
    width: 12px;
    vertical-align: top;
    -webkit-mask-repeat: no-repeat;
    -webkit-mask-size: 12px;
    -webkit-mask-position: center;
}

.ace_folding-enabled > .ace_gutter-cell, .ace_folding-enabled > .ace_gutter-cell_svg-icons {
    padding-right: 13px;
}

.ace_fold-widget {
    box-sizing: border-box;

    margin: 0 -12px 0 1px;
    display: none;
    width: 11px;
    vertical-align: top;

    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: center;

    border-radius: 3px;
    
    border: 1px solid transparent;
    cursor: pointer;
}

.ace_folding-enabled .ace_fold-widget {
    display: inline-block;   
}

.ace_fold-widget.ace_end {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");
}

.ace_fold-widget.ace_closed {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");
}

.ace_fold-widget:hover {
    border: 1px solid rgba(0, 0, 0, 0.3);
    background-color: rgba(255, 255, 255, 0.2);
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);
}

.ace_fold-widget:active {
    border: 1px solid rgba(0, 0, 0, 0.4);
    background-color: rgba(0, 0, 0, 0.05);
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);
}
/**
 * Dark version for fold widgets
 */
.ace_dark .ace_fold-widget {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");
}
.ace_dark .ace_fold-widget.ace_end {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");
}
.ace_dark .ace_fold-widget.ace_closed {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");
}
.ace_dark .ace_fold-widget:hover {
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);
    background-color: rgba(255, 255, 255, 0.1);
}
.ace_dark .ace_fold-widget:active {
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);
}

.ace_inline_button {
    border: 1px solid lightgray;
    display: inline-block;
    margin: -1px 8px;
    padding: 0 5px;
    pointer-events: auto;
    cursor: pointer;
}
.ace_inline_button:hover {
    border-color: gray;
    background: rgba(200,200,200,0.2);
    display: inline-block;
    pointer-events: auto;
}

.ace_fold-widget.ace_invalid {
    background-color: #FFB4B4;
    border-color: #DE5555;
}

.ace_fade-fold-widgets .ace_fold-widget {
    transition: opacity 0.4s ease 0.05s;
    opacity: 0;
}

.ace_fade-fold-widgets:hover .ace_fold-widget {
    transition: opacity 0.05s ease 0.05s;
    opacity:1;
}

.ace_underline {
    text-decoration: underline;
}

.ace_bold {
    font-weight: bold;
}

.ace_nobold .ace_bold {
    font-weight: normal;
}

.ace_italic {
    font-style: italic;
}


.ace_error-marker {
    background-color: rgba(255, 0, 0,0.2);
    position: absolute;
    z-index: 9;
}

.ace_highlight-marker {
    background-color: rgba(255, 255, 0,0.2);
    position: absolute;
    z-index: 8;
}

.ace_mobile-menu {
    position: absolute;
    line-height: 1.5;
    border-radius: 4px;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    background: white;
    box-shadow: 1px 3px 2px grey;
    border: 1px solid #dcdcdc;
    color: black;
}
.ace_dark > .ace_mobile-menu {
    background: #333;
    color: #ccc;
    box-shadow: 1px 3px 2px grey;
    border: 1px solid #444;

}
.ace_mobile-button {
    padding: 2px;
    cursor: pointer;
    overflow: hidden;
}
.ace_mobile-button:hover {
    background-color: #eee;
    opacity:1;
}
.ace_mobile-button:active {
    background-color: #ddd;
}

.ace_placeholder {
    position: relative;
    font-family: arial;
    transform: scale(0.9);
    transform-origin: left;
    white-space: pre;
    opacity: 0.7;
    margin: 0 10px;
    z-index: 1;
}

.ace_ghost_text {
    opacity: 0.5;
    font-style: italic;
}

.ace_ghost_text_container > div {
    white-space: pre;
}

.ghost_text_line_wrapped::after {
    content: "";
    position: absolute;
}

.ace_lineWidgetContainer.ace_ghost_text {
    margin: 0px 4px
}

.ace_screenreader-only {
    position:absolute;
    left:-10000px;
    top:auto;
    width:1px;
    height:1px;
    overflow:hidden;
}

.ace_hidden_token {
    display: none;
}`,Sn={},ea=ee,ta=ae,ia=fe.EventEmitter;let An=class{constructor(e,t){this.canvas=ea.createElement("canvas"),this.renderer=t,this.pixelRatio=1,this.maxHeight=t.layerConfig.maxHeight,this.lineHeight=t.layerConfig.lineHeight,this.canvasHeight=e.parent.scrollHeight,this.heightRatio=this.canvasHeight/this.maxHeight,this.canvasWidth=e.width,this.minDecorationHeight=2*this.pixelRatio|0,this.halfMinDecorationHeight=this.minDecorationHeight/2|0,this.canvas.width=this.canvasWidth,this.canvas.height=this.canvasHeight,this.canvas.style.top="0px",this.canvas.style.right="0px",this.canvas.style.zIndex="7px",this.canvas.style.position="absolute",this.colors={},this.colors.dark={error:"rgba(255, 18, 18, 1)",warning:"rgba(18, 136, 18, 1)",info:"rgba(18, 18, 136, 1)"},this.colors.light={error:"rgb(255,51,51)",warning:"rgb(32,133,72)",info:"rgb(35,68,138)"},e.element.appendChild(this.canvas)}$updateDecorators(e){var t=this.renderer.theme.isDark===!0?this.colors.dark:this.colors.light;if(e){this.maxHeight=e.maxHeight,this.lineHeight=e.lineHeight,this.canvasHeight=e.height;var i=(e.lastRow+1)*this.lineHeight;i<this.canvasHeight?this.heightRatio=1:this.heightRatio=this.canvasHeight/this.maxHeight}var r=this.canvas.getContext("2d");function s(c,u){return c.priority<u.priority?-1:c.priority>u.priority?1:0}var n=this.renderer.session.$annotations;if(r.clearRect(0,0,this.canvas.width,this.canvas.height),n){var o={info:1,warning:2,error:3};n.forEach(function(c){c.priority=o[c.type]||null}),n=n.sort(s);var l=this.renderer.session.$foldData;for(let c=0;c<n.length;c++){let u=n[c].row,g=this.compensateFoldRows(u,l),w=Math.round((u-g)*this.lineHeight*this.heightRatio),d=Math.round((u-g)*this.lineHeight*this.heightRatio),m=Math.round(((u-g)*this.lineHeight+this.lineHeight)*this.heightRatio);if(m-d<this.minDecorationHeight){let v=(d+m)/2|0;v<this.halfMinDecorationHeight?v=this.halfMinDecorationHeight:v+this.halfMinDecorationHeight>this.canvasHeight&&(v=this.canvasHeight-this.halfMinDecorationHeight),d=Math.round(v-this.halfMinDecorationHeight),m=Math.round(v+this.halfMinDecorationHeight)}r.fillStyle=t[n[c].type]||null,r.fillRect(0,w,this.canvasWidth,m-d)}}var h=this.renderer.session.selection.getCursor();if(h){let c=this.compensateFoldRows(h.row,l),u=Math.round((h.row-c)*this.lineHeight*this.heightRatio);r.fillStyle="rgba(0, 0, 0, 0.5)",r.fillRect(0,u,this.canvasWidth,2)}}compensateFoldRows(e,t){let i=0;if(t&&t.length>0)for(let r=0;r<t.length;r++)e>t[r].start.row&&e<t[r].end.row?i+=e-t[r].start.row:e>=t[r].end.row&&(i+=t[r].end.row-t[r].start.row);return i}};ta.implement(An.prototype,ia);Sn.Decorator=An;var ra=ae,_=ee,na=V,je=we,sa=vn.Gutter,Cr=mn.Marker,oa=wn.Text,aa=$n.Cursor,Sr=ze.HScrollBar,Ar=ze.VScrollBar,la=Pe.HScrollBar,ha=Pe.VScrollBar,ca=bn.RenderLoop,ua=Cn.FontMetrics,da=fe.EventEmitter,Mn=qo,ga=Sn.Decorator,ht=be;const fa=Di.isTextToken;_.importCssString(Mn,"ace_editor.css",!1);class ce{constructor(e,t){var i=this;this.container=e||_.createElement("div"),_.addCssClass(this.container,"ace_editor"),_.HI_DPI&&_.addCssClass(this.container,"ace_hidpi"),this.setTheme(t),je.get("useStrictCSP")==null&&je.set("useStrictCSP",!1),this.$gutter=_.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.$gutter.setAttribute("aria-hidden","true"),this.scroller=_.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=_.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new sa(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new Cr(this.content);var r=this.$textLayer=new oa(this.content);this.canvas=r.element,this.$markerFront=new Cr(this.content),this.$cursorLayer=new aa(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new Ar(this.container,this),this.scrollBarH=new Sr(this.container,this),this.scrollBarV.on("scroll",function(s){i.$scrollAnimation||i.session.setScrollTop(s.data-i.scrollMargin.top)}),this.scrollBarH.on("scroll",function(s){i.$scrollAnimation||i.session.setScrollLeft(s.data-i.scrollMargin.left)}),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new ua(this.container),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.on("changeCharacterSize",function(s){i.updateCharacterSize(),i.onResize(!0,i.gutterWidth,i.$size.width,i.$size.height),i._signal("changeCharacterSize",s)}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.margin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$keepTextAreaAtCursor=!ht.isIOS,this.$loop=new ca(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),this.$addResizeObserver(),je.resetOptions(this),je._signal("renderer",this)}updateCharacterSize(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin(),_.setStyle(this.scroller.style,"line-height",this.lineHeight+"px")}setSession(e){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=e,e&&this.scrollMargin.top&&e.getScrollTop()<=0&&e.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(e),this.$markerBack.setSession(e),this.$markerFront.setSession(e),this.$gutterLayer.setSession(e),this.$textLayer.setSession(e),e&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))}updateLines(e,t,i){if(t===void 0&&(t=1/0),this.$changedLines?(this.$changedLines.firstRow>e&&(this.$changedLines.firstRow=e),this.$changedLines.lastRow<t&&(this.$changedLines.lastRow=t)):this.$changedLines={firstRow:e,lastRow:t},this.$changedLines.lastRow<this.layerConfig.firstRow)if(i)this.$changedLines.lastRow=this.layerConfig.lastRow;else return;this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)}onChangeNewLineMode(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar(),this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR)}onChangeTabSize(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()}updateText(){this.$loop.schedule(this.CHANGE_TEXT)}updateFull(e){e?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)}updateFontSize(){this.$textLayer.checkForSizeChanges()}$updateSizeAsync(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()}onResize(e,t,i,r){if(!(this.resizing>2)){this.resizing>0?this.resizing++:this.resizing=e?1:0;var s=this.container;r||(r=s.clientHeight||s.scrollHeight),!r&&this.$maxLines&&this.lineHeight>1&&(!s.style.height||s.style.height=="0px")&&(s.style.height="1px",r=s.clientHeight||s.scrollHeight),i||(i=s.clientWidth||s.scrollWidth);var n=this.$updateCachedSize(e,t,i,r);if(this.$resizeTimer&&this.$resizeTimer.cancel(),!this.$size.scrollerHeight||!i&&!r)return this.resizing=0;e&&(this.$gutterLayer.$padding=null),e?this.$renderChanges(n|this.$changes,!0):this.$loop.schedule(n|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.$customScrollbar&&this.$updateCustomScrollbar(!0)}}$updateCachedSize(e,t,i,r){r-=this.$extraHeight||0;var s=0,n=this.$size,o={width:n.width,height:n.height,scrollerHeight:n.scrollerHeight,scrollerWidth:n.scrollerWidth};if(r&&(e||n.height!=r)&&(n.height=r,s|=this.CHANGE_SIZE,n.scrollerHeight=n.height,this.$horizScroll&&(n.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.setHeight(n.scrollerHeight),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",s=s|this.CHANGE_SCROLL),i&&(e||n.width!=i)){s|=this.CHANGE_SIZE,n.width=i,t==null&&(t=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=t,_.setStyle(this.scrollBarH.element.style,"left",t+"px"),_.setStyle(this.scroller.style,"left",t+this.margin.left+"px"),n.scrollerWidth=Math.max(0,i-t-this.scrollBarV.getWidth()-this.margin.h),_.setStyle(this.$gutter.style,"left",this.margin.left+"px");var l=this.scrollBarV.getWidth()+"px";_.setStyle(this.scrollBarH.element.style,"right",l),_.setStyle(this.scroller.style,"right",l),_.setStyle(this.scroller.style,"bottom",this.scrollBarH.getHeight()),this.scrollBarH.setWidth(n.scrollerWidth),(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||e)&&(s|=this.CHANGE_FULL)}return n.$dirty=!i||!r,s&&this._signal("resize",o),s}onGutterResize(e){var t=this.$showGutter?e:0;t!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,t,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()?this.$loop.schedule(this.CHANGE_FULL):this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):this.$computeLayerConfig()}adjustWrapLimit(){var e=this.$size.scrollerWidth-this.$padding*2,t=Math.floor(e/this.characterWidth);return this.session.adjustWrapLimit(t,this.$showPrintMargin&&this.$printMarginColumn)}setAnimatedScroll(e){this.setOption("animatedScroll",e)}getAnimatedScroll(){return this.$animatedScroll}setShowInvisibles(e){this.setOption("showInvisibles",e),this.session.$bidiHandler.setShowInvisibles(e)}getShowInvisibles(){return this.getOption("showInvisibles")}getDisplayIndentGuides(){return this.getOption("displayIndentGuides")}setDisplayIndentGuides(e){this.setOption("displayIndentGuides",e)}getHighlightIndentGuides(){return this.getOption("highlightIndentGuides")}setHighlightIndentGuides(e){this.setOption("highlightIndentGuides",e)}setShowPrintMargin(e){this.setOption("showPrintMargin",e)}getShowPrintMargin(){return this.getOption("showPrintMargin")}setPrintMarginColumn(e){this.setOption("printMarginColumn",e)}getPrintMarginColumn(){return this.getOption("printMarginColumn")}getShowGutter(){return this.getOption("showGutter")}setShowGutter(e){return this.setOption("showGutter",e)}getFadeFoldWidgets(){return this.getOption("fadeFoldWidgets")}setFadeFoldWidgets(e){this.setOption("fadeFoldWidgets",e)}setHighlightGutterLine(e){this.setOption("highlightGutterLine",e)}getHighlightGutterLine(){return this.getOption("highlightGutterLine")}$updatePrintMargin(){if(!(!this.$showPrintMargin&&!this.$printMarginEl)){if(!this.$printMarginEl){var e=_.createElement("div");e.className="ace_layer ace_print-margin-layer",this.$printMarginEl=_.createElement("div"),this.$printMarginEl.className="ace_print-margin",e.appendChild(this.$printMarginEl),this.content.insertBefore(e,this.content.firstChild)}var t=this.$printMarginEl.style;t.left=Math.round(this.characterWidth*this.$printMarginColumn+this.$padding)+"px",t.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&this.session.$wrap==-1&&this.adjustWrapLimit()}}getContainerElement(){return this.container}getMouseEventTarget(){return this.scroller}getTextAreaContainer(){return this.container}$moveTextAreaToCursor(){if(!this.$isMousePressed){var e=this.textarea.style,t=this.$composition;if(!this.$keepTextAreaAtCursor&&!t){_.translate(this.textarea,-100,0);return}var i=this.$cursorLayer.$pixelPos;if(i){t&&t.markerRange&&(i=this.$cursorLayer.getPixelPosition(t.markerRange.start,!0));var r=this.layerConfig,s=i.top,n=i.left;s-=r.offset;var o=t&&t.useTextareaForIME||ht.isMobile?this.lineHeight:1;if(s<0||s>r.height-o){_.translate(this.textarea,0,0);return}var l=1,h=this.$size.height-o;if(!t)s+=this.lineHeight;else if(t.useTextareaForIME){var c=this.textarea.value;l=this.characterWidth*this.session.$getStringScreenWidth(c)[0]}else s+=this.lineHeight+2;n-=this.scrollLeft,n>this.$size.scrollerWidth-l&&(n=this.$size.scrollerWidth-l),n+=this.gutterWidth+this.margin.left,_.setStyle(e,"height",o+"px"),_.setStyle(e,"width",l+"px"),_.translate(this.textarea,Math.min(n,this.$size.scrollerWidth-l),Math.min(s,h))}}}getFirstVisibleRow(){return this.layerConfig.firstRow}getFirstFullyVisibleRow(){return this.layerConfig.firstRow+(this.layerConfig.offset===0?0:1)}getLastFullyVisibleRow(){var e=this.layerConfig,t=e.lastRow,i=this.session.documentToScreenRow(t,0)*e.lineHeight;return i-this.session.getScrollTop()>e.height-e.lineHeight?t-1:t}getLastVisibleRow(){return this.layerConfig.lastRow}setPadding(e){this.$padding=e,this.$textLayer.setPadding(e),this.$cursorLayer.setPadding(e),this.$markerFront.setPadding(e),this.$markerBack.setPadding(e),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()}setScrollMargin(e,t,i,r){var s=this.scrollMargin;s.top=e|0,s.bottom=t|0,s.right=r|0,s.left=i|0,s.v=s.top+s.bottom,s.h=s.left+s.right,s.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-s.top),this.updateFull()}setMargin(e,t,i,r){var s=this.margin;s.top=e|0,s.bottom=t|0,s.right=r|0,s.left=i|0,s.v=s.top+s.bottom,s.h=s.left+s.right,this.$updateCachedSize(!0,this.gutterWidth,this.$size.width,this.$size.height),this.updateFull()}getHScrollBarAlwaysVisible(){return this.$hScrollBarAlwaysVisible}setHScrollBarAlwaysVisible(e){this.setOption("hScrollBarAlwaysVisible",e)}getVScrollBarAlwaysVisible(){return this.$vScrollBarAlwaysVisible}setVScrollBarAlwaysVisible(e){this.setOption("vScrollBarAlwaysVisible",e)}$updateScrollBarV(){var e=this.layerConfig.maxHeight,t=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&(e-=(t-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>e-t&&(e=this.scrollTop+t,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight(e+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)}$updateScrollBarH(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)}freeze(){this.$frozen=!0}unfreeze(){this.$frozen=!1}$renderChanges(e,t){if(this.$changes&&(e|=this.$changes,this.$changes=0),!this.session||!this.container.offsetWidth||this.$frozen||!e&&!t){this.$changes|=e;return}if(this.$size.$dirty)return this.$changes|=e,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender",e),this.session&&this.session.$bidiHandler&&this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);var i=this.layerConfig;if(e&this.CHANGE_FULL||e&this.CHANGE_SIZE||e&this.CHANGE_TEXT||e&this.CHANGE_LINES||e&this.CHANGE_SCROLL||e&this.CHANGE_H_SCROLL){if(e|=this.$computeLayerConfig()|this.$loop.clear(),i.firstRow!=this.layerConfig.firstRow&&i.firstRowScreen==this.layerConfig.firstRowScreen){var r=this.scrollTop+(i.firstRow-Math.max(this.layerConfig.firstRow,0))*this.lineHeight;r>0&&(this.scrollTop=r,e=e|this.CHANGE_SCROLL,e|=this.$computeLayerConfig()|this.$loop.clear())}i=this.layerConfig,this.$updateScrollBarV(),e&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),_.translate(this.content,-this.scrollLeft,-i.offset);var s=i.width+2*this.$padding+"px",n=i.minHeight+"px";_.setStyle(this.content.style,"width",s),_.setStyle(this.content.style,"height",n)}if(e&this.CHANGE_H_SCROLL&&(_.translate(this.content,-this.scrollLeft,-i.offset),this.scroller.className=this.scrollLeft<=0?"ace_scroller ":"ace_scroller ace_scroll-left ",this.enableKeyboardAccessibility&&(this.scroller.className+=this.keyboardFocusClassName)),e&this.CHANGE_FULL){this.$changedLines=null,this.$textLayer.update(i),this.$showGutter&&this.$gutterLayer.update(i),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(i),this.$markerBack.update(i),this.$markerFront.update(i),this.$cursorLayer.update(i),this.$moveTextAreaToCursor(),this._signal("afterRender",e);return}if(e&this.CHANGE_SCROLL){this.$changedLines=null,e&this.CHANGE_TEXT||e&this.CHANGE_LINES?this.$textLayer.update(i):this.$textLayer.scrollLines(i),this.$showGutter&&(e&this.CHANGE_GUTTER||e&this.CHANGE_LINES?this.$gutterLayer.update(i):this.$gutterLayer.scrollLines(i)),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(i),this.$markerBack.update(i),this.$markerFront.update(i),this.$cursorLayer.update(i),this.$moveTextAreaToCursor(),this._signal("afterRender",e);return}e&this.CHANGE_TEXT?(this.$changedLines=null,this.$textLayer.update(i),this.$showGutter&&this.$gutterLayer.update(i),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(i)):e&this.CHANGE_LINES?((this.$updateLines()||e&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(i),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(i)):e&this.CHANGE_TEXT||e&this.CHANGE_GUTTER?(this.$showGutter&&this.$gutterLayer.update(i),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(i)):e&this.CHANGE_CURSOR&&(this.$highlightGutterLine&&this.$gutterLayer.updateLineHighlight(i),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(i)),e&this.CHANGE_CURSOR&&(this.$cursorLayer.update(i),this.$moveTextAreaToCursor()),e&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(i),e&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(i),this._signal("afterRender",e)}$autosize(){var e=this.session.getScreenLength()*this.lineHeight,t=this.$maxLines*this.lineHeight,i=Math.min(t,Math.max((this.$minLines||1)*this.lineHeight,e))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&(i+=this.scrollBarH.getHeight()),this.$maxPixelHeight&&i>this.$maxPixelHeight&&(i=this.$maxPixelHeight);var r=i<=2*this.lineHeight,s=!r&&e>t;if(i!=this.desiredHeight||this.$size.height!=this.desiredHeight||s!=this.$vScroll){s!=this.$vScroll&&(this.$vScroll=s,this.scrollBarV.setVisible(s));var n=this.container.clientWidth;this.container.style.height=i+"px",this.$updateCachedSize(!0,this.$gutterWidth,n,i),this.desiredHeight=i,this._signal("autosize")}}$computeLayerConfig(){var e=this.session,t=this.$size,i=t.height<=2*this.lineHeight,r=this.session.getScreenLength(),s=r*this.lineHeight,n=this.$getLongestLine(),o=!i&&(this.$hScrollBarAlwaysVisible||t.scrollerWidth-n-2*this.$padding<0),l=this.$horizScroll!==o;l&&(this.$horizScroll=o,this.scrollBarH.setVisible(o));var h=this.$vScroll;this.$maxLines&&this.lineHeight>1&&this.$autosize();var c=t.scrollerHeight+this.lineHeight,u=!this.$maxLines&&this.$scrollPastEnd?(t.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;s+=u;var g=this.scrollMargin;this.session.setScrollTop(Math.max(-g.top,Math.min(this.scrollTop,s-t.scrollerHeight+g.bottom))),this.session.setScrollLeft(Math.max(-g.left,Math.min(this.scrollLeft,n+2*this.$padding-t.scrollerWidth+g.right)));var w=!i&&(this.$vScrollBarAlwaysVisible||t.scrollerHeight-s+u<0||this.scrollTop>g.top),d=h!==w;d&&(this.$vScroll=w,this.scrollBarV.setVisible(w));var m=this.scrollTop%this.lineHeight,f=Math.ceil(c/this.lineHeight)-1,v=Math.max(0,Math.round((this.scrollTop-m)/this.lineHeight)),p=v+f,$,C,y=this.lineHeight;v=e.screenToDocumentRow(v,0);var S=e.getFoldLine(v);S&&(v=S.start.row),$=e.documentToScreenRow(v,0),C=e.getRowLength(v)*y,p=Math.min(e.screenToDocumentRow(p,0),e.getLength()-1),c=t.scrollerHeight+e.getRowLength(p)*y+C,m=this.scrollTop-$*y;var M=0;return(this.layerConfig.width!=n||l)&&(M=this.CHANGE_H_SCROLL),(l||d)&&(M|=this.$updateCachedSize(!0,this.gutterWidth,t.width,t.height),this._signal("scrollbarVisibilityChanged"),d&&(n=this.$getLongestLine())),this.layerConfig={width:n,padding:this.$padding,firstRow:v,firstRowScreen:$,lastRow:p,lineHeight:y,characterWidth:this.characterWidth,minHeight:c,maxHeight:s,offset:m,gutterOffset:y?Math.max(0,Math.ceil((m+t.height-t.scrollerHeight)/y)):0,height:this.$size.scrollerHeight},this.session.$bidiHandler&&this.session.$bidiHandler.setContentWidth(n-this.$padding),M}$updateLines(){if(this.$changedLines){var e=this.$changedLines.firstRow,t=this.$changedLines.lastRow;this.$changedLines=null;var i=this.layerConfig;if(!(e>i.lastRow+1)&&!(t<i.firstRow)){if(t===1/0){this.$showGutter&&this.$gutterLayer.update(i),this.$textLayer.update(i);return}return this.$textLayer.updateLines(i,e,t),!0}}}$getLongestLine(){var e=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(e+=1),this.$textLayer&&e>this.$textLayer.MAX_LINE_LENGTH&&(e=this.$textLayer.MAX_LINE_LENGTH+30),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(e*this.characterWidth))}updateFrontMarkers(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)}updateBackMarkers(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)}addGutterDecoration(e,t){this.$gutterLayer.addGutterDecoration(e,t)}removeGutterDecoration(e,t){this.$gutterLayer.removeGutterDecoration(e,t)}updateBreakpoints(e){this._rows=e,this.$loop.schedule(this.CHANGE_GUTTER)}setAnnotations(e){this.$gutterLayer.setAnnotations(e),this.$loop.schedule(this.CHANGE_GUTTER)}updateCursor(){this.$loop.schedule(this.CHANGE_CURSOR)}hideCursor(){this.$cursorLayer.hideCursor()}showCursor(){this.$cursorLayer.showCursor()}scrollSelectionIntoView(e,t,i){this.scrollCursorIntoView(e,i),this.scrollCursorIntoView(t,i)}scrollCursorIntoView(e,t,i){if(this.$size.scrollerHeight!==0){var r=this.$cursorLayer.getPixelPosition(e),s=r.left,n=r.top,o=i&&i.top||0,l=i&&i.bottom||0;this.$scrollAnimation&&(this.$stopAnimation=!0);var h=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;h+o>n?(t&&h+o>n+this.lineHeight&&(n-=t*this.$size.scrollerHeight),n===0&&(n=-this.scrollMargin.top),this.session.setScrollTop(n)):h+this.$size.scrollerHeight-l<n+this.lineHeight&&(t&&h+this.$size.scrollerHeight-l<n-this.lineHeight&&(n+=t*this.$size.scrollerHeight),this.session.setScrollTop(n+this.lineHeight+l-this.$size.scrollerHeight));var c=this.scrollLeft,u=2*this.layerConfig.characterWidth;s-u<c?(s-=u,s<this.$padding+u&&(s=-this.scrollMargin.left),this.session.setScrollLeft(s)):(s+=u,c+this.$size.scrollerWidth<s+this.characterWidth?this.session.setScrollLeft(Math.round(s+this.characterWidth-this.$size.scrollerWidth)):c<=this.$padding&&s-c<this.characterWidth&&this.session.setScrollLeft(0))}}getScrollTop(){return this.session.getScrollTop()}getScrollLeft(){return this.session.getScrollLeft()}getScrollTopRow(){return this.scrollTop/this.lineHeight}getScrollBottomRow(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)}scrollToRow(e){this.session.setScrollTop(e*this.lineHeight)}alignCursor(e,t){typeof e=="number"&&(e={row:e,column:0});var i=this.$cursorLayer.getPixelPosition(e),r=this.$size.scrollerHeight-this.lineHeight,s=i.top-r*(t||0);return this.session.setScrollTop(s),s}$calcSteps(e,t){var i=0,r=this.STEPS,s=[],n=function(o,l,h){return h*(Math.pow(o-1,3)+1)+l};for(i=0;i<r;++i)s.push(n(i/this.STEPS,e,t-e));return s}scrollToLine(e,t,i,r){var s=this.$cursorLayer.getPixelPosition({row:e,column:0}),n=s.top;t&&(n-=this.$size.scrollerHeight/2);var o=this.scrollTop;this.session.setScrollTop(n),i!==!1&&this.animateScrolling(o,r)}animateScrolling(e,t){var i=this.scrollTop;if(!this.$animatedScroll)return;var r=this;if(e==i)return;if(this.$scrollAnimation){var s=this.$scrollAnimation.steps;if(s.length&&(e=s[0],e==i))return}var n=r.$calcSteps(e,i);this.$scrollAnimation={from:e,to:i,steps:n},clearInterval(this.$timer),r.session.setScrollTop(n.shift()),r.session.$scrollTop=i;function o(){r.$timer=clearInterval(r.$timer),r.$scrollAnimation=null,r.$stopAnimation=!1,t&&t()}this.$timer=setInterval(function(){if(r.$stopAnimation){o();return}if(!r.session)return clearInterval(r.$timer);n.length?(r.session.setScrollTop(n.shift()),r.session.$scrollTop=i):i!=null?(r.session.$scrollTop=-1,r.session.setScrollTop(i),i=null):o()},10)}scrollToY(e){this.scrollTop!==e&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=e)}scrollToX(e){this.scrollLeft!==e&&(this.scrollLeft=e),this.$loop.schedule(this.CHANGE_H_SCROLL)}scrollTo(e,t){this.session.setScrollTop(t),this.session.setScrollLeft(e)}scrollBy(e,t){t&&this.session.setScrollTop(this.session.getScrollTop()+t),e&&this.session.setScrollLeft(this.session.getScrollLeft()+e)}isScrollableBy(e,t){if(t<0&&this.session.getScrollTop()>=1-this.scrollMargin.top||t>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||e<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left||e>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right)return!0}pixelToScreenCoordinates(e,t){var i;if(this.$hasCssTransforms){i={top:0,left:0};var r=this.$fontMetrics.transformCoordinates([e,t]);e=r[1]-this.gutterWidth-this.margin.left,t=r[0]}else i=this.scroller.getBoundingClientRect();var s=e+this.scrollLeft-i.left-this.$padding,n=s/this.characterWidth,o=Math.floor((t+this.scrollTop-i.top)/this.lineHeight),l=this.$blockCursor?Math.floor(n):Math.round(n);return{row:o,column:l,side:n-l>0?1:-1,offsetX:s}}screenToTextCoordinates(e,t){var i;if(this.$hasCssTransforms){i={top:0,left:0};var r=this.$fontMetrics.transformCoordinates([e,t]);e=r[1]-this.gutterWidth-this.margin.left,t=r[0]}else i=this.scroller.getBoundingClientRect();var s=e+this.scrollLeft-i.left-this.$padding,n=s/this.characterWidth,o=this.$blockCursor?Math.floor(n):Math.round(n),l=Math.floor((t+this.scrollTop-i.top)/this.lineHeight);return this.session.screenToDocumentPosition(l,Math.max(o,0),s)}textToScreenCoordinates(e,t){var i=this.scroller.getBoundingClientRect(),r=this.session.documentToScreenPosition(e,t),s=this.$padding+(this.session.$bidiHandler.isBidiRow(r.row,e)?this.session.$bidiHandler.getPosLeft(r.column):Math.round(r.column*this.characterWidth)),n=r.row*this.lineHeight;return{pageX:i.left+s-this.scrollLeft,pageY:i.top+n-this.scrollTop}}visualizeFocus(){_.addCssClass(this.container,"ace_focus")}visualizeBlur(){_.removeCssClass(this.container,"ace_focus")}showComposition(e){this.$composition=e,e.cssText||(e.cssText=this.textarea.style.cssText),e.useTextareaForIME==null&&(e.useTextareaForIME=this.$useTextareaForIME),this.$useTextareaForIME?(_.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor(),this.$cursorLayer.element.style.display="none"):e.markerId=this.session.addMarker(e.markerRange,"ace_composition_marker","text")}setCompositionText(e){var t=this.session.selection.cursor;this.addToken(e,"composition_placeholder",t.row,t.column),this.$moveTextAreaToCursor()}hideComposition(){if(this.$composition){this.$composition.markerId&&this.session.removeMarker(this.$composition.markerId),_.removeCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText=this.$composition.cssText;var e=this.session.selection.cursor;this.removeExtraToken(e.row,e.column),this.$composition=null,this.$cursorLayer.element.style.display=""}}setGhostText(e,t){var i=this.session.selection.cursor,r=t||{row:i.row,column:i.column};this.removeGhostText();var s=this.$calculateWrappedTextChunks(e,r);this.addToken(s[0].text,"ghost_text",r.row,r.column),this.$ghostText={text:e,position:{row:r.row,column:r.column}};var n=_.createElement("div");if(s.length>1){var o=this.hideTokensAfterPosition(r.row,r.column),l;s.slice(1).forEach(d=>{var m=_.createElement("div"),f=_.createElement("span");f.className="ace_ghost_text",d.wrapped&&(m.className="ghost_text_line_wrapped"),d.text.length===0&&(d.text=" "),f.appendChild(_.createTextNode(d.text)),m.appendChild(f),n.appendChild(m),l=m}),o.forEach(d=>{var m=_.createElement("span");fa(d.type)||(m.className="ace_"+d.type.replace(/\./g," ace_")),m.appendChild(_.createTextNode(d.value)),l.appendChild(m)}),this.$ghostTextWidget={el:n,row:r.row,column:r.column,className:"ace_ghost_text_container"},this.session.widgetManager.addLineWidget(this.$ghostTextWidget);var h=this.$cursorLayer.getPixelPosition(r,!0),c=this.container,u=c.getBoundingClientRect().height,g=s.length*this.lineHeight,w=g<u-h.top;if(w)return;g<u?this.scrollBy(0,(s.length-1)*this.lineHeight):this.scrollToRow(r.row)}}$calculateWrappedTextChunks(e,t){var i=this.$size.scrollerWidth-this.$padding*2,r=Math.floor(i/this.characterWidth)-2;r=r<=0?60:r;for(var s=e.split(/\r?\n/),n=[],o=0;o<s.length;o++){var l=this.session.$getDisplayTokens(s[o],t.column),h=this.session.$computeWrapSplits(l,r,this.session.$tabSize);if(h.length>0){var c=0;h.push(s[o].length);for(var u=0;u<h.length;u++){let g=s[o].slice(c,h[u]);n.push({text:g,wrapped:!0}),c=h[u]}}else n.push({text:s[o],wrapped:!1})}return n}removeGhostText(){if(this.$ghostText){var e=this.$ghostText.position;this.removeExtraToken(e.row,e.column),this.$ghostTextWidget&&(this.session.widgetManager.removeLineWidget(this.$ghostTextWidget),this.$ghostTextWidget=null),this.$ghostText=null}}addToken(e,t,i,r){var s=this.session;s.bgTokenizer.lines[i]=null;var n={type:t,value:e},o=s.getTokens(i);if(r==null||!o.length)o.push(n);else for(var l=0,h=0;h<o.length;h++){var c=o[h];if(l+=c.value.length,r<=l){var u=c.value.length-(l-r),g=c.value.slice(0,u),w=c.value.slice(u);o.splice(h,1,{type:c.type,value:g},n,{type:c.type,value:w});break}}this.updateLines(i,i)}hideTokensAfterPosition(e,t){for(var i=this.session.getTokens(e),r=0,s=!1,n=[],o=0;o<i.length;o++){var l=i[o];if(r+=l.value.length,l.type!=="ghost_text"){if(s){n.push({type:l.type,value:l.value}),l.type="hidden_token";continue}r===t&&(s=!0)}}return this.updateLines(e,e),n}removeExtraToken(e,t){this.session.bgTokenizer.lines[e]=null,this.updateLines(e,e)}setTheme(e,t){var i=this;if(this.$themeId=e,i._dispatchEvent("themeChange",{theme:e}),!e||typeof e=="string"){var r=e||this.$options.theme.initialValue;je.loadModule(["theme",r],s)}else s(e);function s(n){if(i.$themeId!=e)return t&&t();if(!n||!n.cssClass)throw new Error("couldn't load module "+e+" or it didn't call define");n.$id&&(i.$themeId=n.$id),_.importCssString(n.cssText,n.cssClass,i.container),i.theme&&_.removeCssClass(i.container,i.theme.cssClass);var o="padding"in n?n.padding:"padding"in(i.theme||{})?4:i.$padding;i.$padding&&o!=i.$padding&&i.setPadding(o),i.$theme=n.cssClass,i.theme=n,_.addCssClass(i.container,n.cssClass),_.setCssClass(i.container,"ace_dark",n.isDark),i.$size&&(i.$size.width=0,i.$updateSizeAsync()),i._dispatchEvent("themeLoaded",{theme:n}),t&&t(),ht.isSafari&&i.scroller&&(i.scroller.style.background="red",i.scroller.style.background="")}}getTheme(){return this.$themeId}setStyle(e,t){_.setCssClass(this.container,e,t!==!1)}unsetStyle(e){_.removeCssClass(this.container,e)}setCursorStyle(e){_.setStyle(this.scroller.style,"cursor",e)}setMouseCursor(e){_.setStyle(this.scroller.style,"cursor",e)}attachToShadowRoot(){_.importCssString(Mn,"ace_editor.css",this.container)}destroy(){this.freeze(),this.$fontMetrics.destroy(),this.$cursorLayer.destroy(),this.removeAllListeners(),this.container.textContent="",this.setOption("useResizeObserver",!1)}$updateCustomScrollbar(e){var t=this;this.$horizScroll=this.$vScroll=null,this.scrollBarV.element.remove(),this.scrollBarH.element.remove(),this.$scrollDecorator&&delete this.$scrollDecorator,e===!0?(this.scrollBarV=new ha(this.container,this),this.scrollBarH=new la(this.container,this),this.scrollBarV.setHeight(this.$size.scrollerHeight),this.scrollBarH.setWidth(this.$size.scrollerWidth),this.scrollBarV.addEventListener("scroll",function(i){t.$scrollAnimation||t.session.setScrollTop(i.data-t.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(i){t.$scrollAnimation||t.session.setScrollLeft(i.data-t.scrollMargin.left)}),this.$scrollDecorator=new ga(this.scrollBarV,this),this.$scrollDecorator.$updateDecorators()):(this.scrollBarV=new Ar(this.container,this),this.scrollBarH=new Sr(this.container,this),this.scrollBarV.addEventListener("scroll",function(i){t.$scrollAnimation||t.session.setScrollTop(i.data-t.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(i){t.$scrollAnimation||t.session.setScrollLeft(i.data-t.scrollMargin.left)}))}$addResizeObserver(){if(!(!window.ResizeObserver||this.$resizeObserver)){var e=this;this.$resizeTimer=na.delayedCall(function(){e.destroyed||e.onResize()},50),this.$resizeObserver=new window.ResizeObserver(function(t){var i=t[0].contentRect.width,r=t[0].contentRect.height;Math.abs(e.$size.width-i)>1||Math.abs(e.$size.height-r)>1?e.$resizeTimer.delay():e.$resizeTimer.cancel()}),this.$resizeObserver.observe(this.container)}}}ce.prototype.CHANGE_CURSOR=1;ce.prototype.CHANGE_MARKER=2;ce.prototype.CHANGE_GUTTER=4;ce.prototype.CHANGE_SCROLL=8;ce.prototype.CHANGE_LINES=16;ce.prototype.CHANGE_TEXT=32;ce.prototype.CHANGE_SIZE=64;ce.prototype.CHANGE_MARKER_BACK=128;ce.prototype.CHANGE_MARKER_FRONT=256;ce.prototype.CHANGE_FULL=512;ce.prototype.CHANGE_H_SCROLL=1024;ce.prototype.$changes=0;ce.prototype.$padding=null;ce.prototype.$frozen=!1;ce.prototype.STEPS=8;ra.implement(ce.prototype,da);je.defineOptions(ce.prototype,"renderer",{useResizeObserver:{set:function(a){!a&&this.$resizeObserver?(this.$resizeObserver.disconnect(),this.$resizeTimer.cancel(),this.$resizeTimer=this.$resizeObserver=null):a&&!this.$resizeObserver&&this.$addResizeObserver()}},animatedScroll:{initialValue:!1},showInvisibles:{set:function(a){this.$textLayer.setShowInvisibles(a)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(a){typeof a=="number"&&(this.$printMarginColumn=a),this.$showPrintMargin=!!a,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(a){this.$gutter.style.display=a?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},useSvgGutterIcons:{set:function(a){this.$gutterLayer.$useSvgGutterIcons=a},initialValue:!1},showFoldedAnnotations:{set:function(a){this.$gutterLayer.$showFoldedAnnotations=a},initialValue:!1},fadeFoldWidgets:{set:function(a){_.setCssClass(this.$gutter,"ace_fade-fold-widgets",a)},initialValue:!1},showFoldWidgets:{set:function(a){this.$gutterLayer.setShowFoldWidgets(a),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(a){this.$textLayer.setDisplayIndentGuides(a)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightIndentGuides:{set:function(a){this.$textLayer.setHighlightIndentGuides(a)==!0?this.$textLayer.$highlightIndentGuide():this.$textLayer.$clearActiveIndentGuide(this.$textLayer.$lines.cells)},initialValue:!0},highlightGutterLine:{set:function(a){this.$gutterLayer.setHighlightGutterLine(a),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},hScrollBarAlwaysVisible:{set:function(a){(!this.$hScrollBarAlwaysVisible||!this.$horizScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(a){(!this.$vScrollBarAlwaysVisible||!this.$vScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(a){typeof a=="number"&&(a=a+"px"),this.container.style.fontSize=a,this.updateFontSize()},initialValue:12},fontFamily:{set:function(a){this.container.style.fontFamily=a,this.updateFontSize()}},maxLines:{set:function(a){this.updateFull()}},minLines:{set:function(a){this.$minLines<562949953421311||(this.$minLines=0),this.updateFull()}},maxPixelHeight:{set:function(a){this.updateFull()},initialValue:0},scrollPastEnd:{set:function(a){a=+a||0,this.$scrollPastEnd!=a&&(this.$scrollPastEnd=a,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(a){this.$gutterLayer.$fixedWidth=!!a,this.$loop.schedule(this.CHANGE_GUTTER)}},customScrollbar:{set:function(a){this.$updateCustomScrollbar(a)},initialValue:!1},theme:{set:function(a){this.setTheme(a)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0},hasCssTransforms:{},useTextareaForIME:{initialValue:!ht.isMobile&&!ht.isIE}});fn.VirtualRenderer=ce;var Et=ne.Range,va=fe.EventEmitter,ma=ae;class pa{constructor(e,t,i,r,s,n){var o=this;this.length=t,this.session=e,this.doc=e.getDocument(),this.mainClass=s,this.othersClass=n,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate,!0),this.$others=r,this.$onCursorChange=function(){setTimeout(function(){o.onCursorChange()})},this.$pos=i;var l=e.getUndoManager().$undoStack||e.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=l.length,this.setup(),e.selection.on("changeCursor",this.$onCursorChange)}setup(){var e=this,t=this.doc,i=this.session;this.selectionBefore=i.selection.toJSON(),i.selection.inMultiSelectMode&&i.selection.toSingleRange(),this.pos=t.createAnchor(this.$pos.row,this.$pos.column);var r=this.pos;r.$insertRight=!0,r.detach(),r.markerId=i.addMarker(new Et(r.row,r.column,r.row,r.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach(function(s){var n=t.createAnchor(s.row,s.column);n.$insertRight=!0,n.detach(),e.others.push(n)}),i.setUndoSelect(!1)}showOtherMarkers(){if(!this.othersActive){var e=this.session,t=this;this.othersActive=!0,this.others.forEach(function(i){i.markerId=e.addMarker(new Et(i.row,i.column,i.row,i.column+t.length),t.othersClass,null,!1)})}}hideOtherMarkers(){if(this.othersActive){this.othersActive=!1;for(var e=0;e<this.others.length;e++)this.session.removeMarker(this.others[e].markerId)}}onUpdate(e){if(this.$updating)return this.updateAnchors(e);var t=e;if(t.start.row===t.end.row&&t.start.row===this.pos.row){this.$updating=!0;var i=e.action==="insert"?t.end.column-t.start.column:t.start.column-t.end.column,r=t.start.column>=this.pos.column&&t.start.column<=this.pos.column+this.length+1,s=t.start.column-this.pos.column;if(this.updateAnchors(e),r&&(this.length+=i),r&&!this.session.$fromUndo){if(e.action==="insert")for(var n=this.others.length-1;n>=0;n--){var o=this.others[n],l={row:o.row,column:o.column+s};this.doc.insertMergedLines(l,e.lines)}else if(e.action==="remove")for(var n=this.others.length-1;n>=0;n--){var o=this.others[n],l={row:o.row,column:o.column+s};this.doc.remove(new Et(l.row,l.column,l.row,l.column-i))}}this.$updating=!1,this.updateMarkers()}}updateAnchors(e){this.pos.onChange(e);for(var t=this.others.length;t--;)this.others[t].onChange(e);this.updateMarkers()}updateMarkers(){if(!this.$updating){var e=this,t=this.session,i=function(s,n){t.removeMarker(s.markerId),s.markerId=t.addMarker(new Et(s.row,s.column,s.row,s.column+e.length),n,null,!1)};i(this.pos,this.mainClass);for(var r=this.others.length;r--;)i(this.others[r],this.othersClass)}}onCursorChange(e){if(!(this.$updating||!this.session)){var t=this.session.selection.getCursor();t.row===this.pos.row&&t.column>=this.pos.column&&t.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",e)):(this.hideOtherMarkers(),this._emit("cursorLeave",e))}}detach(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.off("change",this.$onUpdate),this.session.selection.off("changeCursor",this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null}cancel(){if(this.$undoStackDepth!==-1){for(var e=this.session.getUndoManager(),t=(e.$undoStack||e.$undostack).length-this.$undoStackDepth,i=0;i<t;i++)e.undo(this.session,!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}}}ma.implement(pa.prototype,va);var wa={},Ln={},$a=pe,Mr=be;function kt(a,e){return a.row==e.row&&a.column==e.column}function ya(a){var e=a.domEvent,t=e.altKey,i=e.shiftKey,r=e.ctrlKey,s=a.getAccelKey(),n=a.getButton();if(r&&Mr.isMac&&(n=e.button),a.editor.inMultiSelectMode&&n==2){a.editor.textInput.onContextMenu(a.domEvent);return}if(!r&&!t&&!s){n===0&&a.editor.inMultiSelectMode&&a.editor.exitMultiSelectMode();return}if(n===0){var o=a.editor,l=o.selection,h=o.inMultiSelectMode,c=a.getDocumentPosition(),u=l.getCursor(),g=a.inSelection()||l.isEmpty()&&kt(c,u),w=a.x,d=a.y,m=function(b){w=b.clientX,d=b.clientY},f=o.session,v=o.renderer.pixelToScreenCoordinates(w,d),p=v,$;if(o.$mouseHandler.$enableJumpToDef)r&&t||s&&t?$=i?"block":"add":t&&o.$blockSelectEnabled&&($="block");else if(s&&!t){if($="add",!h&&i)return}else t&&o.$blockSelectEnabled&&($="block");if($&&Mr.isMac&&e.ctrlKey&&o.$mouseHandler.cancelContextMenu(),$=="add"){if(!h&&g)return;if(!h){var C=l.toOrientedRange();o.addSelectionMarker(C)}var y=l.rangeList.rangeAtPoint(c);o.inVirtualSelectionMode=!0,i&&(y=null,C=l.ranges[0]||C,o.removeSelectionMarker(C)),o.once("mouseup",function(){var b=l.toOrientedRange();y&&b.isEmpty()&&kt(y.cursor,b.cursor)?l.substractPoint(b.cursor):(i?l.substractPoint(C.cursor):C&&(o.removeSelectionMarker(C),l.addRange(C)),l.addRange(b)),o.inVirtualSelectionMode=!1})}else if($=="block"){a.stop(),o.inVirtualSelectionMode=!0;var S,M=[],E=function(){var b=o.renderer.pixelToScreenCoordinates(w,d),H=f.screenToDocumentPosition(b.row,b.column,b.offsetX);kt(p,b)&&kt(H,l.lead)||(p=b,o.selection.moveToPosition(H),o.renderer.scrollCursorIntoView(),o.removeSelectionMarkers(M),M=l.rectangularRangeBlock(p,v),o.$mouseHandler.$clickSelection&&M.length==1&&M[0].isEmpty()&&(M[0]=o.$mouseHandler.$clickSelection.clone()),M.forEach(o.addSelectionMarker,o),o.updateSelectionMarkers())};h&&!s?l.toSingleRange():!h&&s&&(S=l.toOrientedRange(),o.addSelectionMarker(S)),i?v=f.documentToScreenPosition(l.lead):l.moveToPosition(c),p={row:-1,column:-1};var R=function(b){E(),clearInterval(x),o.removeSelectionMarkers(M),M.length||(M=[l.toOrientedRange()]),S&&(o.removeSelectionMarker(S),l.toSingleRange(S));for(var H=0;H<M.length;H++)l.addRange(M[H]);o.inVirtualSelectionMode=!1,o.$mouseHandler.$clickSelection=null},L=E;$a.capture(o.container,m,R);var x=setInterval(function(){L()},20);return a.preventDefault()}}}Ln.onMouseDown=ya;var Tn={};(function(a){a.defaultCommands=[{name:"addCursorAbove",description:"Add cursor above",exec:function(t){t.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",description:"Add cursor below",exec:function(t){t.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",description:"Add cursor above (skip current)",exec:function(t){t.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",description:"Add cursor below (skip current)",exec:function(t){t.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreBefore",description:"Select more before",exec:function(t){t.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",description:"Select more after",exec:function(t){t.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",description:"Select next before",exec:function(t){t.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",description:"Select next after",exec:function(t){t.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"toggleSplitSelectionIntoLines",description:"Split selection into lines",exec:function(t){t.multiSelect.rangeCount>1?t.multiSelect.joinSelections():t.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:!0},{name:"splitSelectionIntoLines",description:"Split into lines",exec:function(t){t.multiSelect.splitIntoLines()},readOnly:!0},{name:"alignCursors",description:"Align cursors",exec:function(t){t.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",description:"Find all",exec:function(t){t.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:!0}],a.multiSelectCommands=[{name:"singleSelection",description:"Single selection",bindKey:"esc",exec:function(t){t.exitMultiSelectMode()},scrollIntoView:"cursor",readOnly:!0,isAvailable:function(t){return t&&t.inMultiSelectMode}}];var e=jt.HashHandler;a.keyboardHandler=new e(a.multiSelectCommands)})(Tn);(function(a){var e=Ei.RangeList,t=ne.Range,i=Si.Selection,r=Ln.onMouseDown,s=pe,n=V,o=Tn;a.commands=o.defaultCommands.concat(o.multiSelectCommands);var l=ki.Search,h=new l;function c(f,v,p){return h.$options.wrap=!0,h.$options.needle=v,h.$options.backwards=p==-1,h.find(f)}var u=Vt.EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(u.prototype),(function(){this.ranges=null,this.rangeList=null,this.addRange=function(f,v){if(f){if(!this.inMultiSelectMode&&this.rangeCount===0){var p=this.toOrientedRange();if(this.rangeList.add(p),this.rangeList.add(f),this.rangeList.ranges.length!=2)return this.rangeList.removeAll(),v||this.fromOrientedRange(f);this.rangeList.removeAll(),this.rangeList.add(p),this.$onAddRange(p)}f.cursor||(f.cursor=f.end);var $=this.rangeList.add(f);return this.$onAddRange(f),$.length&&this.$onRemoveRange($),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),v||this.fromOrientedRange(f)}},this.toSingleRange=function(f){f=f||this.ranges[0];var v=this.rangeList.removeAll();v.length&&this.$onRemoveRange(v),f&&this.fromOrientedRange(f)},this.substractPoint=function(f){var v=this.rangeList.substractPoint(f);if(v)return this.$onRemoveRange(v),v[0]},this.mergeOverlappingRanges=function(){var f=this.rangeList.merge();f.length&&this.$onRemoveRange(f)},this.$onAddRange=function(f){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(f),this._signal("addRange",{range:f})},this.$onRemoveRange=function(f){if(this.rangeCount=this.rangeList.ranges.length,this.rangeCount==1&&this.inMultiSelectMode){var v=this.rangeList.ranges.pop();f.push(v),this.rangeCount=0}for(var p=f.length;p--;){var $=this.ranges.indexOf(f[p]);this.ranges.splice($,1)}this._signal("removeRange",{ranges:f}),this.rangeCount===0&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),v=v||this.ranges[0],v&&!v.isEqual(this.getRange())&&this.fromOrientedRange(v)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new e,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){for(var f=this.ranges.length?this.ranges:[this.getRange()],v=[],p=0;p<f.length;p++){var $=f[p],C=$.start.row,y=$.end.row;if(C===y)v.push($.clone());else{for(v.push(new t(C,$.start.column,C,this.session.getLine(C).length));++C<y;)v.push(this.getLineRange(C,!0));v.push(new t(y,0,y,$.end.column))}p==0&&!this.isBackwards()&&(v=v.reverse())}this.toSingleRange();for(var p=v.length;p--;)this.addRange(v[p])},this.joinSelections=function(){var f=this.rangeList.ranges,v=f[f.length-1],p=t.fromPoints(f[0].start,v.end);this.toSingleRange(),this.setSelectionRange(p,v.cursor==v.start)},this.toggleBlockSelection=function(){if(this.rangeCount>1){var f=this.rangeList.ranges,v=f[f.length-1],p=t.fromPoints(f[0].start,v.end);this.toSingleRange(),this.setSelectionRange(p,v.cursor==v.start)}else{var $=this.session.documentToScreenPosition(this.cursor),C=this.session.documentToScreenPosition(this.anchor),y=this.rectangularRangeBlock($,C);y.forEach(this.addRange,this)}},this.rectangularRangeBlock=function(f,v,p){var $=[],C=f.column<v.column;if(C)var y=f.column,S=v.column,M=f.offsetX,E=v.offsetX;else var y=v.column,S=f.column,M=v.offsetX,E=f.offsetX;var R=f.row<v.row;if(R)var L=f.row,x=v.row;else var L=v.row,x=f.row;y<0&&(y=0),L<0&&(L=0),L==x&&(p=!0);for(var b,H=L;H<=x;H++){var G=t.fromPoints(this.session.screenToDocumentPosition(H,y,M),this.session.screenToDocumentPosition(H,S,E));if(G.isEmpty()){if(b&&w(G.end,b))break;b=G.end}G.cursor=C?G.start:G.end,$.push(G)}if(R&&$.reverse(),!p){for(var N=$.length-1;$[N].isEmpty()&&N>0;)N--;if(N>0)for(var K=0;$[K].isEmpty();)K++;for(var q=N;q>=K;q--)$[q].isEmpty()&&$.splice(q,1)}return $}}).call(i.prototype);var g=wi.Editor;(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(f){f.cursor||(f.cursor=f.end);var v=this.getSelectionStyle();return f.marker=this.session.addMarker(f,"ace_selection",v),this.session.$selectionMarkers.push(f),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,f},this.removeSelectionMarker=function(f){if(f.marker){this.session.removeMarker(f.marker);var v=this.session.$selectionMarkers.indexOf(f);v!=-1&&this.session.$selectionMarkers.splice(v,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(f){for(var v=this.session.$selectionMarkers,p=f.length;p--;){var $=f[p];if($.marker){this.session.removeMarker($.marker);var C=v.indexOf($);C!=-1&&v.splice(C,1)}}this.session.selectionMarkerCount=v.length},this.$onAddRange=function(f){this.addSelectionMarker(f.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(f){this.removeSelectionMarkers(f.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(f){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(o.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(f){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(o.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(f){var v=f.command,p=f.editor;if(p.multiSelect){if(v.multiSelectAction)v.multiSelectAction=="forEach"?$=p.forEachSelection(v,f.args):v.multiSelectAction=="forEachLine"?$=p.forEachSelection(v,f.args,!0):v.multiSelectAction=="single"?(p.exitMultiSelectMode(),$=v.exec(p,f.args||{})):$=v.multiSelectAction(p,f.args||{});else{var $=v.exec(p,f.args||{});p.multiSelect.addRange(p.multiSelect.toOrientedRange()),p.multiSelect.mergeOverlappingRanges()}return $}},this.forEachSelection=function(f,v,p){if(!this.inVirtualSelectionMode){var $=p&&p.keepOrder,C=p==!0||p&&p.$byLines,y=this.session,S=this.selection,M=S.rangeList,E=($?S:M).ranges,R;if(!E.length)return f.exec?f.exec(this,v||{}):f(this,v||{});var L=S._eventRegistry;S._eventRegistry={};var x=new i(y);this.inVirtualSelectionMode=!0;for(var b=E.length;b--;){if(C)for(;b>0&&E[b].start.row==E[b-1].end.row;)b--;x.fromOrientedRange(E[b]),x.index=b,this.selection=y.selection=x;var H=f.exec?f.exec(this,v||{}):f(this,v||{});!R&&H!==void 0&&(R=H),x.toOrientedRange(E[b])}x.detach(),this.selection=y.selection=S,this.inVirtualSelectionMode=!1,S._eventRegistry=L,S.mergeOverlappingRanges(),S.ranges[0]&&S.fromOrientedRange(S.ranges[0]);var G=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),G&&G.from==G.to&&this.renderer.animateScrolling(G.from),R}},this.exitMultiSelectMode=function(){!this.inMultiSelectMode||this.inVirtualSelectionMode||this.multiSelect.toSingleRange()},this.getSelectedText=function(){var f="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var v=this.multiSelect.rangeList.ranges,p=[],$=0;$<v.length;$++)p.push(this.session.getTextRange(v[$]));var C=this.session.getDocument().getNewLineCharacter();f=p.join(C),f.length==(p.length-1)*C.length&&(f="")}else this.selection.isEmpty()||(f=this.session.getTextRange(this.getSelectionRange()));return f},this.$checkMultiselectChange=function(f,v){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var p=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&v==this.multiSelect.anchor)return;var $=v==this.multiSelect.anchor?p.cursor==p.start?p.end:p.start:p.cursor;$.row!=v.row||this.session.$clipPositionToDocument($.row,$.column).column!=v.column?this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange()):this.multiSelect.mergeOverlappingRanges()}},this.findAll=function(f,v,p){if(v=v||{},v.needle=f||v.needle,v.needle==null){var $=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();v.needle=this.session.getTextRange($)}this.$search.set(v);var C=this.$search.findAll(this.session);if(!C.length)return 0;var y=this.multiSelect;p||y.toSingleRange(C[0]);for(var S=C.length;S--;)y.addRange(C[S],!0);return $&&y.rangeList.rangeAtPoint($.start)&&y.addRange($,!0),C.length},this.selectMoreLines=function(f,v){var p=this.selection.toOrientedRange(),$=p.cursor==p.end,C=this.session.documentToScreenPosition(p.cursor);this.selection.$desiredColumn&&(C.column=this.selection.$desiredColumn);var y=this.session.screenToDocumentPosition(C.row+f,C.column);if(p.isEmpty())var M=y;else var S=this.session.documentToScreenPosition($?p.end:p.start),M=this.session.screenToDocumentPosition(S.row+f,S.column);if($){var E=t.fromPoints(y,M);E.cursor=E.start}else{var E=t.fromPoints(M,y);E.cursor=E.end}if(E.desiredColumn=C.column,!this.selection.inMultiSelectMode)this.selection.addRange(p);else if(v)var R=p.cursor;this.selection.addRange(E),R&&this.selection.substractPoint(R)},this.transposeSelections=function(f){for(var v=this.session,p=v.multiSelect,$=p.ranges,C=$.length;C--;){var y=$[C];if(y.isEmpty()){let E=v.getWordRange(y.start.row,y.start.column);y.start.row=E.start.row,y.start.column=E.start.column,y.end.row=E.end.row,y.end.column=E.end.column}}p.mergeOverlappingRanges();for(var S=[],C=$.length;C--;){var y=$[C];S.unshift(v.getTextRange(y))}f<0?S.unshift(S.pop()):S.push(S.shift());for(var C=$.length;C--;){var y=$[C],M=y.clone();v.replace(y,S[C]),y.start.row=M.start.row,y.start.column=M.start.column}p.fromOrientedRange(p.ranges[0])},this.selectMore=function(f,v,p){var $=this.session,C=$.multiSelect,y=C.toOrientedRange();if(!(y.isEmpty()&&(y=$.getWordRange(y.start.row,y.start.column),y.cursor=f==-1?y.start:y.end,this.multiSelect.addRange(y),p))){var S=$.getTextRange(y),M=c($,S,f);M&&(M.cursor=f==-1?M.start:M.end,this.session.unfold(M),this.multiSelect.addRange(M),this.renderer.scrollCursorIntoView(null,.5)),v&&this.multiSelect.substractPoint(y.cursor)}},this.alignCursors=function(){var f=this.session,v=f.multiSelect,p=v.ranges,$=-1,C=p.filter(function(N){if(N.cursor.row==$)return!0;$=N.cursor.row});if(!p.length||C.length==p.length-1){var y=this.selection.getRange(),S=y.start.row,M=y.end.row,E=S==M;if(E){var R=this.session.getLength(),L;do L=this.session.getLine(M);while(/[=:]/.test(L)&&++M<R);do L=this.session.getLine(S);while(/[=:]/.test(L)&&--S>0);S<0&&(S=0),M>=R&&(M=R-1)}var x=this.session.removeFullLines(S,M);x=this.$reAlignText(x,E),this.session.insert({row:S,column:0},x.join(`
`)+`
`),E||(y.start.column=0,y.end.column=x[x.length-1].length),this.selection.setRange(y)}else{C.forEach(function(N){v.substractPoint(N.cursor)});var b=0,H=1/0,G=p.map(function(N){var K=N.cursor,q=f.getLine(K.row),ie=q.substr(K.column).search(/\S/g);return ie==-1&&(ie=0),K.column>b&&(b=K.column),ie<H&&(H=ie),ie});p.forEach(function(N,K){var q=N.cursor,ie=b-q.column,F=G[K]-H;ie>F?f.insert(q,n.stringRepeat(" ",ie-F)):f.remove(new t(q.row,q.column,q.row,q.column-ie+F)),N.start.column=N.end.column=b,N.start.row=N.end.row=q.row,N.cursor=N.end}),v.fromOrientedRange(p[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}},this.$reAlignText=function(f,v){var p=!0,$=!0,C,y,S;return f.map(function(x){var b=x.match(/(\s*)(.*?)(\s*)([=:].*)/);return b?C==null?(C=b[1].length,y=b[2].length,S=b[3].length,b):(C+y+S!=b[1].length+b[2].length+b[3].length&&($=!1),C!=b[1].length&&(p=!1),C>b[1].length&&(C=b[1].length),y<b[2].length&&(y=b[2].length),S>b[3].length&&(S=b[3].length),b):[x]}).map(v?E:p?$?R:E:L);function M(x){return n.stringRepeat(" ",x)}function E(x){return x[2]?M(C)+x[2]+M(y-x[2].length+S)+x[4].replace(/^([=:])\s+/,"$1 "):x[0]}function R(x){return x[2]?M(C+y-x[2].length)+x[2]+M(S)+x[4].replace(/^([=:])\s+/,"$1 "):x[0]}function L(x){return x[2]?M(C)+x[2]+M(S)+x[4].replace(/^([=:])\s+/,"$1 "):x[0]}}}).call(g.prototype);function w(f,v){return f.row==v.row&&f.column==v.column}a.onSessionChange=function(f){var v=f.session;v&&!v.multiSelect&&(v.$selectionMarkers=[],v.selection.$initRangeList(),v.multiSelect=v.selection),this.multiSelect=v&&v.multiSelect;var p=f.oldSession;p&&(p.multiSelect.off("addRange",this.$onAddRange),p.multiSelect.off("removeRange",this.$onRemoveRange),p.multiSelect.off("multiSelect",this.$onMultiSelect),p.multiSelect.off("singleSelect",this.$onSingleSelect),p.multiSelect.lead.off("change",this.$checkMultiselectChange),p.multiSelect.anchor.off("change",this.$checkMultiselectChange)),v&&(v.multiSelect.on("addRange",this.$onAddRange),v.multiSelect.on("removeRange",this.$onRemoveRange),v.multiSelect.on("multiSelect",this.$onMultiSelect),v.multiSelect.on("singleSelect",this.$onSingleSelect),v.multiSelect.lead.on("change",this.$checkMultiselectChange),v.multiSelect.anchor.on("change",this.$checkMultiselectChange)),v&&this.inMultiSelectMode!=v.selection.inMultiSelectMode&&(v.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())};function d(f){f.$multiselectOnSessionChange||(f.$onAddRange=f.$onAddRange.bind(f),f.$onRemoveRange=f.$onRemoveRange.bind(f),f.$onMultiSelect=f.$onMultiSelect.bind(f),f.$onSingleSelect=f.$onSingleSelect.bind(f),f.$multiselectOnSessionChange=a.onSessionChange.bind(f),f.$checkMultiselectChange=f.$checkMultiselectChange.bind(f),f.$multiselectOnSessionChange(f),f.on("changeSession",f.$multiselectOnSessionChange),f.on("mousedown",r),f.commands.addCommands(o.defaultCommands),m(f))}function m(f){if(!f.textInput)return;var v=f.textInput.getElement(),p=!1;s.addListener(v,"keydown",function(C){var y=C.keyCode==18&&!(C.ctrlKey||C.shiftKey||C.metaKey);f.$blockSelectEnabled&&y?p||(f.renderer.setMouseCursor("crosshair"),p=!0):p&&$()},f),s.addListener(v,"keyup",$,f),s.addListener(v,"blur",$,f);function $(C){p&&(f.renderer.setMouseCursor(""),p=!1)}}a.MultiSelect=d,we.defineOptions(g.prototype,"editor",{enableMultiselect:{set:function(f){d(this),f?this.on("mousedown",r):this.off("mousedown",r)},value:!0},enableBlockSelect:{set:function(f){this.$blockSelectEnabled=f},value:!0}})})(wa);var hi=ne.Range,ba=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(a,e,t){var i=a.getLine(t);return this.foldingStartMarker.test(i)?"start":e=="markbeginend"&&this.foldingStopMarker&&this.foldingStopMarker.test(i)?"end":""},this.getFoldWidgetRange=function(a,e,t){return null},this.indentationBlock=function(a,e,t){var i=/\S/,r=a.getLine(e),s=r.search(i);if(s!=-1){for(var n=t||r.length,o=a.getLength(),l=e,h=e;++e<o;){var c=a.getLine(e).search(i);if(c!=-1){if(c<=s){var u=a.getTokenAt(e,0);if(!u||u.type!=="string")break}h=e}}if(h>l){var g=a.getLine(h).length;return new hi(l,n,h,g)}}},this.openingBracketBlock=function(a,e,t,i,r){var s={row:t,column:i+1},n=a.$findClosingBracket(e,s,r);if(n){var o=a.foldWidgets[n.row];return o==null&&(o=a.getFoldWidget(n.row)),o=="start"&&n.row>s.row&&(n.row--,n.column=a.getLine(n.row).length),hi.fromPoints(s,n)}},this.closingBracketBlock=function(a,e,t,i,r){var s={row:t,column:i},n=a.$findOpeningBracket(e,s);if(n)return n.column++,s.column--,hi.fromPoints(n,s)}}).call(ba.prototype);var Ca=ee;we.nls;Ca.importCssString(`
    .error_widget_wrapper {
        background: inherit;
        color: inherit;
        border:none
    }
    .error_widget {
        border-top: solid 2px;
        border-bottom: solid 2px;
        margin: 5px 0;
        padding: 10px 40px;
        white-space: pre-wrap;
    }
    .error_widget.ace_error, .error_widget_arrow.ace_error{
        border-color: #ff5a5a
    }
    .error_widget.ace_warning, .error_widget_arrow.ace_warning{
        border-color: #F1D817
    }
    .error_widget.ace_info, .error_widget_arrow.ace_info{
        border-color: #5a5a5a
    }
    .error_widget.ace_ok, .error_widget_arrow.ace_ok{
        border-color: #5aaa5a
    }
    .error_widget_arrow {
        position: absolute;
        border: solid 5px;
        border-top-color: transparent!important;
        border-right-color: transparent!important;
        border-left-color: transparent!important;
        top: -5px;
    }
`,"error_marker.css",!1);(function(a){"include loader_build";var e=ee,t=ne.Range,i=wi.Editor,r=Vt.EditSession,s=xi.UndoManager,n=fn.VirtualRenderer;a.config=we,a.edit=function(l,h){if(typeof l=="string"){var c=l;if(l=document.getElementById(c),!l)throw new Error("ace.edit can't find div #"+c)}if(l&&l.env&&l.env.editor instanceof i)return l.env.editor;var u="";if(l&&/input|textarea/i.test(l.tagName)){var g=l;u=g.value,l=e.createElement("pre"),g.parentNode.replaceChild(l,g)}else l&&(u=l.textContent,l.innerHTML="");var w=a.createEditSession(u),d=new i(new n(l),w,h),m={document:w,editor:d,onResize:d.resize.bind(d,null)};return g&&(m.textarea=g),d.on("destroy",function(){m.editor.container.env=null}),d.container.env=d.env=m,d},a.createEditSession=function(l,h){var c=new r(l,h);return c.setUndoManager(new s),c},a.Range=t,a.Editor=i,a.EditSession=r,a.UndoManager=s,a.VirtualRenderer=n;var o=a.config.version;a.version=o})(xn);export{xn as a};
